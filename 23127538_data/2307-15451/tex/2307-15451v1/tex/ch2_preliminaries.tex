\section{Preliminaries}\label{sec:del}
    In this section we provide the required preliminaries on DEL~\cite{book/springer/vanDitmarsch2007} by illustrating its fundamental components: 
    epistemic models in Section~\ref{sec:epistemic_models}, event models in Section~\ref{sec:event_models}, and the product update in Section~\ref{sec:product_update}. 
    %
    Although the notion of possibility is part of the preliminaries~\cite{journals/jolli/Gerbrandy1997}, we defer these to Section~\ref{sec:delphic}, as this allows us to illustrate the components of \textsc{delphic} by following a similar structure. 

\subsection{Epistemic Models}\label{sec:epistemic_models}

    Let us fix a countable set $\atomSet$ of propositional atoms  and a finite set $\agentSet = \{1, \dots, n\} $ of agents.  The language $\Lang{}$ of \emph{multi-agent epistemic logic on $ \atomSet $ and $ \agentSet $ with common knowledge/belief} is defined by the following BNF:
        \begin{equation*}
        % {\centering
            \varphi ::= \top \mid \atom{p} \mid \neg \varphi \mid \varphi \wedge \varphi \mid \Box_i \varphi,
        % \par}
        \end{equation*}

        \noindent where $ \atom{p} \in \atomSet $, $ i \in \agentSet $, and $ G \subseteq \agentSet $. Formulae of the form $ \Box_i \varphi $ are read as ``agent $ i $ knows/believes that $ \varphi $''. We define the dual operators $\Diamond_i$ as usual. The semantics of DEL formulae is based on the concept of \emph{possible worlds}. \emph{Epistemic models} are defined as \emph{Kripke models}~\cite{journals/apf/Kripke1963} and they contain both factual information about possible worlds and epistemic information, i.e., which worlds are considered possible by each agent.

        \begin{definition}[Kripke Model]
            A \emph{Kripke model} for $ \Lang{} $ is a triple $ M = (W, R, V) $ where:
            \begin{compactitem}
                \item $ W \neq \varnothing $ is the set of possible worlds.
                \item $ R: \agentSet \rightarrow 2^{W \times W} $ assigns  to each agent $ i $ an accessibility relation $ R(i) $.
                \item $ V: \atomSet \rightarrow 2^W $ assigns to each atom a set of worlds.
            \end{compactitem}
        \end{definition}

        \noindent We abbreviate the relations $ R(i) $ with $ R_i $ and use the infix notation $ w R_i v $ in place of $ (w, v) \in R_i $. An \emph{epistemic state} in DEL is defined as a \emph{multi-pointed Kripke model} (\emph{MPKM}), \ie as a pair $ (M, W_d) $, where $ W_d \subseteq W $ is a non-empty set of designated worlds.

        \begin{example}[Coin in the Box]\label{ex:k_model}
            Agents $ a $ and $ b $ are in a room where a box is placed. Inside the box there is a coin. None of the agent knows whether the coin lies heads ($ \atom{h} $) or tails up ($ \neg \atom{h} $). Both agents know the perspective of the other.
            This is represented by the following MPKM (where the circled bullet represent the designated world).

            {
                \centering
                \input{img/ex_state.tex}
            \par}
        \end{example}

        \begin{definition}[Truth in Kripke Models]\label{def:k-truth}
            Let $ M = (W, R, V) $ be a Kripke model, $ w \in W $, $ i \in \agentSet $, $ \atom{p} \in \atomSet $ and $\varphi,\psi \in \Lang{C}$ be two formulae. Then,

            {\centering
            $
                \begin{array}{@{}lll}
                    (M, w) \models \atom{p}            & \text{ iff } & w \in V(\atom{p}) \\
                    (M, w) \models \neg \varphi        & \text{ iff } & (M, w) \not\models \varphi \\
                    (M, w) \models \varphi \wedge \psi & \text{ iff } & (M, w) \models \varphi \text{ and } (M, w) \models \psi \\
                    (M, w) \models \Box_i \varphi      & \text{ iff } & \forall v \text{ if } w R_i v \text{ then } (M, v) \models \varphi
                \end{array}
            $\par}
            \noindent Moreover, $ (M, W_d) \models \varphi $ iff $ (M, v) \models \varphi $, for all $ v \in W_d $.
        \end{definition}

        We recall the notion of bisimulation for MPKMs \cite{conf/kr/Bolander2021}. 
                
        \begin{definition}[Bisimulation]
            A \emph{bisimulation} between MPKMs $ ((W, R, V), W_d) $ and $ ((W', R', V'), $ $ W'_d) $ is a binary relation $ B \subseteq W \times W' $ satisfying:
            \begin{compactitem}
                \item \emph{Atoms}: if $ (w, w') \in B $, then for all $ \atom{p} \in \atomSet $, $ w \in V(\atom{p}) $ iff $ w' \in V'(\atom{p}) $.
                \item \emph{Forth}: if $ (w, w') \in B $ and $ w R_i v $, then there exists $ v' \in W' $ such that $ w' R'_i v' $ and $ (v, v') \in B $.
                \item \emph{Back}: if $ (w, w') \in B $ and $ w' R'_i v' $, then there exists $ v \in W $ such that $ w R_i v $ and $ (v, v') \in B $.
                \item \emph{Designated}: if $ w \in W_d $, then there exists a $ w' \in W'_d $ such that $ (w, w') \in B $, and vice versa.
            \end{compactitem}
        \end{definition}

        \noindent We say that two MPKMs $s$ and $s'$ are \emph{bisimilar} (denoted by $s \bisim s'$) when there exists a bisimulation between them. It is well known that bisimilar states satisfy the same formulae, hence encode the same information. 

    \subsection{Event Models}\label{sec:event_models}
        In DEL, actions are modeled by \emph{event models}~\cite{conf/tark/Batlag1998,book/aup/vanDitmarsch2008}, which capture action preconditions and effects from the perspectives of multiple agents at once. Intuitively, \emph{events} represent possible outcomes of the action, accessibility relations describe which events are considered possible by agents, preconditions capture the applicability of events, and postconditions specify how events modify worlds.
        \begin{definition}[Event Model]
            An \emph{event model} for $ \Lang{} $ is a quadruple $ \E = (E, Q, pre, post) $ where:
            \begin{compactitem}
                \item $ E \neq \varnothing $ is a finite set of events.
                \item $ Q: \agentSet \rightarrow 2^{E \times E} $ assigns to each agent $ i $ an accessibility relation $ Q(i) $.
                \item $ pre: E \rightarrow \Lang{} $ assigns to each event a \emph{precondition}.
                \item $ post: E {\rightarrow} (\atomSet {\rightarrow} \Lang{}) $ assigns to each event a \emph{postcondition} for each atom.
            \end{compactitem}
        \end{definition}

        \noindent We abbreviate $ Q(i) $ with $ Q_i $ and use the infix notation $ e Q_i f $ in place of $ (e, f) \in Q_i$. An \emph{epistemic action}\footnote{We use ``epistemic action'' with a broad meaning, simply referring to actions in epistemic planning, irrespective of their effects.} in DEL is defined as a \emph{multi-pointed event model} (\emph{MPEM}), \ie as a pair $ (\E, E_d) $, where $ E_d \subseteq E $ is a non-empty set of designated events. An action is \emph{purely epistemic} if, for each $ e \in E $, $ post(e) $ is the identity function $ id $; otherwise it is \emph{ontic}.

        \begin{example}\label{ex:e_model}
            Suppose that, in the scenario of Example~\ref{ex:k_model}, agent $ a $ peeks inside the box to learn how the coin has been placed while $b$ is distracted. Two events are needed to represent this situation: $ e_1 $ (the designated event) represents the perspective of agent $a$, who is looking inside the box; $ e_2 $ represents the fact that agent $b$ does not know what $a$ is doing.
            In the figure below, a pair $ \langle pre(e), post(e) \rangle $ represents the precondition and the postconditions of event $ e $.
            
            {
                \centering
                \input{img/ex_action.tex}
            \par}
        \end{example}

        We give a notion of bisimulation for actions, which will be needed to show an important relationship with our model. 
                
        \begin{definition}[Bisimulation for actions]
            A \emph{bisimulation} between MPEMs $ ((E, Q, pre, post), E_d) $ and $ ((E', Q',$ $pre', post'), E'_d) $ is a binary relation $ B {\subseteq} E \times E' $ satisfying:
            \begin{compactitem}
                \item \emph{Formulae}: if $ (e, e') \in B $, then $pre(e) = pre'(e')$ and, for all $ \atom{p} \in \atomSet $, $post(e)(p) = post'(e')(p)$.
                \item \emph{Forth}: if $ (e, e') \in B $ and $ e Q_i f $, then there exists $ f' \in W' $ such that $ e' Q'_i f' $ and $ (f, f') \in B $.
                \item \emph{Back}: if $ (e, e') \in B $ and $ e' Q'_i f' $, then there exists $ f \in W $ such that $ e Q_i f $ and $ (f, f') \in B $.
                \item \emph{Designated}: if $ e \in E_d $, then there exists a $ e' \in E'_d $ such that $ (e, e') \in B $, and vice versa.
            \end{compactitem}
        \end{definition}

        \noindent We say that two MPEMs $\alpha$ and $\alpha'$ are \emph{bisimilar} (denoted by $\alpha \bisim \alpha'$) when there exists a bisimulation between them.
        
    \subsection{Product Update}\label{sec:product_update}
        The product update of a MPKM with a MPEM results into a new MPKM that contains the updated information of agents. Here we adapt the definition of van Ditmarsch and Kooi \cite{book/aup/vanDitmarsch2008} to deal with multi-pointed models. An MPEM $ (\E, E_d) $ is \emph{applicable} in $ (M, W_d) $ if for each world $ w \in W_d $ there exists an event $ e \in E_d $ such that $ (M, w) \models pre(e) $.
        \begin{definition}[Product Update]\label{def:update_em}
            The \emph{product update} of a MPKM $ (M, W_d) $ with an applicable MPEM $ (\E, E_d) $, with $ M = (W, R, V) $ and $ \E = (E, Q, pre, post) $, is the MPKM $ (M, W_d) \otimes (\E, E_d) = ((W', R', V'), W'_d) $, where:

            {\centering
            $
            \begin{array}{l@{}l}
                W'           & = \{(w, e) \in W \times E \mid (M, w) \models pre(e)\} \\
                R'_i         & = \{((w, e), (v, f)) \in W' \times W' \mid w R_i v \text{ and } e Q_i f\} \\
                V'(\atom{p}) & = \{(w, e) \in W' \mid (M, w) \models post(e)(\atom{p})\} \\
                W'_d         & = \{(w, e) \in W' \mid w \in W_d \text{ and } e \in E_d\}
            \end{array}
            $\par}
        \end{definition}

        \begin{example}\label{ex:product-update}
            The product update of the MPKM of Example~\ref{ex:k_model} with the MPEM of Example~\ref{ex:e_model} is the MPKM below, where $v_3=(w_1,e_1)$, $v_1=(w_1,e_2)$ and $v_2=(w_2,e_2)$. Now, agent $a$ knows that the coin lies heads up, while $b$ did not change its perspective.
            %
            Importantly, notice that $w_1$ (resp., $w_2$) and $v_1$ (resp., $v_2$) encode the same information, but they are \emph{distinct} objects.
            
            {
                \centering
                \input{img/ex_product_update.tex}
            \par}
        \end{example}

    \subsection{Plan Existence Problem}\label{sec:plan_ex}
        We recall the notions of planning task and plan existence problem in DEL \cite{conf/ijcai/Aucher2013}. 
    
        \begin{definition}[DEL-Planning Task]
        \label{def:planning_task}
            A \emph{DEL-planning task} is a triple $ T = (s_0, \actionSet,$ $ \varphi_g) $, where:
            \begin{inparaenum}[\itshape (i)]
            \item $s_0$ is the initial MPKM; 
            \item $\actionSet$ is a finite set of MPEMs;
            \item $ \varphi_g \in \Lang{C} $ is a \emph{goal formula}.
            \end{inparaenum}
        \end{definition}

        \begin{definition}\label{def:solution}
            A \emph{solution} (or \emph{plan}) to a DEL-planning task $(s_0, \actionSet,$ $ \varphi_g)$ is a finite sequence $ \alpha_1, \dots, \alpha_\ell $ of actions of $\actionSet$ such that:
            \begin{compactenum}
                \item $ s_0 \otimes \alpha_1 \otimes \dots \otimes \alpha_\ell \models \varphi_g $, and
                \item For each $ 1 {\leq} k {\leq} \ell $, $ \alpha_k $ is applicable in $ s_0 \otimes \alpha_1 \otimes \dots \otimes \alpha_{k-1} $.
            \end{compactenum}
        \end{definition}

        \begin{definition}[Plan Existence Problem]\label{def:plan_ex_problem}
            Let $n \geq 1$ and $\mathcal{T}$ be a class of DEL-planning tasks. \planex{$\mathcal{T}$}{$n$} is the following decision problem:
            ``Given a DEL-planning task $ T \in \mathcal{T} $, where $|\agentSet|{=}n$, does $ T $ have a solution?''
        \end{definition}
