\documentclass[sigconf,nonacm]{acmart}
\settopmatter{authorsperrow=4}
\acmSubmissionID{307}

\usepackage{booktabs} %
\usepackage{wrapfig}
\usepackage{float}

\citestyle{acmauthoryear}


\usepackage[ruled]{algorithm2e} %
\renewcommand{\algorithmcfname}{ALGORITHM}
\SetAlFnt{\small}
\SetAlCapFnt{\small}
\SetAlCapNameFnt{\small}
\SetAlCapHSkip{0pt}




\settopmatter{printacmref=false}

\begin{document}
\input{tex/macro.tex}

\author{Yucheol Jung}
\authornote{Equal contribution}
\email{ycjung@postech.ac.kr}
\author{Hyomin Kim}
\authornotemark[1]
\email{min00001@postech.ac.kr}
\affiliation{%
 \institution{POSTECH}
 \city{Pohang}
 \country{South Korea}}



\author{Gyeongha Hwang}
\email{ghhwang@yu.ac.kr}
\affiliation{%
 \institution{Yeungnam University}
 \city{Gyeongsan}
 \country{South Korea}}

\author{Seung-Hwan Baek}
\email{shwbaek@postech.ac.kr}
\author{Seungyong Lee}
\email{leesy@postech.ac.kr}
\affiliation{%
 \institution{POSTECH}
 \city{Pohang}
 \country{South Korea}}
 
\makeatletter
\let\@authorsaddresses\@empty
\makeatother

\title[Mesh Density Adaptation for Template-based Shape Reconstruction]
    {- Supplementary Material -\\ Mesh Density Adaptation for \\ Template-based Shape Reconstruction}

\maketitle

In this supplementary document, we provide technical details, additional discussion, and more visual results. In \Sec{details}, we provide more information on the hyperparameters for the experiments conducted in the main paper.
In \Sec{smoothness}, we provide an additional experiment and discussion on the behavior of diffusion re-parameterization in the context of density adaptation.
In \Secs{fitting} and \ref{sec:registration}, we provide additional visual results for inverse rendering and non-rigid registration, respectively. \Sec{limitation} provides visual results for the limitation.

\section{Implementation Details}
\label{sec:details}

\subsection{Inverse Rendering}

Given adaptation strength $m$ and the number of total iterations $T$, the scheduling for the weights $w_u$ and $w_k$ of our adaptation energies at the $t$-th iteration is defined as
\begin{equation}
\begin{split}
w_u &= 
\begin{cases}
    m & \text{ if }\frac{t}{T} < \frac{1}{4} \\
    0 & \text{ otherwise} \\
\end{cases} \\
w_k &= 
\begin{cases}
    2m & \text{ if } \frac{1}{4} \leq \frac{t}{T} < \frac{1}{2} \\
    0 & \text{ otherwise}. \\
\end{cases}
\end{split}
\end{equation}
The adaptation strength per reconstructed object is presented in \Tbl{adaptation-strength}.


The weights for Laplacian regularizations differ per reconstructed object. We reuse the regularization weights used for the comparison in \cite{nicolet2021large}. We list the values for the Laplacian regularizations in \Tbl{regularization}.


For \cite{nicolet2021large} and ours, we use $\lambda=19$. Our method shares the same number of iterations as \cite{nicolet2021large} using the UniformAdam optimizer in \cite{nicolet2021large} with the same learning rate. Both \cite{nicolet2021large} and ours do not employ learning late decay, so small high-frequency shakes around the end of the optimization may occur (see the supplementary video). We list the number of total iterations and learning rate per object in \Tbl{optimization}. The regularization weights and learning rates per example in \Tbl{regularization} and \Tbl{optimization} are set to the same values as in \cite{nicolet2021large}. 


\begin{table}[t]
    \caption{Adaptation strength used for \textit{Ours} in our experiments on inverse rendering}
    \label{tbl:adaptation-strength}
    \centering
    \begin{tabular}{c c c c c c}
        T-shirt & Suzanne & Bunny & Cranium & Plank & Bob \\
        \hline
        0.5 & 1.8 & 2.0 & 2.7 & 0.7 & 0.7
    \end{tabular}
\end{table}
\begin{table}[t]
    \caption{Regularization weights used for the compared Laplacian regularizations in our experiments on inverse rendering.}
    \label{tbl:regularization}
    \centering
    
\resizebox{.995\linewidth}{!}{
    \begin{tabular}{c c c c c c c}
        &T-shirt & Suzanne & Bunny & Cranium & Plank & Bob \\
        \hline
         Laplacian & 12 & 2.8 & 3.8 & 0.21 & 3.8 & 0.67\\
         Bi-Laplacian & 12 & 3.8 & 2.1 & 0.16 & 5.0 & 0.37
    \end{tabular}}
\end{table}


\subsection{Non-rigid Surface Registration}

\paragraph{Template mesh fitting}
For our result, we use the same weight scheduling for density adaptation as in the inverse rendering. We fix $m=1.5$ and the number of total iterations $T=1400$. For both \textit{Ours} and \textit{DR}, diffusion re-parameterization without density adaptation, we use $\lambda=19$.

\paragraph{Landmark resampling}
In the alignment of landmarks on sphere, we use a diagonal weight matrix
\begin{equation}
    \mathbf{W}_{ii} = \begin{cases}
        1.0\times10^4 & \text{ if } i = 16 \\
        1 & \text{ otherwise},
    \end{cases}
\end{equation} where $16$ is the index for the landmark on the tip of the nose. The total number of landmarks is $38$. The landmarks for the artist-sculpted meshes are obtained from 3DCaricShop \cite{qiu20213dcaricshop}. We used all faces in 3DCaricShop to perform the landmark resampling.

\begin{table*}[t]
    \centering
    \caption{Number of iterations and learning rate for the inverse rendering experiment.}
    \label{tbl:optimization}
    
    \resizebox{.7\linewidth}{!}{
    \begin{tabular}{c | c c c c c c}
        & T-shirt & Suzanne & Bunny & Cranium & Plank & Bob \\
        \hline
        \# input views & 16 & 13 & 16 & 16 & 16 & 16 \\
        \hline
        \# iter (Laplacian \& Bi-Laplacian) & 390 & 1130 & 1450 & 1910 & 960 & 940 \\
        \hline
        \# iter (Ours \& \cite{nicolet2021large}) & 370 & 1080 & 1380 & 5000 & 1500 & 930 \\
        \hline
        learning rate & 3E-3 & 2E-3 & 1E-2 & 5E-3 & 3e-3 & 3e-3\\
    \end{tabular}}
\end{table*}

% Figure environment removed

\subsection{Running time}
Our density adaptation term increases the optimization time by 10-15\%. In inverse rendering, \cite{nicolet2021large} takes 28 seconds and ours takes 32 seconds on  average to reconstruct the shape of one instance. In non-rigid registration, the optimization takes 19 seconds without density adaptation and takes 22 seconds with our density adaptation.

\section{Behavior of diffusion re-parameterization}
\label{sec:smoothness}


Diffusion re-parameteterization helps density adaptation by stabilizing the optimization. Our density adaptation is based on the examination of Laplacian of intermediate results. However, because Laplacian is sensitive to local shape change, the intermediate results may contain noisy Laplacian. So, the adjustment in the density based on the Laplacian should not be instant. Quick fluctuations from instant adjustment may induce unstable optimization.

Diffusion re-parameterization generally prefers smooth deformation but eventually allows adjustment of regularity if the gradients are accumulated enough. This slow-starting but eventually-achieving behavior is presented in \Fig{comparison-regularization}. In this sense, we find diffusion re-parameterization is an appropriate smoothness regularization for our method because it prevents quick fluctuations in the density adjustment while not conflicting with our goal.















\section{Additional Results for Inverse Rendering}
\label{sec:fitting}

We provide more results for inverse rendering in \Fig{comparison-more}.
We show the results of \cite{nicolet2021large} and ours using the same template mesh. \Fig{error-plot} further visualizes the progression of optimization over time. Reported photometric mean absolute error (MAE) values are averaged using the results from scenes of Suzanne, Cranium, Bob, Bunny, T-shirt, and Plank. The weight scheduling for the density adaptation term increases the error of our method at 25\% iteration mark, but due to better vertex density from the adaptation, our method results in the lowest error in the end.



\section{Additional results for non-rigid registration}
\label{sec:registration}

\Fig{non-rigid-results} presents more results from our non-rigid registration on the artist-sculpted 3D meshes in \cite{qiu20213dcaricshop}. Our non-rigid registration using the sphere template mesh with automatically annotated landmarks produces more accurate reconstructions.


Template landmarks may hinder vertex relocation needed for density adaptation, as shown in \Fig{landmarks}. Configuration of landmarks affects the resulting mesh density; vertices would not freely relocate around landmarks because the energy term for the landmarks in the optimization pins the 3D coordinates of landmark vertices on the template. So, compared to without-landmark fitting, fitting with landmarks may exhibit sparser density in some regions. This side effect can be avoided by fitting with a fewer number of landmarks or without landmarks.
    


Using the dense correspondence obtained from our non-rigid registration, texture maps can be shared between the registration results, enabling texture transfer.
We show texture transfer results in \Fig{texture-transfer}.

\section{Limitations}
\label{sec:limitation}

\Fig{limitation} visualizes the limitation of our density adaptation based on Laplacian calculation from intermediate optimization results. While our proposed algorithm for calculating desired mesh density handles large structures well, fine details on flat region may not be benefited from the increase in density for better reconstruction.

\newpage
\bibliographystyle{ACM-Reference-Format}
\bibliography{main}

\clearpage

% Figure environment removed

\clearpage

% Figure environment removed

% Figure environment removed

\clearpage


% Figure environment removed


% Figure environment removed

\newpage


% Figure environment removed


\end{document}
