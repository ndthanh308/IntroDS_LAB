% !TeX document-id = {ee98884b-93e3-41d4-a7ba-3a60185f8427}
% !TeX TXS-program:bibliography = txs:///bibtex
% !TeX TXS-program:compile = txs:///pdflatex

\documentclass{ecai}

%\documentclass{article}
%\pdfpagewidth=8.5in
%\pdfpageheight=11in
%\usepackage{ijcai23}

% Use the postscript times font!
\usepackage[english]{babel}
\usepackage{times}
\usepackage{soul}
\usepackage{url}
\usepackage[hidelinks]{hyperref}
\usepackage[utf8]{inputenc}
\usepackage[small]{caption}
\usepackage{graphicx, latexsym}
\usepackage{amsmath,thm-restate}
\usepackage[thmmarks, amsthm]{ntheorem}
\usepackage{booktabs}
\usepackage{algorithm}
\usepackage[capitalize]{cleveref}
\usepackage{apptools}
\usepackage{chngcntr}
\usepackage{subcaption}
%\usepackage{ntheorem}
%\usepackage{algorithmic}
\usepackage[switch]{lineno}

\interfootnotelinepenalty = 10000


%\AtAppendix{\counterwithin{lemma}{section}}
%\AtAppendix{\counterwithin{definition}{section}}
%\AtAppendix{\counterwithin{example}{section}}

% Comment out this line in the camera-ready submission
%\linenumbers
\urlstyle{same}


% the following package is optional:
\usepackage{latexsym}

% See https://www.overleaf.com/learn/latex/theorems_and_proofs
% for a nice explanation of how to define new theorems, but keep
% in mind that the amsthm package is already included in this
% template and that you must *not* alter the styling.
%\newtheorem{theorem}{Theorem}
%\newtheorem{example}{Example}
%\newtheorem{lemma}{Lemma}
%\newtheorem{definition}{Definition}
%\newtheorem{corollary}{Corollary}
%\newtheorem*{theorem*}{Theorem}
%\newtheorem*{corollary*}{Corollary}
%\newtheorem{conjecture}{Conjecture}


\renewtheorem{theorem}{Theorem}
\newtheorem{example}[theorem]{Example}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{corollary}[theorem]{Corollary}
%\newtheorem*{theorem*}{Theorem}
%\newtheorem*{corollary*}{Corollary}
\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem{remark}[theorem]{Remark}
%\renewtheorem*{proof}{Proof}


\numberwithin{equation}{theorem}


\AtAppendix{\renewtheorem{theorem}{Theorem}[section]}


\usepackage{nico}
\usepackage{xparse,microtype}

%\usepackage{thmtools, thm-restate,apptools}
\usepackage{subcaption}

\usepackage{tikz}
\usepackage{pgfplots}
\pgfplotsset{compat=1.13}
\usepgfplotslibrary{external}
\tikzexternalize[prefix=tikz/]
\usepgfplotslibrary{colorbrewer}
% See http://www.traag.net/wp/wp-content/uploads/2014/06/display_colors1.png
\tikzexternaldisable
\tikzset{state/.style={rond5,minimum size=0.65cm}}
\tikzset{sink/.style={diam,minimum size=0.65cm}}
\tikzset{target/.style={rect,minimum size=0.6cm}}

\newcommand{\PO}{Player~$1$\xspace}
\newcommand{\PT}{Player~$2$\xspace}
\newcommand{\PLi}{Player~$i$\xspace}
\newcommand{\PLj}{Player~$j$\xspace}
\newcommand{\frPG}{frugal-parity~game\xspace}
\newcommand{\frBudg}{frugal-budget\xspace}
\newcommand{\frBG}{frugal-\buchi~game\xspace}
\renewcommand{\ni}{- \! i\xspace}
\newcommand{\PLni}{Player~$\ni$\xspace}

\newcommand{\cstrat}{\sigma_{\textrm{cont}}}
\newcommand{\dstrat}{\sigma_{\textrm{disc}}}

\newcommand{\frPgame}[1]{{\cal{#1}_{\texttt{frP}}}}

\newcommand{\Max}{\text{Max}\xspace}
\newcommand{\Min}{\text{Min}\xspace}

\newcommand{\zug}[1]{\langle #1  \rangle}
\newcommand{\stam}[1]{}
\renewcommand{\set}[1]{\{ #1  \}}


\newcommand{\rch}{\texttt{Reach}\xspace}
\newcommand{\buchi}{B{\"u}chi~}
\newcommand{\pari}{\texttt{Parity}\xspace}
\newcommand{\wpari}{\texttt{WkParity}\xspace}
\newcommand{\frpari}{\texttt{FrParity}\xspace}
\newcommand{\frbuchi}{\texttt{Fr\buchi}\xspace}
\newcommand{\mapindex}{\sigma}

\newcommand{\buch}{\texttt{B{\"u}chi}\xspace}
\newcommand{\thresh}{\texttt{Th}\xspace}
\newcommand{\ThR}[2]{\thresh^{\rch}_{#1}(#2)\xspace}
\newcommand{\ThB}[2]{\thresh^\buch_{#1}(#2)\xspace}

\newcommand{\Fd}{F_d}
\newcommand{\Fsubd}{F_{-d}\xspace}
\newcommand{\AttrFd}{F_d \cup \Attr{F_d}\xspace}


\def\TUG{\operatorname{TOW}}
\def\tug{\operatorname{tow}}


\newcommand\valgvb{\operatorname{val}_G(v,b)}
\newcommand\valg{\operatorname{val}_G}
\newcommand\valbarg{\overline{\operatorname{val}}_G}
\newcommand\supp{\operatorname{supp}}



%\AtAppendix{\renewtheorem{theorem}{Theorem}[section]}

%\def\fl#1{\lfloor #1\rfloor}
%\def\ceil#1{\lceil #1\rceil}



\NewDocumentCommand{\Ngh}{mg}{\texttt{N}_{\IfNoValueTF{#2}{}{#2}}(#1)}

%\newcommand{\ThPo}[2]{\thresh^{\pari}_1(#1, #2)}
%\newcommand{\ThPt}[2]{\thresh^{\pari}_2(#1, #2)}
\newcommand{\ThwP}[3]{\thresh^{\wpari}_{#1}(#2, #3)}
\NewDocumentCommand{\ThPo}{mg}{\thresh^{\pari}_1(\IfNoValueTF{#2}{}{#2,\xspace} #1)}
\NewDocumentCommand{\ThPt}{mg}{\thresh^{\pari}_2(\IfNoValueTF{#2}{}{#2,\xspace} #1)}
\NewDocumentCommand{\ThfrP}{mgg}{\thresh^{\frpari}_{#1}\IfNoValueTF{#2}{}{(\IfNoValueTF{#3}{}{#3,\xspace} #2)}}
\NewDocumentCommand{\ThfrB}{mmg}{\thresh^{\frbuchi}_{#1}(\IfNoValueTF{#3}{}{#3, \xspace} #2)}
%\newcommand{\ThfrP}[2]{\thresh^{\pari}_{#1}(#2)}
\newcommand{\ThP}[3]{\thresh^{\pari}_{#1}(#2, #3)}
\newcommand{\ThPhi}[2]{\thresh^{\Phi(#1)}(#2)}

\NewDocumentCommand{\frP}{g}{\texttt{frP}\IfNoValueTF{#1}{}{(#1)}}
\NewDocumentCommand{\frB}{g}{\texttt{frB}\IfNoValueTF{#1}{}{(#1)}}
\NewDocumentCommand{\Sld}{mg}{\texttt{S}_{#1}\IfNoValueTF{#2}{}{(#2)}\xspace}
\NewDocumentCommand{\Sed}{mg}{\texttt{T}_{#1}\IfNoValueTF{#2}{}{(#2)}\xspace}
\NewDocumentCommand{\FixSld}{g}{\texttt{S}\IfNoValueTF{#1}{}{(#1)}\xspace}
\NewDocumentCommand{\FixSed}{g}{\texttt{T}\IfNoValueTF{#1}{}{(#1)}\xspace}
\NewDocumentCommand{\buildto}{mg}{\texttt{t}_{#1}^0\IfNoValueTF{#2}{}{(#2)}\xspace}
\NewDocumentCommand{\buildti}{mgg}{\texttt{t}_{#1}^{\IfNoValueTF{#3}{i}{#3}}\IfNoValueTF{#2}{}{(#2)}\xspace}

%\NewDocumentCommand{\finreach}{mgg}{f_{\IfNoValueTF{#3}{v}{#3}}^{\IfNoValueTF{#2}{i}{#2}}(#1)}
%#1 = budget, #2 = iteration, #3 = vertex
%\NewDocumentCommand{\thresreach}{mg}{f_{\IfNoValueTF{#2}{v}{#2}}(#1)}

\DeclarePairedDelimiter\ceil{\lceil}{\rceil}
\DeclarePairedDelimiter\floor{\lfloor}{\rfloor}

%For Djordje
\usepackage[T1]{fontenc}


\newcommand{\Ti}[2]{T_i^{#1}(#2)}
\newcommand{\Tj}[2]{T_j^{#1}(#2)}
\newcommand{\Tif}[1]{T_i(#1)}
\newcommand{\Tjf}[1]{T_j(#1)}

\newcommand{\Stb}[1]{#1_{\texttt{Par}}}
\newcommand{\Buc}[1]{#1_{\texttt{Buc}}}

\newcommand{\Attr}[1]{\mathtt{Attr}(#1)}



\newcommand{\A}{{\cal A}}
\newcommand{\B}{{\cal B}}
\newcommand{\C}{{\cal C}}
\newcommand{\D}{{\cal D}}
\newcommand{\E}{{\cal E}}
\newcommand{\G}{{{\cal G}}}
\renewcommand{\H}{{\cal H}}
\newcommand{\M}{{\cal M}}
\renewcommand{\P}{{\cal P}}
\renewcommand{\S}{{\cal S}}
\newcommand{\play}{\text{play}\xspace}


\newcommand{\Real}{\mathbb{R}}
\newcommand{\Nat}{\mathbb{N}}
\newcommand{\Natstr}{\mathbb{N}^*}
\newcommand{\Natstro}{\mathbb{N}^* \setminus \mathbb{N}}
\newcommand{\Rat}{\mathbb{Q}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\race}[1]{\text{race}(#1)\xspace}




\NewDocumentCommand{\stepbudget}{mmm}{T_{#3}^{#2}(#1)}
%#1 = budget, #2 = iteration, #3 = vertex
\NewDocumentCommand{\budget}{mm}{T_{#2}(#1)}
\NewDocumentCommand{\gamestepbound}{mm}{\mathsf{Steps}_{#1}(#2)}
\NewDocumentCommand{\stepop}{mmmm}{\mathrm{step}_{#4}(#1, #2, #3)}
\NewDocumentCommand{\step}{mmm}{\mathrm{step}_{#3}(#1, #2)}

% SPACE

% == FLOATS ==
%
\setlength{\textfloatsep}{0.5\textfloatsep} % Space below/above a float if its [t]
\setlength{\intextsep}{0.5\intextsep} % Space below/above a float if its [h]
\setlength{\floatsep}{0.5\floatsep} % Space between floats
%\setlength{\abovecaptionskip}{0.75\abovecaptionskip}
%\setlength{\belowcaptionskip}{0.75\belowcaptionskip}

%\setcounter{topnumber}{2}
%\setcounter{totalnumber}{3}
%\renewcommand{\topfraction}{0.8}

% == EQUATIONS ==
\AtBeginDocument{
\setlength{\abovedisplayskip}{0.5\abovedisplayskip}
\setlength{\abovedisplayshortskip}{0.5\abovedisplayshortskip}
\setlength{\belowdisplayskip}{0.5\belowdisplayskip}
\setlength{\belowdisplayshortskip}{0.5\belowdisplayshortskip}
}

% == FOOTNOTES ==

%\setlength{\footnotesep}{0.25cm}
%\setlength{\skip\footins}{0.5cm}

% == NAUGHTY BITS ==

%\renewcommand{\baselinestretch}{0.98} % >=0.97
%\advance\textwidth5mm % <= 6mm
%\advance\hoffset-2.5mm
%\advance\textheight3mm
%\advance\voffset-1.5mm
%%
%\setlength{\marginparwidth}{3.3cm}
%\setlength{\marginparsep}{0.1cm}

%\let\subparagraph\relax
%\usepackage{titlesec}
%\titlespacing{\section}{0pt}{2ex}{1ex}
%\titlespacing{\subsection}{0pt}{1ex}{0.5ex}
%\titlespacing{\subsubsection}{0pt}{0.5ex}{0.25ex}




\crefname{lemma}{Lem.}{Lemms.}
\crefname{theorem}{Thm.}{Thms.}
\crefname{corollary}{Cor.}{Cors.}
\crefname{equation}{Eq.}{Eqs.}
\crefname{figure}{Fig.}{Figs.}
\crefname{tabular}{Tab.}{Tabs.}

\begin{document}
	
\begin{frontmatter}


\title{Reachability Poorman Discrete-Bidding Games}

\author[A]{\fnms{Guy}~\snm{Avni}}
\author[B,C]{\fnms{Tobias}~\snm{Meggendorfer}}%\orcid{0000-0002-1712-2165}}
\author[A]{\fnms{Suman}~\snm{Sadhukhan}}
\author[D]{\fnms{Josef}~\snm{Tkadlec}}
\author[C]{\fnms{Đorđe}~\snm{Žikelić}} % use of \orcid{} is optional

\address[A]{University of Haifa}
\address[B]{Technical University of Munich}
\address[C]{Institute of Science and Technology Austria}
\address[D]{Harvard University}

%\relatedversiondetails{A full version of the paper is available at}{https://arxiv.org/abs/2210.02773}
%\Copyright{Guy Avni, Tobias Meggendorfer, Suman Sadhukhan, Josef Tkadlec, and Đorđe Žikelić}




\begin{abstract}
We consider {\em bidding games}, a class of two-player zero-sum {\em graph games}. The game proceeds as follows. Both players have bounded budgets. 
A token is placed on a vertex of a graph, in each turn the players simultaneously submit bids, and the higher bidder moves the token, where we break bidding ties in favor of \PO. 
\PO wins the game iff the token visits a designated target vertex. 
We consider, for the first time, {\em poorman discrete-bidding} in which the granularity of the bids is restricted and the higher bid is paid to the bank. 
Previous work either did not impose granularity restrictions or considered {\em Richman} bidding  (bids are paid to the opponent).
%In contrast, in {\em Richman continuous-bidding} bids can be arbitrarily small and are paid to the other player. 
While the latter mechanisms are technically more accessible, the former is more appealing from a practical standpoint. Our study focuses on {\em threshold budgets}, which is the necessary and sufficient initial budget required for \PO to ensure winning against a given \PT budget. 
We first show existence of thresholds. 
In DAGs, we show that threshold budgets can be approximated with error bounds by thresholds under continuous-bidding and that they exhibit a periodic behavior. We identify closed-form solutions in special cases. We implement and experiment with an algorithm to find threshold budgets.
%We address two limitations of previously studied mechanisms. First, most work on bidding games focused on {\em continuous bidding} which allows arbitrarily small bids. While these games exhibit an interesting mathematical structure, their practical applicability is highly questionable. We consider {\em discrete bidding}, which restricts the granularity of the bids. Second, discrete-bidding games have only been studied under {\em Richman} bidding in which the higher bidder pays the lower bidder. While Richman bidding is technically accessible, in many practical applications bids are paid to the bank, called {\em poorman} bidding. We consider, for the first time, poorma discrete-bidding games. 
\end{abstract}
\end{frontmatter}

\section{Introduction}
Two-player zero-sum {\em graph games} are a fundamental model with numerous applications, e.g., in reactive synthesis~\cite{PR89} and multi-agent systems~\cite{AHK02}. %short, verification \cite{EJS93}, 
%and a deep connection with foundations of logic \cite{Rab69}. 
A graph game is played on a finite directed graph as follows. A token is placed on a vertex, and the players move it throughout the graph. We consider {\em reachability} games in which \PO wins iff the token visits a designated target vertex. Traditional graph games are {\em turn-based}: the players alternate turns in moving the token. We consider {\em bidding games}~\cite{LLPU96,LLPSU99} in which an ``auction'' (bidding) determines which player moves the token in each turn. 

Several concrete bidding mechanisms have been defined.
In all mechanisms, both players have bounded budgets.
In each turn, both players simultaneously submit bids that do not exceed their budgets, and the higher bidder moves the token.
%guy: later
%The auction is won by the higher bidder, ties are broken according to a predefined tie-breaking mechanism, discussed later.
%Then, the winner moves the token.
The mechanisms differ in three orthogonal properties. {\em Who pays:} In {\em first-price} bidding only the winner pays the bid, whereas in {\em all-pay} bidding both players pay their bids. {\em Who is the recipient:} In {\em Richman} bidding (named after David Richman) payments are made to the other player, 
 %(i.e.\ the sum of budgets remains constant), 
 in {\em poorman} bidding payments are made to the ``bank'', i.e.\ the bid is lost. 
%guy: This seems irrelevant to me. I suggest to keep this part of the introduction as short as possible so the reader reaches the example. 
%(There are several further, less studied variants~\cite[Sec.~6]{LLPSU99}.) 
{\em Restrictions on bids:} In {\em continuous-bidding} no restrictions are imposed and bids can be arbitrarily small, whereas in {\em discrete-bidding} budgets and bids are restricted to be integers.

In this work, we study, for the first time, first-price poorman discrete-bidding games. 
This combination addresses two limitations of previously-studied models. First, most work on bidding games focused on continuous-bidding games, where a rich mathematical structure was identified in the form of an intriguing equivalence with a class of stochastic games called {\em random-turn games}~\cite{PSSW09}, in particular for infinite-duration games~\cite{AHC19,AHI18,AHZ21,AJZ21}. These results, however, rely on bidding strategies that prescribe arbitrarily small bids. Employing such strategies in practice is questionable -- after all, money is discrete.
%. However, in practice, it is seldom the case that granularity of bids is not restricted, thus employing such strategies is highly questionable. 
%Discrete bidding addresses this limitation.
Second, discrete-bidding games have only been studied under Richman bidding~\cite{DP10,AAH21,AS22}.
The advantage of Richman over poorman bidding is that, as a rule of thumb, the former is technically more accessible. In terms of modeling capabilities, however, while Richman bidding is confined to so called {\em scrip systems} that provide fairness using an internal currency, poorman bidding captures a wide range of settings since it coincides with the popular first-price auction.

The central quantity that we focus on is the {\em threshold budget} in a vertex, which is a necessary and sufficient budget for \PO to ensure winning the game. Formally, a {\em configuration} of a bidding game is a triple $\zug{v, B_1, B_2}$, where $v$ denotes the vertex on which the token is placed and $B_i$ is \PLi's budget, for $i \in \set{1,2}$. For an initial vertex $v$, we call a function $T_v: \Nat \rightarrow \Nat$ the threshold budgets at $v$ if for every configuration $c = \zug{v, B_1, B_2}$, \PO wins from $c$ if $B_1 \geq T_v(B_2)$ and loses from $c$ if $B_1 \leq T_v(B_2)-1$. We stress that we focus only on {\em pure} strategies.

% Figure environment removed


\begin{example}\label{ex:TOW}
\normalfont
Consider the game that is depicted in Fig.~\ref{fig:TOW}, where we break bidding ties in favor of \PO.
In this example, we identify the first few thresholds. In \cref{thm:tug2}, we show that the thresholds in this game are $T_{v_1}(B_2) = \lfloor B_2/\phi \rfloor$ and $T_{v_2}(B_2) = \lfloor B_2 \cdot \phi \rfloor$, %(\cref{thm:tug2}), 
where $\phi \approx 1.618$ is the golden ratio.\footnote{We encourage the reader to read more about these two sequences in \url{https://oeis.org/A000201} and \url{https://oeis.org/A005206}. See also Remark~\ref{rem:Wythoff}.}
%Here we prove this directly for the first few instances.
First, when both budgets are $0$, all biddings result in ties, which \PO wins and forces the game to $t$.
Second, we argue that \PO wins from $\zug{v_1, 0, 1}$. Indeed, \PO bids $0$. In order to avoid losing, \PT must bid $1$, wining the bidding and pays the bid to the bank. Thus, the next configuration is $\zug{v_2, 0,0}$, from which \PO wins.
Third, we show that $T_{v_2}(1) = 1$. Indeed, \PT wins from $\zug{v_2,0,1}$ by bidding $1$. On the other hand, from $\zug{v_2, 1, 1}$ \PO wins since by bidding $1$, he forces the game to $\zug{v_1,0,1}$, from which he wins.
Finally, $T_{v_1}(2) > 0$ since \PT can force two consecutive wins when the budgets are $\zug{0,2}$, and $T_{v_1}(2) = 1$ since by bidding $1$, \PO forces \PT to pay at least $2$ in order not to lose immediately, and he wins from $\zug{v_2,1,0}$. 
\end{example}



\paragraph{Applications.} 
In {\em sequential first-price auctions} $m$ items are sold sequentially in independent first-price auctions (e.g.,~\cite{LST12b,GS01}). The popularity of these auctions stems from their simplicity. Indeed, in each round of the auction, a user is only asked to bid for the current item on sale, whereas in {\em combinatorial auctions}, users need to provide an exponential input: a valuation for each subset of items.
%rather than providing valuations for exponentially many subsets of items as in {\em combinatorial auctions}, the users are only asked to provide a single bid at each round of the auction. 
Two-player sequential auctions are a special case of bidding games played on DAGs. Each vertex $v$ represents an auction for an item. A path from the root to $v$ represents the outcomes of previous rounds, i.e., a subset of items that \PO has purchased so far.  For a target bundle $T$ of items, this modeling allows us to obtain a bidding strategy that is guaranteed to purchase at least the bundle $T$ no matter how the opponent bids. Indeed, we solve the corresponding bidding game with the \PO objective of reaching a vertex in which $T$ is purchased.  We can also capture a quantitative setting in which \PO associates a value with each bundle of items. Given a target value $k$, we set \PO's target to be vertices that represent a purchased bundle of value at least $k$. We can then either find the threshold budget for obtaining value $k$ or fix the initial budgets and optimize over $k$.


%We elaborate on the construction of a bidding game that corresponds to a sequential auction. Each vertex $v$ is associated with a pair $\zug{S, i}$, where $S \subseteq \set{1,\ldots, m}$ represents a collection of items that \PO has already purchased and $i$ is the item on sale. The neighbors of $v$ are associated with $\zug{S \cup \set{i}, j}$ and $\zug{S, j}$ respectively denoting \PO purchasing $i$ or not. For a target bundle $T \subseteq \set{1,\ldots,m}$, a leaf is winning w.r.t. $T$ iff the items that \PO purchased contains $T$, and \PO's goal is to reach a winning leaf. Bidding games allow variations of this basic setting. For example, selling identical items gives rise to a game on a DAG rather than a tree. Additionally, 


Next, we describe two important classes of continuous poorman-bidding games that are technically challenging, and we argue that it is appealing to bypass this challenge by considering their discrete-bidding variants. Our study lays the basis for these extensions. 
First, all-pay poorman bidding games constitute a dynamic version of the well-known Colonel Blotto games \cite{Bor21}: we think of budgets as resources with no inherent value (e.g., time or energy) and a strategy invests the resources in order to achieve a goal. 
%short For example, in a ``best of 7'' tournament (e.g., as in the NBA playoffs), each team needs to decide which players play in each match, where the team that invests more in a match will win it (that is, we associate budgets with players' strengths and matches with biddings), and the goal is to win the tournament. 
In fact, many applications of Colonel Blotto games are dynamic, thus all-pay bidding games are arguably a more accurate model~\cite{AIT20}. 
All-pay poorman bidding games are surprisingly technically complex, e.g., already in extremely simple games, optimal strategies rely on infinite-support distributions, and have never been studied under discrete bidding.
Second, the study of partial-observation bidding games was initiated recently~\cite{AJZ23}. Poorman bidding is both appealing from a theoretical and practical standpoint but is technically complex. Again, it is appealing to consider partial-information in combination with discrete bidding.

Finally, poorman discrete bidding are amenable to extensions such as multi-player games or non-zero-sum games~\cite{MKT18}.

\subsubsection*{Our Contribution}

\paragraph{Existence of thresholds.} 
In discrete-bidding games, one needs to explicitly state how bidding ties are resolved~\cite{AAH21}. Throughout the paper, we always break ties in favor of \PO. 
%short The appeal of this mechanism is in its simplicity. 
We start by showing existence of thresholds in every game, including games that are not DAGs. Our techniques are adapted from~\cite{AAH21} for Richman discrete-bidding games. We note that existence of thresholds coincides with {\em determinacy}: from every configuration, one of the players has a {\em pure} winning strategy. We point out that while determinacy holds in turn-based games for a wide range of objectives~\cite{Mar75}, determinacy of bidding games is not immediate due to the {\em concurrent} choice of bids. For example, {\em matching pennies} is a very simple concurrent game that is not determined: neither player can ensure winning.
%short For example, consider the concurrent game {\em matching pennies} which consists of one round in which both players simultaneously choose either Heads (0) or Tails (1), and \PO wins iff the XOR of the players' choices is 1. Matching pennies is not determined since, clearly, no player can ensure winning by revealing their choice before the other player. 

\stam{OLD
The basic question we study is the existence of thresholds, which is equivalent to {\em determinacy}: from every configuration, one of the players has a {\em pure} winning strategy. Determinacy  in Richman discrete-bidding games was studied in~\cite{AAH21}, which shows that determinacy depends on the mechanism employed to resolve bidding ties. We point out that while determinacy holds in turn-based games for a wide range of objectives~\cite{Mar75}, determinacy of bidding games is not immediate since they constitute a subclass of {\em concurrent} graph games, which are not in general determined:
For example, neither player can ensure winning {\em matching pennies} (with pure strategies).
%short For example, consider the concurrent game {\em matching pennies} which consists of one round in which both players simultaneously choose either Heads (0) or Tails (1), and \PO wins iff the XOR of the players' choices is 1. Matching pennies is not determined since, clearly, no player can ensure winning by revealing their choice before the other player. 

\stam{
We focus on two tie-breaking mechanisms. First, we consider {\em advantage-based} tie breaking, which was defined in~\cite{DP10} under Richman discrete-bidding, where determinacy was shown for reachability objectives. For infinite-duration objectives, determinacy was obtained in~\cite{AAH21}, and improved algorithms were shown in~\cite{AS22}. Given these positive results, we find it surprising that poorman discrete-bidding games under advantage based tie-breaking are not determined! That is, we show a game and an initial configuration from which neither player has a pure winning strategy. 
}

%In particular to discrete bidding games, unlike continuous bidding games, determinacy depends on the tie-breaking considered. 
%For example, Richman discrete bidding games are not determined for \emph{alternating} tie-breaking~\cite{AAH21}. 
The mechanism that we consider, and on which we focus throughout the rest of the paper, breaks ties in favor of \PO. We show that this mechanism admits determinacy, as is the case in Richman bidding~\cite{AAH21}. %Beyond the theoretical appeal, we argue that this mechanism addresses the inherent imbalance between the players: \PO needs to reach the target whereas \PT only needs to avoid it. 
}


\paragraph{Threshold budgets in DAGs.}
In continuous bidding, each vertex $v$ is associated with a {\em threshold ratio} which is a value $t \geq 0$ such that when the ratio between the two players' budgets is $t+\epsilon$, \PO wins, and when the ratio is $t-\epsilon$, \PT wins~\cite{LLPSU99}. 

First, we bound the discrete thresholds based on continuous ratios as follows. Let $t_v$ denote the continuous ratio at a vertex~$v$. Then, for every $B_2 \in \Nat$, we show that $T_v(B_2)$ lies in the {\em pipe}: $(B_2 - n) \cdot t_v \leq T_v(B_2) \leq B_2 \cdot t_v$, where $n$ is the number of vertices in the game.
We point out that the width of the pipe is fixed, so for large budgets $B_2$ the value $T_v(B_2)/B_2$ tends to the threshold ratio $t_v$.
%the larger the budgets, the better the approximation ratio that we can guarantee. 
%We point out that the relative width of the pipe tends to $0$ as the budgets grow, that is, the larger the budgets, the better the approximation that we can guarantee. 

Second, we show that threshold budgets in DAGs exhibit a periodic behavior. While we view this as a positive result, it has a negative angle: The periods are surprisingly complex even for fairly simple games, so even though we identify a compact representation for the thresholds in Example~\ref{ex:TOW}, we do not expect a compact representation in general games. 

Third, in continuous-bidding games, the compact representation of the thresholds (i.e., each vertex being associated with a ratio) is the key to obtaining a linear-time backwards-inductive algorithm to compute thresholds in DAGs. Under discrete bidding, given a \PT budget $B_2$, we present a pseudo-linear algorithm to find $T(B_2)$, namely its running time is linear in the size of the game and in $B_2$.

Fourth, we obtain closed-form solutions for a class of games called {\em race games}: for $a,b \in \Nat$, the race game $\race{a,b}$ ends within $a+b$ turns, \PO wins the game if he wins $a$ biddings before \PT wins $b$ biddings. For example, a ``best of 7'' tournament (as in the NBA playoffs) is $\race{4,4}$.

\stam{
{\bf Periodicity of the threshold function.} We show that every vertex $v$ in a game played on a DAG, there are values $u_x,u_y \in \Nat$ such that for a large enough budget $B_2$, we have $T(B_2 + u_x) = T(B_2) + u_y$. This interesting theoretical finding has a useful practical application: in order to compute $T(B_2)$, one needs to compute the thresholds for small initial budgets and extrapolate to larger initial budgets. (TODO: check and correct this. Do we need to add assumptions like different continuous thresholds?)

{\bf Closed-form solutions.} We identify closed-form solutions to some games. First, beyond the solution we describe in Example~\ref{ex:TOW}, we show a closed-form solution for a {\em tug-of-war} game (a game played on an undirected path) with three internal vertices, and show experimental evidence that closed-form solutions are unlikely for games beyond that. Second, for $a,b \in \Nat$, the {\em race game} $\race{a,b}$ (e.g.,~\cite{}) ends within $a+b$ turns, \PO wins the game if he wins $a$ biddings before \PT wins $b$ biddings. For example, a ``best out of 7'' tournament (as in the NBA playoffs) is $\race{4,4}$. We show that the threshold in $\race{a,b}$ is $....$.  
}
% Figure environment removed

\begin{example}
\label{ex:2race+1}
\normalfont
We illustrate some of our main results. In Fig.~\ref{fig:intro-race}, we depict the threshold budgets in three vertices of a game %, the root and its two children $v_1$ and $v_2$,
as a function of \PT's budget. %First, note that the $r$ is stable: upon winning a bidding at $r$, \PO will always prefer to proceed to $v_2$ since intuitively, he needs less budget to win from there. 
First, the discrete thresholds reside in a ``pipe'' %below the line 
with slope equal to the corresponding continuous ratio (\cref{stm:pipe}).  Second, $v_1$ and $v_2$ are roots of race games, thus their thresholds are simple step functions (\cref{thm:thresholdrace}).
%their thresholds are step-wise as we prove theoretically,
Moreover, they lie exactly on the boundary of the pipe infinitely often, i.e.\ the pipe bound is tight (\cref{stm:pipe_tight}).
Third, the threshold budgets are periodic (\cref{thm:periodicity}), we have $T_r(B_2 + 45) = T_r(B_2) + 32$. We find it surprising that in such a simple game both the periodicity in the root node and the irregularity within this period are comparatively large.
\end{example}
%
\paragraph{Implementation and Experiments.} 
We provide a pseudo-polynomial algorithm to find the threshold budget given the initial budget of \PT in general games together with a specialized, faster variant for DAGs. We implement the algorithm, experiment with it, and develop conjectures based on our findings. Beyond the theoretical interest, the running time we observed is extremely fast, illustrating the practicality of finding exact thresholds. %We experiment with the algorithm, show experimental validation for our theoretical findings, and draw conjectures on poorman discrete-bidding games both for games played on DAGs and on general graphs. 



%\subsection{Related work}
%Infinite-duration bidding games

%Colonel Blotto

%Tournaments ???







\section{Preliminaries}
	A reachability bidding game is \(\G  = \zug{V, E, t, s}\), where \(V\) is the set of vertices, \(E \subseteq V \times V\) is the set of edges, \PO's {\em target} is $t \in V$, a {\em sink} $s \in V$ has no path to $t$ and we think of $s$ as \PT's target, we assume that all other vertices have a path to both $t$ and $s$.
	We write $N(v) = \{u \mid (v, u) \in E\}$ to denote the \emph{neighbours} of $v$.
	
	A {\em configuration} of \(\calG\) is of the form \(c = \zug{v, B_1, B_2}\), where \(v \in V\) is the vertex on which the token is placed and $B_i$ is the budget of \PLi, for $i \in \set{1, 2}$. At $c$, both players simultaneously choose {\em actions}, and the pair of actions determines the next configuration. For $i \in \set{1,2}$, \PLi's action is a pair $\zug{b_i, u_i}$, where $b_i \leq B_i$ is an {\em integer} bid that does not exceed the available budget and $u_i \in N(v)$ is a neighbor of $v$ to move to upon winning the bidding. If $b_1 \geq b_2$, then \PO moves the token and pays ``the bank'', thus the next configuration is $\zug{u_1, B_1 - b_1, B_2}$. Dually, when $b_2 > b_1$, the next configuration is $\zug{u_2, B_1, B_2 - b_2}$. 
%	When $b_1 = b_2$, the winner of the bidding is determined according to $\M$. We focus on the following two tie-breaking mechanisms:
%	\begin{itemize}
%	\item {\bf Advantage-based~\cite{DP10}:} One of the players has the {\em advantage}, which we denote by $*$. Consider a configuration $\zug{v, B_1^*, B_2}$ in which \PO has the advantage (the definition for \PT is dual), let $\zug{u_i, b_i}$ be \PLi's action, for $i \in \set{1, 2}$, and assume $b_1 = b_2$. Then, \PO chooses between
%	(1) winning the bidding and passing the advantage to the other player,
%%	(1) use the advantage by winning the bidding then the advantage changes hands,
%	thus the next configuration is $\zug{u_1, B_1 - b_1, B_2^*}$; or
%	(2) losing the bidding and keeping the advantage,
%%	(2) keep the advantage by losing the bidding, 
%	thus the next configuration is $\zug{u_2, B_1^*, B_2 - b_2}$. 
%	\item {\bf \PO always wins ties:} 
%	Formally, let \(\zug{u_i, b_i}\) be \PLi's action for \(i \in \{1, 2\}\) and \(b_1 = b_2\), then next configuration is \(\zug{u_1, B_1 - b_1, B_2}\).
%	\end{itemize}
%	
	
	A {\em strategy} is a function that maps each configuration to an action.\footnote{In full generality, strategies map {\em histories} of configurations to actions. However, {\em positional} strategies suffice for reachability games.} A pair of strategies $\sigma_1$, $\sigma_2$, and an initial configuration $c_0$ gives rise to a unique {\em play} denoted by $\play(c_0, \sigma_1, \sigma_2)$, which is defined inductively. The inductive step, namely the definition of how a configuration is updated given two actions from the strategies, is described above. Let $\play(c_0, \sigma_1, \sigma_2) = c_0, c_1, \ldots$, where $c_i = \zug{v_i, B^i_1, B^i_2}$. The {\em path} that corresponds to $\play(c_0, \sigma_1, \sigma_2)$ is $v_0,v_1,\ldots$
	
	

\begin{definition}[Winning Strategies]
A \PO strategy \(\sigma_1\) is called a \emph{winning strategy} from configuration \(c_0\) iff  for any \PT strategy \(\sigma_2\),  \(\play(c_0, \sigma_1, \sigma_2)\) visits the target $t$. 
On the other hand, a \PT strategy \(\sigma_2\) is a winning strategy from \(c_0\) iff for any \PO strategy \(\sigma_1\), \(\play(c_0, \sigma_1, \sigma_2)\) \emph{does not visit} the target \(t\).
For $i \in \set{1, 2}$, we say that \PLi \ {\em wins} from $c_0$ if he has a winning strategy from $c_0$. 
\end{definition}

Throughout the paper, we focus on the necessary and sufficient budget that \PO needs for winning, given a \PT budget, defined formally as follows. 

\begin{definition}[Threshold budgets]
Consider a vertex $v \in V$. The {\em threshold budget} at $v$ is a function $T_v: \Nat \rightarrow \Nat$ such that for every $B_2 \in \Nat$:
\begin{itemize}
\item \PO wins from $\zug{v, T_v(B_2), B_2}$, and 
\item \PT wins from $\zug{v, T_v(B_2) -1, B_2}$. 
\end{itemize}
\end{definition}




\stam{ %OLD
	A discrete-bidding games \(\calG\) is \(\zug{V, E, B_1, B_2, \calO}\), where \(V\) is the set of vertices, \(E \subseteq V \times V\) is the set of edges, and \(B_1, B_2 \in \bbN^*\) are the two players' initial budget respectively, and \(\calO\) denotes the \PO's objective in the game.
%	We often denote the total budget \(B_1 + B_2\) by \(B\), where \([B]\) denotes \(\{0, 1, \ldots B\}\).
	
	Intuitively, on each turn, both players simultaneously choose a bid which does not exceed their respective budgets. 
	The higher bidder moves the token.
	We study \emph{Poorman} bidding, where the bidder(s) pays the \emph{bank}.
	In \emph{first-price} Poorman bidding, only the higher bidder pays the bank, while in case of \emph{all-pay} Poorman bidding \emph{both} players pays their respective bids to the bank.
	
	We consider two types of tie-breaking mechanism: 
	\begin{itemize}
		\item \textbf{One player wins ties.} One of the player always wins ties. If the objectives are not symmetric, this may raise two different interesting scenarios to investigate.
		
		\item \textbf{Advantage based.} Exactly one of the players holds the advantage at any turn. 
		When a tie occurs, the player who holds the advantage has two choices: \emph{either} to use it, which makes him the winner of the bid and the advantage passed on to the other player,  \emph{or} to hold on to it, which makes the other player the winner of the current bid. 
	\end{itemize}

	For the subsequent sections, we consider the \emph{\PO wins ties} as the default tie-breaking mechanism, unless otherwise mentioned.
	
	A configuration in \(\calG\) is of the form \(\zug{v, k, l}\) where \(v\) is the current location in the game graph, and \(k, l\) are the budgets for \PO and \PT respectively.
	From a configuration \(c  = \zug{v, k, l}\), if \PO bids \(b_1 \leq k\) and \PT bids \(b_2 \leq l\), then 
	\begin{itemize}
		\item  For first-price bidding, if \(b_1 \geq b_2\) and suppose \PO chooses \(v'\), then the next configuration is \(\zug{v', k - b_1, l}\).
		Otherwise suppose \PT chooses \(v''\) upon winning the bidding, then the next configuration in the game is \(\zug{v'', k, l - b_2}\).
		
		\item For all play bidding, if \(b_1 \geq b_2\) and suppose \PO chooses \(v'\), then the next configuration is \(\zug{v', k - b_1, l - b_2}\).
		Otherwise, suppose \PT choose \(v''\) upon winning the bidding, then the next configuration in the game is \(\zug{v'', k - b_1, l - b_2}\). 
	\end{itemize}
	A (finite) history of discrete bidding games is a sequence of configurations \(\zug{v_1, k_1, l_1}, \zug{v_2, k_2, l_2}, \ldots \zug{v_n, k_n, l_n}\), where the subsequent configuration of \(\zug{v_{i}, k_i, l_i}\) is determined depending on each player's bid as above.
	For the current purpose, we consider reachability objective for \PO, denoted by \(\calO \subseteq V\), and we call a play \(\pi = \zug{v_j, k_j, l_j}_{j \geq 0}\) \emph{satisfies} \(\calO\) iff there is an \(j \geq 0\) such that \(v_j \in \calO\).
	
	A strategy for $\PLi$ for \(i \in \set{1, 2}\) is function from the set of legal histories to a choice of bid and next vertex, of the form \(\sigma: (V \times \bbN \times \bbN)^* \rightarrow \bbN \times V\).
	It is imperative that a player can choose their bid only within their current budget.
	Once we fix strategies \(\sigma_i\) for \(i \in \{1, 2\}\) and an initial configuration \(\zug{v_0, k_0, l_0}\), we get an unique play.
	
	
\begin{definition}[Surely Winning Strategies]
		A \PO strategy \(\sigma_1\) is called a \emph{surely winning strategy} from configuration \(\zug{v, k, l}\) iff  for any \PT strategy \(\sigma_2\), the unique play \(\zug{\zug{v, k, l}, \sigma_1, \sigma_2}\) satisfies \(\calO\).
\end{definition}
\todo{Semantics of bidding games as concurrent games}
}

\input{determinacy}
	



\input{pipeandstabilization}

\input{closed-form}

\input{algorithm}


\section{Conclusion}
We study, for the first time, bidding games that combine poorman with discrete bidding. 
%short We present a mix of positive and negative results. 
On the negative side, threshold budgets in poorman discrete-bidding games exhibit complex behavior already in simple games, in particular in games with cycles. On the positive side, we identify interesting structure: we prove determinacy, in DAGs, we relate the threshold budgets with continuous ratios, and prove that thresholds are periodic. Additionally, our implementation efficiently computes  exact solutions to non-trivial games. We particularly invite the interested reader to explore bidding games using it, the code will be available on demand.

Our work opens several venues for future work:
%Prior work has predominantly focused on continuous bidding or on Richman discrete-bidding. 
%Poorman discrete-bidding is appealing from both a theoretical and practical standpoint. 

Theoretically, 
we left several open problems and conjectures. Beyond that, 
poorman discrete-bidding is more amendable to extensions when compared with poorman continuous-bidding, which quickly becomes technically challenging, or Richman discrete-bidding, which is a rigid mechanism. For example, it is interesting to introduce into the basic model,  multi-players or complex objectives, e.g., that take into account left over budgets~\cite{HDM12}. 
%short In addition, it is interesting to prove or disprove our conjectures towards gaining a better understanding of the model. 

Practically, poorman is more popular than Richman bidding since it coincides with the popular first-price auction and discrete- is more popular than continuous-bidding since most if not all practical applications employ some granularity constraints on bids. It is interesting to develop applications based on these games. For example, to analyze and develop bidding strategies 
%short with guarantees 
in sequential auctions or fair allocation of goods~\cite{BEF22}. 
%short A step beyond solving a game is {\em mechanism design}: develop the arena on which the game is played so as to guarantee a desirable outcome of the game~\cite{MM+22}. 
Further, it is interesting to study {\em mechanism design}: synthesize an arena so that the game has guarantees (e.g.,~\cite{MM+22}). 


\acknowledgements{This research was supported in part by ISF grant no. 1679/21, ERC CoG 863818 (FoRM-SMArt) and the European Union’s Horizon 2020 research and innovation programme under the Marie Skłodowska-Curie Grant Agreement No. 665385.}







%% The file named.bst is a bibliography style file for BibTeX 0.99c
%\bibliographystyle{ecai}
\bibliography{ga}

%\bibliography{ijcai23}

%\cleardoublepage
%\appendix
%\input{appendix}

\end{document}

