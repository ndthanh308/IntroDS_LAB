\section{Proof of Theorem \ref{thm:grid}}


\begin{proof}[Proof of Theorem \ref{thm:grid}]
Let $f^*$ be $G$-Lipschitz. First, we observe that the distance between two consecutive $x_i$'s is $1/n$. The domain $[0,1]$ is divided into $n$ intervals of length $1/n$. We again denote $x_0=0$ for notational convenience. Our goal is to analyze the population $L_p$ loss of min-norm interpolating solution $\hat{f}_S(x)$ defined in \eqref{eq:main_problem}. 
\begin{align}
  \mathcal{L}_p(\hat{f}_S) &= \Exp_{(x,y)\sim \dist} \left[ | \hat{f}_S(x)- y|^p\right] \nonumber\\  
  &= \Exp_{x\sim \unif([0,1]),\eps} \left[ |\hat{f}_{S}(x)-f^*(x)+\eps|^p\right] \nonumber\\
  & \leq 2^{p-1} \Exp_{x\sim \unif([0,1]),\eps} \left[ |\hat{f}_S(x)-f^*(x)|^p+|\eps|^p\right] \nonumber\\
  &= 2^{p-1} \left( 
  \Exp_{x\sim \unif([0,1])} \left[ |\hat{f}_S(x)-f^*(x)|^p \right]
  + \Exp_{\eps} \left[ |\eps|^p\right] \right) \nonumber\\
  &= 2^{p-1} ( \mathcal{R}_p(\hat{f}_S)+ \mathcal{L}_p(f^*) ) \label{eq:L_p-R_p-grid}
\end{align}
Therefore, it suffices to bound $\mathcal{R}_p(\hat{f}_S)$. It can be expressed as the following.
\begin{equation}\label{eq:R_p-expansion-grid}
    \mathcal{R}_p(\hat{f}_S)=\sum_{i=0}^{n-1} \left( \underbrace{\int_{x_i}^{x_{i+1}} |\hat{f}(x)-f^*(x)| \, dx}_{:=R_i} \,  \right)
\end{equation}
For $x\in [0,x_2]$, $\hat{f}_S(x)=g_1(x)$ by Lemma \ref{lem:complete-description-property-main_text}. Thus we have
\begin{align}
        |\hat{f}_S(x)-f^*(x)| =& |g_1(x)-f^*(x)| \nonumber\\
     =&\left| y_{1}+ \frac{(y_{2}-y_{1})}{x_{2}-x_{1}} (x-x_{1})-f^*(x)\right| \nonumber\\
     =& \left| f^*(x_{1})+\eps_{1} + \left(\frac{f^*(x_{2})+\eps_{2}-f^*(x_{1})-\eps_{1}}{x_{2}-x_{1}}\right)(x-x_{1}) -f^*(x)\right| \nonumber \\
     \leq & \left| f^*(x_{1}) -f^*(x)\right|+ |\eps_{1}|+ \frac{G |x_{2}-x_{1}|+|\eps_{2}-\eps_{1}|}{x_{2}-x_{1}}   |x-x_{1}| \nonumber \\
    \leq &  G|x-x_{1}| + |\eps_{1}|+ \left( \frac{G(x_{2}-x_{1})+|\eps_{2}|+|\eps_{1}|}{x_{2}-x_{1}} \right)  |x-x_{1}| \nonumber \\
    \leq & G \cdot \frac{1}{n} + |\eps_{1}|+ \left( \frac{G \cdot \frac{1}{n} +|\eps_{2}|+|\eps_{1}|}{\frac{1}{n}} \right) \cdot \frac{1}{n}\nonumber\\
    = & \frac{2G}{n} + |\eps_{2}| +2 |\eps_{1}|. \nonumber
\end{align}
Using this we get,
\begin{align}
    R_0+R_1 & \leq \int_{0}^{x_2} \hspace{-2mm}|\hat{f}_S(x)-f^*(x)|^p \, dx \leq \frac{2}{n} \left( \frac{2G}{n} + |\eps_{2}| +2 |\eps_{1}| \right)^p \nonumber\\
    & \leq 3^p\left( \left(\frac{2G}{n}\right)^p + |\eps_{2}|^p+ 2^p |\eps_{1}|^p\right)\cdot \frac{2}{n}. \label{eq:R_0+R_1-grid}
\end{align}
Using exactly the same steps, one can also bound the risk in the last interval $[x_{n-1},x_n]$.
\begin{align}
    R_{n-1} & \leq \int_{x_{n-1}}^{x_n=1} \hspace{-2mm}|\hat{f}_S(x)-f^*(x)|^p \, dx 
    \leq 3^p\left( \left(\frac{2G}{n}\right)^p + |\eps_{n-1}|^p+ 2^p |\eps_{n}|^p\right)\cdot \frac{1}{n}. \label{eq:R_n-grid}
\end{align}
Fix any $i\in \{2,\dots,n-2\}$, and consider $x\in [x_{i},x_{i+1}]$. By Lemma \ref{lem:bound on |f^-f*|}, we get:
\[
 |\hat{f}(x)-f^*(x)| \leq \max\left\{ |g_i(x)-f^*(x)|, \min\{|g_{i+1}(x)-f^*(x)|, |g_{i-1}(x)-f^*(x)|\}\right\}~,
 \]
 We can simplify each one by one.
\begin{align*}
 |g_i(x)-f^*(x)|=&\left| y_{i}+ \frac{(y_{i+1}-y_{i})}{x_{i+1}-x_{i}} (x-x_{i})-f^*(x)\right|\\
 =& \left| f^*(x_{i})+\eps_{i} + \frac{f^*(x_{i+1})+\eps_{i+1}-f^*(x_{i})-\eps_{i}}{x_{i+1}-x_{i}}(x-x_{i}) -f^*(x)\right| \\
 \leq & \left| f^*(x_{i}) -f^*(x)\right|+ |\eps_{i}|+ \left( \frac{G/n+|\eps_{i+1}|+|\eps_{i}|}{1/n} \right)\cdot  \left| (x-x_{i-1}) \right| \\
 \leq & \frac{G}{n}+ |\eps_{i}|+ \left( \frac{G/n+|\eps_{i+1}|+|\eps_{i}|}{1/n} \right) \cdot \frac{1}{n} \\
 = &\frac{2G}{n}+ 2 |\eps_i|+ |\eps_{i+1}|.
\end{align*}
Similarly,
\begin{align*}
 |g_{i-1}(x)-f^*(x)|=&\left| y_{i}+ \frac{(y_{i}-y_{i-1})}{x_{i}-x_{i-1}} (x-x_{i})-f^*(x)\right|\\
 =& \left| f^*(x_{i})+\eps_{i} + \frac{f^*(x_{i})+\eps_{i}-f^*(x_{i-1})-\eps_{i-1}}{x_{i}-x_{i-1}}(x-x_{i}) -f^*(x)\right| \\
 \leq & \left| f^*(x_{i}) -f^*(x)\right|+ |\eps_{i}|+ \left( \frac{G/n+|\eps_{i}|+|\eps_{i-1}|}{1/n} \right) \left| (x-x_{i}) \right| \\
 \leq & \frac{G}{n}+ |\eps_{i}|+ \left( \frac{G/n+ |\eps_{i}|+|\eps_{i-1}|}{1/n} \right)\cdot \frac{1}{n} \\
 = &\frac{2G}{n}+ 2|\eps_{i}|+|\eps_{i-1}|.
\end{align*}

Using a similar strategy, we also bound:
\begin{align*}
 |g_{i+1}(x)-f^*(x)|=&\left| y_{i+1}+ \frac{(y_{i+2}-y_{i+1})}{x_{i+2}-x_{i+1}} (x-x_{i+1})-f^*(x)\right|\\
 =& \left| f^*(x_{i+1})+\eps_{i+1} + \frac{f^*(x_{i+2})+\eps_{i+2}-f^*(x_{i+1})-\eps_{i+1}}{x_{i+2}-x_{i+1}}(x-x_{i+1}) -f^*(x)\right| \\
 \leq & \left| f^*(x_{i+1}) -f^*(x)\right|+ |\eps_{i+1}|+ \left( \frac{G/n+|\eps_{i+2}|+|\eps_{i+1}|}{1/n} \right) \left| (x-x_{i+1}) \right| \\
 \leq & \frac{G}{n}+ |\eps_{i+1}|+ \left( \frac{G/n+|\eps_{i+2}|+|\eps_{i+1}|}{1/n} \right) \cdot \frac{1}{n}\\
 = &\frac{2G}{n}+ 2|\eps_{i+1}|+|\eps_{i+2}|.
\end{align*}
Therefore, combining the above three, for $x$ in the intermediate intervals:
\begin{align*}
    |\hat{f}(x)-f^*(x)| &\leq \max\left\{\frac{2G}{n}+2|\eps_{i}|+|\eps_{i+1}|, \frac{2G}{n}+2|\eps_{i}|+|\eps_{i-1}|,\frac{2G}{n}+2|\eps_{i+1}|+|\eps_{i+2}|\right\} \\
    & \leq \frac{2G}{n}+2|\eps_i|+2|\eps_{i+1}|+|\eps_{i+2}|+|\eps_{i-1}|~.
\end{align*}

Therefore, for any $i \in \{2,\dots,n-2\}$, and $x\in [x_i, x_{i+1}]$,
$$ |\hat{f}(x)-f^*(x)|^p \leq 5^p \left( \left(\frac{2G}{n} \right)^p+2^p |\eps_i|^p+2^p |\eps_{i+1}|^p+|\eps_{i+2}|^p+|\eps_{i-1}|^p \right)$$
Therefore,
$$R_i = \int_{x_i}^{x_{i+1}} |\hat{f}(x)-f^*(x)|^p \, dx \, \leq 5^p \left( \left(\frac{2G}{n} \right)^p+2^p |\eps_i|^p+2^p |\eps_{i+1}|^p+|\eps_{i+2}|^p+|\eps_{i-1}|^p \right) \frac{1}{n}.$$
We now sum over all $i \in \{0,2,\dots,n-1\}$ and use \eqref{eq:R_0+R_1-grid} and \eqref{eq:R_n-grid}:
\begin{align}
   \mathcal{R}_p(\hat{f}_S) =\sum_{i=0}^{n-1} R_i & \leq \sum_{i=2}^{n-2} \left[5^p \left( \left(\frac{2G}{n} \right)^p+2^p |\eps_i|^p+2^p |\eps_{i+1}|^p+|\eps_{i+2}|^p+|\eps_{i-1}|^p \right)\frac{1}{n} \right] \nonumber\\
    &\hspace{2mm} + 3^p\left( \left(\frac{2G}{n}\right)^p + |\eps_{2}|^p+ 2^p |\eps_{1}|^p\right)\cdot \frac{2}{n}+ 3^p\left( \left(\frac{2G}{n}\right)^p + |\eps_{n-1}|^p+ 2^p |\eps_{n}|^p\right)\cdot \frac{1}{n} \nonumber \\
    & \leq \frac{(5^p+2 \cdot 3^p+3^p) (2G)^p}{n^p}+ \frac{2 \cdot 3^p |\eps_2|^p+2 \cdot 6^p |\eps_1|^{p} + 3^{p} |\eps_{n-1}|^p+6^p|\eps_n|^p}{n}\nonumber\\
    & \hspace{2mm}+\frac{1}{n} \sum_{i=2}^{n-2} (10^p|\eps_i|^p+10^p |\eps_{i+1}|^p+ 5^p |\eps_{i+2}|^p+ 5^p|\eps_{i-1}|^p ) \nonumber\\
    & \leq \frac{(5^p+3^{p+1}) (2G)^p}{n^p}+ \frac{2 \cdot (10^p+5^p)}{n} \cdot \sum_{i=1}^{n}  |\eps_i|^p \label{eq:all-but-three-grid}
\end{align}
The first term converges to $0$ surely as $n \rightarrow \infty$. The second term is proportional to the average of $n$ i.i.d. random variables $|\eps_i|^p$, each having $\Exp[|\eps_i|^p]=\mathcal{L}_p(f^*)$. Therefore, by the strong LLN
$$ \frac{1}{n} \sum_{i=1}^{n} |\eps_i|^p \xrightarrow{a.s.} \mathcal{L}_p(f^*).$$
Combining this with \eqref{eq:all-but-three-grid}:
$$ \lim_{n\rightarrow \infty} \Pr_S \left[ \mathcal{R}_p(\hat{f}_S) \leq (2 \cdot 10^p + 2 \cdot 5^p+1) \, \mathcal{L}_p(f^*) \right]=1.$$
Finally, substituting the bound from \eqref{eq:L_p-R_p-grid} in the above:
$$ \lim_{n\rightarrow \infty} \Pr_S \left[ \mathcal{L}_p(\hat{f}_S) \leq (20^p +10^p+ 2^p) \, \mathcal{L}_p(f^*) \right]=1.$$
Letting $ C_p = 20^p +10^p+ 2^p$, we get the desired theorem. 
\end{proof}
