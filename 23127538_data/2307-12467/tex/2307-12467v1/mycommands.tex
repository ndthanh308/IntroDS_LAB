\usepackage{pgffor}
\makeatletter
\def\dif{\@ifnextchar[{\@with}{\@without}}
\def\@with[#1]#2{
  \ensuremath{\frac{\foreach \x in {#2}{\mathrm{d}\x\,}}{\foreach \x in {#1}{\mathrm{d}\x\,}}}
}
\def\@without#1{
  \ensuremath{%
    \ifx\hfuzz#1\hfuzz
    \mathrm{d}
    \else
    \foreach \x in {#1}{\mathrm{d}\x\,}
    \fi
    }
}
\makeatother
%\newcommand{\dd}{\ensuremath{\mathrm{d}}}
%\newcommand{\ddd}[2]{\ensuremath{\frac{\mathrm{d} #1}{\mathrm{d} #2}}}

% units
\newcommand{\unit}[1]{\ensuremath{\,\mathrm{#1}}}
\newcommand{\erg}{\ensuremath{\mathrm{erg}}}
\newcommand{\ergs}{\ensuremath{\mathrm{erg\,s^{-1}}}}
\newcommand{\ergscm}{\ensuremath{\mathrm{erg\,s^{-1}\,cm^{-2}}}}

% equations
\newcommand{\be}{\begin{equation}}
\newcommand{\ee}{\end{equation}}
\newcommand{\ba}{\begin{eqnarray}}
\newcommand{\ea}{\end{eqnarray}}
\newcommand{\ds}{\displaystyle}

% vectors
\newcommand{\ort}[1]{\ensuremath{\bm{\hat #1}}}
\newcommand{\bp}{\ensuremath{\bm{p}}}
\newcommand{\br}{\ensuremath{\bm{r}}}
\newcommand{\bn}{\ensuremath{\bm{n}}}
\newcommand{\bb}{\ensuremath{\bm{\beta}_\textsc{k}}}
% additional letters
\newcommand{\upi}{\uppi}
\newcommand{\Db}{\ensuremath{{\cal D}}}
\newcommand{\ve}{\ensuremath{\varepsilon}}
\newcommand{\vk}{\ensuremath{\varkappa}}
\newcommand{\vp}{\ensuremath{\varphi}}
%\newcommand{\vr}{\ensuremath{\varrho}}
\newcommand{\G}{\ensuremath{\Gamma_\textsc{k}}}
\newcommand{\E}{\ensuremath{\bm{E}}}
\newcommand{\B}{\ensuremath{\bm{B}}}
\newcommand{\de}{\ensuremath{\delta}}
\newcommand{\ep}{\ensuremath{\epsilon}}
%\newcommand{\sun}{\ensuremath{\odot}}

%sub/super-scripts
\newcommand{\mysub}[1]{\ensuremath{_{\mathrm{#1}}}}
\newcommand{\mysup}[1]{\ensuremath{^{\mathrm{#1}}}}
\newcommand{\myboth}[2]{\ensuremath{_{\mathrm{#1}}^{\mathrm{#2}}}}
\newcommand{\myerror}[2][NONE]{%
  \ifthenelse { \equal {#1} {NONE} } %
  {\ensuremath{\pm #2}}%
  {\ensuremath{_{-#1}^{#2}}}%  
}
\newcommand{\plii}{_\textsc{pl\tiny2}}
%\newcommand{\pl}{_\textsc{pl}}
\newcommand{\nt}{_\textsc{nt}}
\newcommand{\obs}{_\textsc{obs}}
\newcommand{\ph}{_\mathrm{ph}}
\newcommand{\syn}{_\textsc{syn}}
\newcommand{\ssc}{_\textsc{ssc}}
\newcommand{\ic}{_\textsc{ic}}
\newcommand{\ad}{_\textsc{ad}}
%\newcommand{\nph}{\ensuremath{{\cal n}_{\rm ph}}}

%notations
\newcommand{\ti}[1]{\ensuremath{\tilde #1}}
\newcommand{\overbar}[1]{\mkern 1.5mu\overline{\mkern-1.5mu#1\mkern-1.5mu}\mkern 1.5mu}

%instruments
\newcommand{\hess}{H.E.S.S.\xspace}
\newcommand{\magic}{MAGIC\xspace}
\newcommand{\swift}{{\itshape Swift}-XRT\xspace}
%objects
\newcommand{\grbMI}{GRB190114C\xspace}
\newcommand{\grbHI}{GRB180728B\xspace}
\newcommand{\grbHII}{GRB190829A\xspace}

% changes and markup
\definecolor{dg}{rgb}{0.0, 0.6, 0.1}
\definecolor{ed}{rgb}{1.0, 0.6, 0.1}
%\newcommand{\Andrew}[1]{\textcolor{dg}{#1}}
\makeatletter
\def\Andrew{\def\xx{dg}\@ifnextchar[{\@mwith}{\@mwithout}}
\def\Mitya{\def\xx{orange}\@ifnextchar[{\@mwith}{\@mwithout}}
\def\Felix{\def\xx{ed}\@ifnextchar[{\@mwith}{\@mwithout}}
\def\@mwith[#1]#2{\textcolor{\xx}{\sout{#1}#2}}
\def\@mwithout#1{\textcolor{\xx}{#1}}
\makeatother

% setup for changes package
% \setlength{\marginparwidth}{45mm} % to fix the problem with comments in changes% to be removed once comments are out
% \definechangesauthor[name={Mitya}, color=orange]{DK}
% \definechangesauthor[name={Yoshi}, color=brown]{YI}
% \definechangesauthor[name={Tomonari}, color=red]{TM}
% \definechangesauthor[name={Andrew}, color=dg]{AT}
% \definechangesauthor[name={Felix}, color=blue]{FA}
% \definechangesauthor[name={Valenti}, color=yellow]{VBR}

% \makeatletter
% % setup of quick command \Yoshi{new text} or \yoshi[old text]{new text}
% \def\Mitya{\def\xx{DK}\@ifnextchar[{\@mwith}{\@mwithout}}
% \def\Andrew{\def\xx{AT}\@ifnextchar[{\@mwith}{\@mwithout}}
% \def\Felix{\def\xx{FA}\@ifnextchar[{\@mwith}{\@mwithout}}
% \def\Valenti{\def\xx{VBR}\@ifnextchar[{\@mwith}{\@mwithout}}
% \def\Yoshi{\def\xx{YI}\@ifnextchar[{\@mwith}{\@mwithout}}
% \def\Tomo{\def\xx{TM}\@ifnextchar[{\@mwith}{\@mwithout}}
% \def\@mwith[#1]#2{\replaced[id=\xx]{#2}{#1}}
% \def\@mwithout#1{\added[id=\xx]{#1}}
% \makeatother


% affiliations
\newcommand{\dias}{{Dublin Institute for Advanced Studies, School of Cosmic Physics, 31 Fitzwilliam Place, Dublin 2, Ireland}}
\newcommand{\mephi}{{National Research Nuclear University (MEPHI), Kashirskoje shosse, 31, Moscow 115409, Russia}}
\newcommand{\mpik}{{Max-Planck-Institut f\"ur Kernphysik, Saupfercheckweg 1, 69117 Heidelberg, Germany}}
\newcommand{\yerevan}{{Yerevan State University, 1 Alek Manukyan St, Yerevan 0025, Armenia}}
%\newcommand{\rikkyo}{{Department of Physics, Rikkyo University, Nishi-Ikebukuro 3-34-1, Toshima-ku, Tokyo 171-8501, Japan}}
\newcommand{\rikkyo}{{Graduate School of Artificial Intelligence and Science, Rikkyo University, Nishi-Ikebukuro 3-34-1, Toshima-ku, Tokyo 171-8501, Japan}}
\newcommand{\riken}{{RIKEN iTHEMS, Hirosawa 2-1, Wako, Saitama 351-0198, Japan}}
\newcommand{\hiroshimaU}{{Hiroshima University, Hiroshima, Japan}}
\newcommand{\UB}{Departament de F\'{i}sica Qu\`antica i Astrof\'{i}sica, Institut de Ci\`encies del Cosmos (ICC),\\ Universitat de Barcelona (IEEC-UB), Mart\'{i} i Franqu\`es 1, E08028 Barcelona, Spain}
\newcommand{\mphti}{{Moscow Institute of Physics and Technology, Institutskiy per. 9, Dolgoprudny 141701, Russia}}
\newcommand{\ipm}{{Keldysh Institute of Applied Mathematics RAN, Miusskaya sq. 4, Moscow 125047, Russia}}
\newcommand{\desy}{{DESY, D-15738 Zeuthen, Germany}}
\newcommand{\inasan}{{INASAN, Ulitsa Pyatnitskaya 48, Moscow, 119017 Russia}}
