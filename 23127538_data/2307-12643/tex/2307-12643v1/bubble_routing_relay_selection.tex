\setlength{\textfloatsep}{4pt}% Remove \textfloatsep
\begin{algorithm}[t]
{

\footnotesize


\SetAlgoCaptionSeparator{:}
\KwIn{A set of nodes $R_u \subset V$ containing all the $u$ neighbours', the ground station $\Psi$ } 
\KwOut{A node $relay$ selected as relay}

\vspace{.2cm}
$R_u(t) \leftarrow \emptyset$\\
\For{$w \in N_u(t)$} {

    %If {$age(w) \leq \gamma $ \textbf{and} $||p_u(t) - p_w(t)|| < \sigma$ \textbf{and} $u \in S \cup A \rightarrow w \notin W$} {
    \If {$age(w) \leq \gamma $} {
       $R_u(t) \leftarrow R_u(t) \cup w$\\
        }
   
    }
$relay \leftarrow \emptyset$\\
$max \leftarrow 0$\\


\For{$w \in R_u(t)$} {

    $adv \leftarrow p_w(t).z - p_u(t).z$

    \If {$adv > max$} {
        $relay \leftarrow \{w\}$\\
    } 
    \Else {\If{$adv == max$}{
        $relay \leftarrow relay \cup \{w\}$\\
    }}
}
\If{$|relay| > 1$} {
    \textbf{return} $ \argmax_{w \in relay} ||p_\Psi - p_w(t + \Delta t)||$

}

\textbf{return} $relay$
}
\caption{Bubble Routing Relay Selection}
\label{algo:main}
\end{algorithm} 