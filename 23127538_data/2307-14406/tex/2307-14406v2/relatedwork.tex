\section{Related Work}
\label{sec:relatedWork}

\subsection{Code Snippet}
Several studies have focused on identifying various information from code snippets. \cite{subramanian2013making} performed static analysis on code snippets from accepted answers in Stack Overflow to understand that the structural information could be obtained from code snippets, and they used such information to effectively identify API usage in snippets. Their code snippet analysis approach could dramatically improve the accuracy of identifying structural relationships from code snippets compared to lexical approaches. \cite{chatterjee2017what} conducted an exploratory study to extract what kinds of information associated with code snippets are available in various software-related documents, including blog posts, API documentation, code reviews, and public chats. Their results revealed the characteristics of the code snippets embedded in different document types, the kinds of information contained in code snippets, and what cues can indicate code snippet related information. \cite{panichella2012mining} mined code snippet descriptions from developer communities such as mailing lists and bug reports. They used such information to propose an approach which could automatically extract method descriptions in developers' communications in order to help developers understand the code. The method descriptions extracted by their approach reached a high precision. 

Many studies have focused on tools related to code snippets. \cite{galenson2014codehint} presented an efficient tool called CodeHint to help synthesize code snippets that use real-world Java features, and their results show that the algorithms of CodeHint could significantly improve developers' productivity. \cite{wong2013autocomment} mined question and answer platforms like Stack Overflow which contain code descriptions written by developers to propose AutoComment tool, which could automatically generate code snippet comments. They applied Natural Language Processing (NLP) techniques in this code-description generation tool to analyze sentence semantics, and many practitioners thought that the generated comments by the tool were accurate, adequate, concise, and useful in helping them understand the related code. \cite{campbell2017nlp2code} proposed a tool called NLP2Code integrated in Eclipse IDE which has a content assist feature for code snippets. NLP2Code could recommend relevant code snippets on Stack Overflow based on the natural language typed by the developers, thus saving developers' time of searching the Web for the required code snippets.

% Several studies have focused on identifying various information from code snippets. \cite{subramanian2013making} performed static analysis on source code snippets from accepted answers in Stack Overflow to understand the structural information could be obtained from code snippets, and they used such information to effectively identify API usage in snippets. Their snippet analysis approach could dramatically improve accuracy of identifying structural relationships from snippets compared to lexical approaches in practice. \cite{chatterjee2017what} conducted an exploratory study to extract what kinds of information associated with code snippets are available in various software-related documents, including blog posts, API documentation, code reviews, and public chats. Their results revealed the characteristics of the code snippets embedded in different document types, the kinds of information contained in code snippets, and the cues indicate code snippet related information. \cite{panichella2012mining} mined code snippet descriptions from developer communities such as mailing lists and bug reports. They used such information to propose an approach which could automatically extract method descriptions in developers' communications in order to help developers understand the code. The method descriptions extracted by their approach reached high precision. 

Compared to the existing work related to code snippets discussed above, our work tends to focus on the practice of code snippets in code reviews by investigating the extent of using code snippets, the purposes of providing code snippets, and how developers treat code snippet suggestions in code reviews.


\subsection{Code Review}
Code review is a mature practice and essential part in modern software development. In recent years, many studies have explored the modern code review process in practice. Some studies chose to investigate code review process based on pull requests. \cite{zampetti2019study} investigated how developers use the outcome of Continuous Integration (CI) builds during modern code review based on the discussion of pull requests. Their results show that while pull requests with passed builds have slightly more chances of being merged than when builds are broken, other process-related factors have a stronger correlation with such a merger. \cite{wessel2020what} explored why open source maintainers integrate code review bots into the pull request workflow and how they perceive the changes these bots induce. They found that the most frequently mentioned motivations for using bots include automating repetitive tasks, improving tools' feedback, and reducing maintenance effort. Some studies chose to use code review tools to investigate code reviews. \cite{mcintosh2016empirical} mined Gerrit review database to study the relationships between post-release defects and modern code review. They found that code review coverage, participation, and expertise have a clear link with software quality, and their results empirically confirm the intuition that code which has not been well reviewed has a negative impact on software quality in large system development.

% Some studies have focused on code reviewer recommendation. \cite{rahman2016correct} proposed a novel code reviewer recommendation technique, CoRReCT, which estimates code review expertise of a developer for a pull request by analyzing the developer's past work experience with external software libraries and specialized technologies used by the pull request. \cite{yu2016reviewer} investigated whether and how previous approaches used in code review can be adapted to recommending reviewers for pull-requests. Their results show that significant improvements can be achieved with recommendation based on mixed approaches compared to either method alone. \cite{thongtanunam2015who} proposed RevFinder, a file location-based code reviewer recommendation approach. They found that RevFinder accurately recommended 79\% of reviewers with a top 10 recommendation through an empirical evaluation on projects from various communities (e.g., OpenStack and Qt). Some studies have focused on information needs in code review process.
\cite{pascarella2018information} gathered reliable data from three large open-source software projects on reviewers' information needs. Based on their results, they found that the most important needs in code reviews are the needs to know whether a proposed alternative solution is valid and whether the understanding of the reviewer about the code under review is correct. \cite{ko2007information} analyzed software developersâ€™ day-to-day information needs in collocated software development teams. Their results show that the most often deferred searches included knowledge about design and program behavior (e.g., why code was written a particular way and what a program was supposed to do). \cite{sutherland2009can} performed an investigation of the code review practices of software product teams at Microsoft to better understand the nature of the code review dialog and exchange of information, how the information was retained, and the nature of its later reuse. Their results reveal that code reviews in collocated development environments such as Microsoft use a mix of face-to-face and electronic communication. 

\cite{hirao2020code} studied patches with divergent review scores in the OpenStack and Qt communities. Their results suggest that review tooling should integrate with release schedules and detect concurrent development of similar patches to optimize review discussions with divergent scores. \cite{cunha2007does} investigated if there is a specific personality type that is correlated with performance on a code-review task. They suggested that software companies should capitalize on the strengths of their employees who can better perform code review tasks than others and consider employees perhaps previously overlooked for particular code review tasks.

Several studies have focused on investigating a variety of artifacts in code review process. \cite{zanaty2018empirical} studied the frequency and nature of design discussions in code reviews to better understand to what extent design is discussed during code review. Their manual analysis indicates that though design-related discussions are still rare during code review process, design related comments are constructive and can provide suggestions to mitigate design issues. \cite{fu2022potential} conducted an exploratory study in an attempt to understand the nature of Potential Technical Debt (PTD) in code reviews. Their findings indicate that review-based detection of PTD is one of the trustworthy mechanisms in development. \cite{kashiwa2022empirical} conducted a study aiming to understand the effect of Self-Admitted Technical Debt (SATD) comments on accepting and revising patch-sets and the practice of introducing SATD in code reviews. Their results show that 28\textasciitilde48\% of SATD comments are introduced during MCRs. \cite{han2021understanding} conducted an empirical study to investigate the concept behind code smells identified in code reviews and what actions reviewers suggest and developers take in response to the identified smells, and they found that the majority of smell-related suggestions were accepted by developers.


% Several studies have focused on investigating a variety of artifacts in code review process. \cite{zanaty2018empirical} studied the frequency and nature of design discussions in code reviews to better understand to what extent design is discussed during code review. They performed an empirical study in the OpenStack Neutron and Nova projects, and their manual analysis indicates that though design-related discussions is still rare during code review process, design related comments are constructive and can provide suggestions to mitigate design issues. \cite{fu2022potential} conducted an exploratory study in an attempt to understand the nature of potential technical debt (PTD) in code reviews and and track down the resolution of PTD after being identified. Their findings indicate that detecting PTD in code review process is one of the trustworthy mechanisms in development. \cite{wang2021understanding} identified seven intentions behind link sharing in code reviews through a quantitative study of the OpenStack and Qt projects, in which providing context and elaborating are the most common intentions. Based on the findings and the developer survey of their work, they encourage patch authors to provide clear context and explore both internal and external resources in code reviews.

% \cite{nanthaamornphong2016empirical} examined review comments that identified code smells in OSS projects, and the preliminary results of their study show that code reviewers comment on only a small number of code smells. \cite{han2021understanding} conducted an empirical study to investigate the concept behind code smells identified in code reviews and what actions reviewers suggest and developers take in response to the identified smells, and they found that the majority of smell-related suggestions were accepted by developers. They extended their work in \cite{han2022code}, and they further found that most reviewers provide constructive suggestions to help developers fix the code and developers are willing to fix the smells through suggested refactoring operations when code smells are identified in code reviews. 

% \cite{fu2022potential} conducted an exploratory study in an attempt to understand the nature of potential technical debt (PTD) in code reviews and and track down the resolution of PTD after being identified. Their findings indicate that detecting PTD in code review process is one of the trustworthy mechanisms in development. \cite{wang2021understanding} identified seven intentions behind link sharing in code reviews through a quantitative study of the OpenStack and Qt projects, in which providing context and elaborating are the most common intentions. Based on the findings and the developer survey of their work, they encourage patch authors to provide clear context and explore both internal and external resources in code reviews.

Different from the aforementioned works, our work intends to study the distribution, purposes, and acceptance of code snippets in code reviews by manually extracting code snippet related comments from the most active projects of the OpenStack and Qt communities, and the scenarios in which reviewers provide code snippets, the developers' attitudes towards code snippets, and the characteristics of code snippets developers expect reviewers to provide in code reviews from an industrial survey.


% \subsection{Modern code review in practice}
% \subsection{Code snippets shared in software development}
% \subsection{Software artifacts in code reviews}
% \subsection{Information delivered through code snippets}

