\usepackage[utf8]{inputenc}
\usepackage[english]{babel}

%----KERNING AND SPACING-----
\usepackage{microtype} %For better kerning and symbol-stretching
\usepackage{xspace} %For the \xspace command

%----LOADING RELEVANT FONTS [Times Roman] -----
%\usepackage[scosf]{newtxtext}  % (option toggles small-caps-old-style-figures)
%\usepackage[cmintegrals,bigdelims]{newtxmath} % (options toggle cm-like integral signs)
\usepackage{txfonts}  %Times Roman fonts
\usepackage{txfontsb} %Addition for txfonts, including old style numerals and greek

\newcommand\bmmax{1}
\newcommand{\hmmax}{0}
\usepackage{bm} %Bold math symbols with \bm{} (Greek and other symbols)

%-----COLOR AND GRAPHICS PACKAGES-----
\usepackage{xcolor}
\usepackage[]{graphicx} % "demo" option to disable rendering for speed
\graphicspath{{figs/}}

%-----TABLES AND TABULAR-----
\usepackage[]{booktabs}
\usepackage{array}
\usepackage{layouts}
\usepackage{multirow}

%-----LISTS-----
\usepackage{enumerate}
\usepackage[inline]{enumitem}

%-----EXTERNAL DOCUMENT FOR CROSS-REFERENCING-----
\usepackage{xr}
\makeatletter
\newcommand*{\addFileDependency}[1]{% argument=file name and extension
  \typeout{(#1)}% latexmk will find this if $recorder=0 (however, in that case, it will ignore #1 if it is a .aux or .pdf file etc and it exists! if it doesn't exist, it will appear in the list of dependents regardless)
  \@addtofilelist{#1}% if you want it to appear in \listfiles, not really necessary and latexmk doesn't use this
  \IfFileExists{#1}{}{\typeout{No file #1.}}% latexmk will find this message if #1 doesn't exist (yet)
}
\makeatother

\newcommand*{\myexternaldocument}[1]{%
    \externaldocument{#1}%
    \addFileDependency{#1.tex}%
    \addFileDependency{#1.aux}%
}

%-----SETTINGS FOR REFERENCES-----
\usepackage{hyperref}
\hypersetup{colorlinks,
	linkcolor={blue!75!black!80!yellow},
	citecolor={blue!75!black!80!yellow},
	urlcolor={blue!75!black!80!yellow}
}

%-----HYPHENATION (manual entries)-----
\hyphenation{}

%-----REFERENCING VIA CLEVEREF-----
\usepackage[capitalize,nameinlink]{cleveref}
\newcommand{\crefrangeconjunction}{\,--\,}
\crefname{subequations}{Eqs.}{Eqs.} %Specific changes to allow for Eqs.-wording when referring to a set of subequations. Label of subequations must include [subequations] as an option.
\Crefname{subequations}{Eqs.}{Eqs.}
\crefformat{subequations}{#2Eqs.~(#1)#3}
\Crefformat{subequations}{#2Eqs.~(#1)#3}
\crefname{page}{p.}{p.} %Changing from 'page' to 'p.'

%-----PACKAGE TO ALLOW A \FloatBarrier TO FORCE EXECUTION OF FLOATS-----
\usepackage{placeins}

%-----SI UNITS-----
\usepackage{siunitx}
\sisetup{range-phrase =\text{\,--\,},
	list-units   =single,
	range-units  =single,
	list-pair-separator = {\ \text{and}\ },
	list-separator = {,\ \linebreak[0]},
	list-final-separator = {,\ \linebreak[0]\text{and}\ },
    group-separator = {\,},
    detect-all = true
}
\DeclareSIUnit[number-unit-product = ]\percent{\char`\%} % remove spacing for \percent

%-----MARGINS-----
\usepackage[centering,hmargin=16mm,tmargin=30mm,bmargin=26mm]{geometry}

%-----MISC-----
%LaTeX stretches the space between binary operators (+,-,\times, etc)/binary relations (=,\sim,\simeq, etc) and symbols too much (inline) - this restricts it. See /tex.stackexchange.com/a/58487/113831.
\thickmuskip=5mu plus 2mu minus 1mu  %binary relations (default, 5mu plus 5mu)
\medmuskip=4mu plus 2mu minus 2mu    %binary operations (default, 4mu plus 2mu minus 4mu)

%Various comments to indicate edits to the text
\usepackage{soul}
\newcommand{\strike}[1]{\textcolor{red!50!black}{\st{#1}}}
\newcommand{\fix}[1]{\textcolor{red!50!yellow!50!black}{#1}}
\frenchspacing %Ensure that revTeX does not do "double spaces" after punctuation

%-----COMMENTS AND META-ANNOTATIONS-----
\usepackage{textcomp} % for \textrightarrow
\usepackage{xifthen}
\usepackage{etoolbox}
\newboolean{togglecomments}
\newboolean{toggletodos}
\newboolean{togglechanges}

% toggle to true to see comments/todos (otherwise hidden)
\setboolean{togglecomments}{true}
\setboolean{toggletodos}{true}
% toggle to false to see mixed versions (otherwise edits are shown exclusively)
\setboolean{togglechanges}{false} 

\newcommand{\textblacksquare}{$\blacksquare$}
%\newcommand{\todo}[1]{\ifbool{toggletodos}%
	%{\textcolor{green!60!black}{\small\textsf{{}\textsuperscript{\textsc{\textsf{todo}}}}[\ignorespaces#1]}} % if true, show comments
%	{}}     % if false, do nothing
%\newcommand{\comment}[2]{\ifbool{togglecomments}%
%		{\textcolor{blue!70!black}{\small\sf\textsuperscript{\textsc{\textsf{#1}}}[\ignorespaces#2]}} % if true, show comments
%		{}}     % if false, do nothing
\newcommand{\swap}[2]{\ifbool{togglechanges}
	{#2}  % revisions-only version
	{\textcolor{red!70!black}{[#1]}\textrightarrow{}\textcolor{green!50!black}{[\ignorespaces#2]}}}
\newcommand{\remove}[1]{\ifbool{togglechanges}
	{}    % revisions-only version
	{\textcolor{red!70!black}{\ignorespaces#1}}}
\newcommand{\inset}[1]{\ifbool{togglechanges}
	{#1}  % revisions-only version
	{\textcolor{green!50!black}{#1}}}
\newcommand{\citeremind}[1]{%
	[\textcolor{blue!75!black!80!yellow}{\textblacksquare%
		\ifthenelse{\isempty{#1}}{}{\textsuperscript{\tiny\textsf{\ignorespaces#1}}}%
	}]\xspace}
\newcommand{\fixme}[1]{\textcolor{red!70!black}{[\ignorespaces#1]}}
%\newcommand{\optional}[1]{\textcolor{orange!70!gray}{\ignorespaces#1}}

%-----COMMANDS-----
\input{commands.tex}

\makeatletter
\newcommand{\raisemath}[1]{\mathpalette{\raisem@th{#1}}}
\newcommand{\raisem@th}[3]{\raisebox{#1}{$#2#3$}}
\makeatother


%spacing before \paragraph calls (see e.g. https://tex.stackexchange.com/a/108824/113831)
\renewcommand{\paragraph}[1]{\vskip 1ex\noindent\textbf{#1.}~}

%----- SANS SERIF CAPTIONS -----
\usepackage[eulergreek]{sansmath}
\makeatletter
\renewcommand\@make@capt@title[2]{%
    \@ifx@empty\float@link{\@firstofone}{\expandafter\href\expandafter{\float@link}}%
    \sansmath\sffamily\textbf{#1\@caption@fignum@sep}#2 % does not work with the newtx* packages unfortunately
}%
\renewcommand\figurename{Figure}
\makeatother

%\sffamily\textbf{#1\@caption@fignum@sep}#2
%\sffamily{\textbf{#1}}\@caption@fignum@sep#2
%\sansmath\sffamily\textbf{#1\@caption@fignum@sep}#2