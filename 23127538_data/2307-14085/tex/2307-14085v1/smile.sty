%-----------------------------------------------------------------%
%
% The latex macro



%-----------------------------------------------------------------%
\usepackage{dirtytalk}
\RequirePackage{amsmath}
\RequirePackage{amssymb}
\RequirePackage{amsthm}
\RequirePackage{bm}
\RequirePackage{url}
\RequirePackage{multirow}
\RequirePackage{natbib}
\RequirePackage{graphicx}
\RequirePackage{subfigure}
\RequirePackage{makecell}
\RequirePackage{booktabs}
\usepackage{array}
\usepackage{url}
\usepackage{algorithm}
% \usepackage{algorithmic}
\usepackage{algpseudocode}
\usepackage{dsfont}
\usepackage{mathtools}
\usepackage{enumitem}
\usepackage{tablefootnote}
\usepackage{optidef}

%----------my own features------------------%
\newcommand{\RNum}[1]{\uppercase\expandafter{\romannumeral #1\relax}}
\newcommand{\nend}{\nonumber\\}
\newcommand{\floor}[2][ ]{{#1\lfloor #2 #1\rfloor}}
\newcommand{\ceil}[2][ ]{{#1\lceil #2 #1\rceil}}
\newcommand{\todo}[1]{{\color{red}  [\text{TODO:} #1]}}

\DeclarePairedDelimiterX{\infdivx}[2]{(}{)}{%
  #1\;\delimsize\|\;#2%
}
\DeclareMathOperator{\poly}{poly}
\DeclareMathOperator{\polylog}{polylog}
\DeclareMathOperator{\UCB}{UCB}
\DeclareMathOperator{\Reg}{Reg}
\DeclareMathOperator{\Vol}{Vol}
\DeclareMathOperator{\Int}{Int}
\DeclareMathOperator{\defeq}{\vcentcolon=}
\DeclareMathOperator{\eqdef}{=\vcentcolon}
\newcommand{\st}{\mbox{s.t.} }
\def\qqquad{\hskip3em\relax}
\newcommand{\midhash}{\raisebox{\depth}{\#}}
% -------- New Packages -------- %
%\usepackage{enumitem}

%------ kpfonts -------%
%\usepackage{kpfonts}

%------- some other packages -------%
%\usepackage{enumerate}
% \usepackage[OT1]{fontenc}
% \usepackage{natbib}
% \usepackage[usenames]{color}
%\usepackage[dvips]{graphicx}

% \usepackage[protrusion=true, expansion=true, tracking=true, spacing=true, final, babel]{microtype}
% \usepackage{makecell}
\usepackage{hyperref}
\hypersetup{colorlinks,
linkcolor=red,
anchorcolor=blue,
citecolor=blue}

% \usepackage{refcheck}
\usepackage{mathrsfs}
\usepackage{fullpage}
% \usepackage{hyperref}
\usepackage{cleveref}

%--------- new defs --------%



\def\lip{{\rm Lip}}
\def\softmax{\mathop{\mathrm{softmax}}}
\def\TV{{\mathop{\mathrm{TV}}}}
\def\supp{\mathop{\mathrm{supp}}}
\def\card{\mathop{\mathrm{card}}}
\def\rank{\mathrm{rank}}
\long\def\comment#1{}
\def\skeptic{{\sc skeptic}}
\def\NPN{\bPiox{\it NPN}}
\def\vec{\mathop{\mathrm{vec}}}
\def\dr{\displaystyle \rm}
\def\ts{\textstyle}
\def\skeptic{{\sc skeptic}}
\providecommand{\bnorm}[1]{\Big\vvvert#1\Big\vvvert}
\DeclarePairedDelimiterX{\norm}[1]{\|}{\|}{#1}
\def \txb {\overbar{\xb}}
\def \tx {\overbar{x}}
\def\td{{\mathrm{TD}}}

\def\bess{\bes\small }
\def\Shat{{\widehat S}}
\def\lam{\rho}
\def\real{{\mathbb{R}}}
\def\R{{\real}}
\def\Ti{T_{\rm init}}
\def\Tm{T_{\rm main}}
\def\bcdot{{\bm \cdot}}
\newcommand{\red}{\color{red}}
\newcommand{\blue}{\color{blue}}
\newcommand{\la}{\langle}
\newcommand{\ra}{\rangle}
\newcommand{\cIs}{\cI_{\hat{s}}}
\def \hbeta {\widehat{\beta}}
\def\msbe{\text{MSBE}}
\def\mspbe{\text{MSPBE}}
\def\Div{\mathop{\mathrm{div}}}
\def\ID{\mathop{\mathrm{id}}}
\def\law{\mathop{\mathrm{law}}}
\def\sigmoid{\mathop{\mathrm{sigmoid}}}


\let\oldemptyset\emptyset
\let\emptyset\varnothing


\newcommand{\dimq}{m_q}


%\addtolength{\textwidth}{1in} \addtolength{\oddsidemargin}{-0.5in}
%\addtolength{\textheight}{1in} \addtolength{\topmargin}{-0.62in}

\def\sep{\;\big|\;}
\def \trunc{\mathop{\mathrm{trunc}}}
\def \obs {{\rm obs}}
\def \mis {{\rm mis}}
\def \hbSigma {\widehat{\bSigma}}
\def \bbSigma {\bar{\bSigma}}


%\usepackage[protrusion=false,expansion=true]{microtype}
%\usepackage[activate={true,nocompatibility},final,tracking=true,kerning=true,spacing=true,factor=1100,stretch=10,shrink=10]{microtype}

\renewcommand{\algorithmicrequire}{\textbf{Input:}}
\renewcommand{\algorithmicensure}{\textbf{Output:}}


\newenvironment{proofsketch}{\begin{proof}[Proof Sketch]}{\end{proof}}


\newcommand{\nn}{{\text{NN}}}
\newcommand{\iid}{{\mathrm{i.i.d.}\!}}
\newcommand{\unif}{{\text{Unif}}}
\newcommand{\kl}{{\mathrm{KL}}}
\newcommand{\md}{{\text{md}}}
\newcommand{\rd}{{\mathrm{d}}}
\newcommand{\rE}{{\text{{\tiny E}}}}
\newcommand{\rc}{{\mathrm{c}}}
\newcommand{\TD}{{\mathrm{TD} } }
\newcommand{\init}{{\text{init}}}
\newcommand{\proj}{\text{Proj}}
\newcommand{\err}{{\epsilon}}
\newcommand{\phic}{\iota}
%\newcommand{\gap}{\text{Gap}}
\newcommand{\DD}{\mathbb{D}}


\def\##1\#{\begin{align}#1\end{align}}
\def\$#1\${\begin{align*}#1\end{align*}}




\let\hat\widehat
\let\tilde\widetilde
\let\check\widecheck
\def\given{{\,|\,}}
\def\biggiven{{\,\big|\,}}
\def\Biggiven{{\,\Big|\,}}
\def\bigggiven{{\,\bigg|\,}}
\def\Bigggiven{{\,\Bigg|\,}}
\def\ds{\displaystyle}
\newcommand\wtilde{\stackrel{\sim}{\smash{\mathcal{W}}\rule{0pt}{1.1ex}}}
\newcommand{\indep}{\perp \!\!\! \perp}
%----- bold fonts -----%

\newcommand{\ab}{\mathbf{a}}
\newcommand{\bbb}{\mathbf{b}}
\newcommand{\cbb}{\mathbf{c}}
\newcommand{\db}{\mathbf{d}}
\newcommand{\eb}{\mathbf{e}}
\newcommand{\fb}{\mathbf{f}}
\newcommand{\gb}{\mathbf{g}}
\newcommand{\hb}{\mathbf{h}}
\newcommand{\ib}{\mathbf{i}}
\newcommand{\jb}{\mathbf{j}}
\newcommand{\kb}{\mathbf{k}}
\newcommand{\lb}{\mathbf{l}}
\newcommand{\mb}{\mathbf{m}}
\newcommand{\nbb}{\mathbf{n}}
\newcommand{\ob}{\mathbf{o}}
\newcommand{\pb}{\mathbf{p}}
\newcommand{\qb}{\mathbf{q}}
\newcommand{\rb}{\mathbf{r}}
\newcommand{\sbb}{\mathbf{s}}
\newcommand{\tb}{\mathbf{t}}
\newcommand{\ub}{\mathbf{u}}
\newcommand{\vb}{\mathbf{v}}
\newcommand{\wb}{\mathbf{w}}
\newcommand{\xb}{\mathbf{x}}
\newcommand{\yb}{\mathbf{y}}
\newcommand{\zb}{\mathbf{z}}

\newcommand{\ba}{\bm{a}}
\newcommand{\bb}{\bm{b}}
\newcommand{\bc}{\bm{c}}
\newcommand{\bd}{\bm{d}}
\newcommand{\be}{\bm{e}}
\newcommand{\bbf}{\bm{f}}
\newcommand{\bg}{\bm{g}}
\newcommand{\bh}{\bm{h}}
\newcommand{\bi}{\bmf{i}}
\newcommand{\bj}{\bm{j}}
\newcommand{\bk}{\bm{k}}
\newcommand{\bl}{\bm{l}}
\newcommand{\bbm}{\bm{m}}
\newcommand{\bn}{\bm{n}}
\newcommand{\bo}{\bm{o}}
\newcommand{\bp}{\bm{p}}
\newcommand{\bq}{\bm{q}}
\newcommand{\br}{\bm{r}}
\newcommand{\bs}{\bm{s}}
\newcommand{\bt}{\bm{t}}
\newcommand{\bu}{\bm{u}}
\newcommand{\bv}{\bm{v}}
\newcommand{\bw}{\bm{w}}
\newcommand{\bx}{\bm{x}}
\newcommand{\by}{\bm{y}}
\newcommand{\bz}{\bm{z}}




\newcommand{\Ab}{\mathbf{A}}
\newcommand{\Bb}{\mathbf{B}}
\newcommand{\Cb}{\mathbf{C}}
\newcommand{\Db}{\mathbf{D}}
\newcommand{\Eb}{\mathbf{E}}
\newcommand{\Fb}{\mathbf{F}}
\newcommand{\Gb}{\mathbf{G}}
\newcommand{\Hb}{\mathbf{H}}
\newcommand{\Ib}{\mathbf{I}}
\newcommand{\Jb}{\mathbf{J}}
\newcommand{\Kb}{\mathbf{K}}
\newcommand{\Lb}{\mathbf{L}}
\newcommand{\Mb}{\mathbf{M}}
\newcommand{\Nb}{\mathbf{N}}
\newcommand{\Ob}{\mathbf{O}}
\newcommand{\Pb}{\mathbf{P}}
\newcommand{\Qb}{\mathbf{Q}}
\newcommand{\Rb}{\mathbf{R}}
\newcommand{\Sbb}{\mathbf{S}}
\newcommand{\Tb}{\mathbf{T}}
\newcommand{\Ub}{\mathbf{U}}
\newcommand{\Vb}{\mathbf{V}}
\newcommand{\Wb}{\mathbf{W}}
\newcommand{\Xb}{\mathbf{X}}
\newcommand{\Yb}{\mathbf{Y}}
\newcommand{\Zb}{\mathbf{Z}}

\newcommand{\bA}{{\bm{A}}}
\newcommand{\bB}{{\bm{B}}}
\newcommand{\bC}{{\bm{C}}}
\newcommand{\bD}{{\bm{D}}}
\newcommand{\bE}{{\bm{E}}}
\newcommand{\bF}{{\bm{F}}}
\newcommand{\bG}{{\bm{G}}}
\newcommand{\bH}{{\bm{H}}}
\newcommand{\bI}{{\bm{I}}}
\newcommand{\bJ}{{\bm{J}}}
\newcommand{\bK}{{\bm{K}}}
\newcommand{\bL}{{\bm{L}}}
\newcommand{\bM}{{\bm{M}}}
\newcommand{\bN}{{\bm{N}}}
\newcommand{\bO}{{\bm{O}}}
\newcommand{\bP}{{\bm{P}}}
\newcommand{\bQ}{{\bm{Q}}}
\newcommand{\bR}{{\bm{R}}}
\newcommand{\bS}{{\bm{S}}}
\newcommand{\bT}{{\bm{T}}}
\newcommand{\bU}{{\bm{U}}}
\newcommand{\bV}{{\bm{V}}}
\newcommand{\bW}{{\bm{W}}}
\newcommand{\bX}{{\bm{X}}}
\newcommand{\bY}{{\bm{Y}}}
\newcommand{\bZ}{{\bm{Z}}}


%----- calligraphic fonts -----%

\newcommand{\cA}{{\mathcal{A}}}
\newcommand{\cB}{{\mathcal{B}}}
\newcommand{\cC}{{\mathcal{C}}}
\newcommand{\cD}{{\mathcal{D}}}
\newcommand{\cE}{{\mathcal{E}}}
\newcommand{\cF}{{\mathcal{F}}}
\newcommand{\cG}{{\mathcal{G}}}
\newcommand{\cH}{{\mathcal{H}}}
\newcommand{\cI}{{\mathcal{I}}}
\newcommand{\cJ}{{\mathcal{J}}}
\newcommand{\cK}{{\mathcal{K}}}
\newcommand{\cL}{{\mathcal{L}}}
\newcommand{\cM}{{\mathcal{M}}}
\newcommand{\cN}{{\mathcal{N}}}
\newcommand{\cO}{{\mathcal{O}}}
\newcommand{\cP}{{\mathcal{P}}}
\newcommand{\cQ}{{\mathcal{Q}}}
\newcommand{\cR}{{\mathcal{R}}}
\newcommand{\cS}{{\mathcal{S}}}
\newcommand{\cT}{{\mathcal{T}}}
\newcommand{\cU}{{\mathcal{U}}}
\newcommand{\cV}{{\mathcal{V}}}
\newcommand{\cW}{{\mathcal{W}}}
\newcommand{\cX}{{\mathcal{X}}}
\newcommand{\cY}{{\mathcal{Y}}}
\newcommand{\cZ}{{\mathcal{Z}}}




%----- blackboard bold fonts-----%
\newcommand{\BB}{\mathbb{B}}
\newcommand{\CC}{\mathbb{C}}
\newcommand{\EE}{\mathbb{E}}
\newcommand{\VV}{\mathbb{V}}
\newcommand{\II}{\mathbb{I}}
\newcommand{\KK}{\mathbb{K}}
\newcommand{\LL}{\mathbb{L}}
\newcommand{\MM}{\mathbb{M}}
\newcommand{\NN}{\mathbb{N}}
\newcommand{\PP}{\mathbb{P}}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\SSS}{\mathbb{S}}
\newcommand{\TT}{\mathbb{T}}
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\XX}{\mathbb{X}}
\newcommand{\YY}{\mathbb{Y}}
\newcommand{\OOmega}{\mathbb{\Omega}}


%----- script fonts -------%
\newcommand{\sA}{{\mathscr{A}}}
\newcommand{\sB}{{\mathscr{B}}}
\newcommand{\sD}{{\mathscr{D}}}
\newcommand{\sP}{{\mathscr{P}}}
\newcommand{\sF}{{\mathscr{F}}}
\newcommand{\sG}{{\mathscr{G}}}
\newcommand{\sS}{{\mathscr{S}}}
\newcommand{\sQ}{{\mathscr{Q}}}

%----- bold greek fonts -----%

\newcommand{\balpha}{\bm{\alpha}}
\newcommand{\bbeta}{\bm{\beta}}
\newcommand{\bgamma}{\bm{\gamma}}
\newcommand{\bepsilon}{\bm{\epsilon}}
\newcommand{\bvarepsilon}{\bm{\varepsilon}}
\newcommand{\bzeta}{\bm{\zeta}}
\newcommand{\btheta}{\bm{\theta}}
\newcommand{\bvartheta}{\bm{\vartheta}}
\newcommand{\bkappa}{\bm{\kappa}}
\newcommand{\blambda}{\bm{\lambda}}
\newcommand{\bmu}{\bm{\mu}}
\newcommand{\bnu}{\bm{\nu}}
\newcommand{\bxi}{\bm{\xi}}
\newcommand{\bpi}{\bm{\pi}}
\newcommand{\bvarpi}{\bm{\varpi}}
\newcommand{\brho}{\bm{\varrho}}
\newcommand{\bsigma}{\bm{\sigma}}
\newcommand{\bvarsigma}{\bm{\varsigma}}
\newcommand{\btau}{\bm{\tau}}
\newcommand{\bupsilon}{\bm{\upsilon}}
\newcommand{\bphi}{\bm{\phi}}
\newcommand{\bvarphi}{\bm{\varphi}}
\newcommand{\bchi}{\bm{\chi}}
\newcommand{\bpsi}{\bm{\psi}}
\newcommand{\bomega}{\bm{\omega}}

\newcommand{\bGamma}{\bm{\Gamma}}
\newcommand{\bDelta}{\bm{\Delta}}
\newcommand{\bTheta}{\bm{\Theta}}
\newcommand{\bLambda}{\bm{\Lambda}}
\newcommand{\bXi}{\bm{\Xi}}
\newcommand{\bPi}{\bm{\Pi}}
\newcommand{\bSigma}{\bm{\Sigma}}
\newcommand{\bUpsilon}{\bm{\Upsilon}}
\newcommand{\bPhi}{\bm{\Phi}}
\newcommand{\bPsi}{\bm{\Psi}}
\newcommand{\bOmega}{\bm{\Omega}}


%----- Some standard definitions -----%

\newcommand{\argmin}{\mathop{\mathrm{argmin}}}
\newcommand{\argmax}{\mathop{\mathrm{argmax}}}
\newcommand{\minimize}{\mathop{\mathrm{minimize}}}
\newcommand{\maximize}{\mathop{\mathrm{maximize}}}

\newcommand{\sign}{\mathop{\mathrm{sign}}}
\newcommand{\tr}{\mathop{\mathrm{tr}}}
\newcommand{\trace}{\mathop{\mathrm{Tr}}}

\DeclareMathOperator{\Var}{{\rm Var}}
\DeclareMathOperator{\Cor}{\rm Corr}
\DeclareMathOperator{\Cov}{\rm Cov}
\DeclareMathOperator{\ind}{\mathds{1}}  % Indicator
\newcommand{\smallfrac}[2]{{\textstyle \frac{#1}{#2}}}

\newcommand*{\zero}{{\bm 0}}
\newcommand*{\one}{{\bm 1}}

\newcommand{\diag}{{\rm diag}}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%% Norms
\newcommand{\fro}{{\mathop{\mathrm{fro}}}}
\newcommand{\oper}{{\mathop{\mathrm{op}}}}

%%%%% Dot product
\newcommand{\dotp}[2]{\left\langle{#1},{#2}\right\rangle}
\DeclarePairedDelimiterX{\dotE}[1]{\langle}{\rangle}{#1}
%%%%  brackets
\DeclarePairedDelimiterX{\inp}[2]{\langle}{\rangle}{#1, #2}
\newcommand{\rbr}[1]{\left(#1  \right)}
\newcommand{\sbr}[1]{\left[#1  \right]}
\newcommand{\cbr}[1]{\left\{#1 \right\}}
\newcommand{\nbr}[1]{\left\|#1 \right\|}
\newcommand{\abr}[1]{\left|#1  \right|}

\newcommand{\orbr}[1]{(#1)}
\newcommand{\bigrbr}[1]{\big(#1\big)}
\newcommand{\Bigrbr}[1]{\Big(#1\Big)}
\newcommand{\biggrbr}[1]{\bigg(#1\bigg)}
\newcommand{\Biggrbr}[1]{\Bigg(#1\Bigg)}

\newcommand{\oabr}[1]{|#1|}
\newcommand{\bigabr}[1]{\big|#1\big|}
\newcommand{\Bigabr}[1]{\Big|#1\Big|}
\newcommand{\biggabr}[1]{\bigg|#1\bigg|}
\newcommand{\Biggabr}[1]{\Bigg|#1\Bigg|}

\newcommand{\osbr}[1]{[#1]}
\newcommand{ \bigsbr}[1]{ \big[#1 \big]}
\newcommand{ \Bigsbr}[1]{ \Big[#1 \Big]}
\newcommand{\biggsbr}[1]{\bigg[#1\bigg]}
\newcommand{\Biggsbr}[1]{\Bigg[#1\Bigg]}

\newcommand{\ocbr}[1]{\{#1\}}
\newcommand{ \bigcbr}[1]{ \big\{#1 \big\}}
\newcommand{ \Bigcbr}[1]{ \Big\{#1 \Big\}}
\newcommand{\biggcbr}[1]{\bigg\{#1\bigg\}}
\newcommand{\Biggcbr}[1]{\Bigg\{#1\Bigg\}}

\newcommand{\onbr}[1]{\|#1\|}
\newcommand{ \bignbr}[1]{ \big\|#1 \big\|}
\newcommand{ \Bignbr}[1]{ \Big\|#1 \Big\|}
\newcommand{\biggnbr}[1]{\bigg\|#1\bigg\|}
\newcommand{\Biggnbr}[1]{\Bigg\|#1\Bigg\|}

\newcommand{\odotp}[2]{         \langle{#1},{#2}      \rangle}
\newcommand{\bigdotp}[2]{\big   \langle{#1},{#2}  \big\rangle}
\newcommand{\Bigdotp}[2]{\Big   \langle{#1},{#2}  \Big\rangle}
\newcommand{\biggdotp}[2]{\bigg \langle{#1},{#2}  \bigg\rangle}
\newcommand{\Biggdotp}[2]{\Bigg \langle{#1},{#2}  \Bigg\rangle}
%%%%%%%%%  Other commands

\newcommand{\mcomment}[1]{\marginpar{\tiny{#1}}}
\newcommand{\fcomment}[1]{\footnote{\tiny{#1}}}
\newcommand{\overbar}[1]{\mkern 1.5mu\overline{\mkern-1.5mu#1\mkern-1.5mu}\mkern 1.5mu}
\newcommand{\ud}{{\mathrm{d}}}


\newcommand{\subopt}{\text{SubOpt}}


%%%%%%%%  amsmath %%%%%%%%%%
\newtheoremstyle{mytheoremstyle} % name
    {\topsep}                    % Space above
    {\topsep}                    % Space below
    {\normalfont}                   % Body font
    {}                           % Indent amount
    {\bfseries}                   % Theorem head font
    {.}                          % Punctuation after theorem head
    {.5em}                       % Space after theorem head
    {}  % Theorem head spec (can be left empty, meaning ‘normal’)

\theoremstyle{mytheoremstyle}

\ifx\BlackBox\undefined
\newcommand{\BlackBox}{\rule{1.5ex}{1.5ex}}  % end of proof
\fi

\ifx\QED\undefined
\def\QED{~\rule[-1pt]{5pt}{5pt}\par\medskip}
\fi

\ifx\proof\undefined
\newenvironment{proof}{\par\noindent{\bf Proof\ }}{\hfill\BlackBox\\[2mm]}
%\newenvironment{proof}{\emph{Proof. }}{ \hfill \QED}
\fi

\ifx\theorem\undefined
\newtheorem{theorem}{Theorem}
\fi
\ifx\example\undefined
\newtheorem{example}[theorem]{Example}
\fi
\ifx\property\undefined
\newtheorem{property}{Property}
\fi
\ifx\lemma\undefined
\newtheorem{lemma}[theorem]{Lemma}
\fi
\ifx\proposition\undefined
\newtheorem{proposition}[theorem]{Proposition}
\fi
\ifx\remark\undefined
\newtheorem{remark}[theorem]{Remark}
\fi
\ifx\corollary\undefined
\newtheorem{corollary}[theorem]{Corollary}
\fi
\ifx\definition\undefined
\newtheorem{definition}[theorem]{Definition}
\fi
\ifx\conjecture\undefined
\newtheorem{conjecture}[theorem]{Conjecture}
\fi
\ifx\fact\undefined
\newtheorem{fact}[theorem]{Fact}
\fi
\ifx\claim\undefined
\newtheorem{claim}[theorem]{Claim}
\fi
\ifx\assumption\undefined
\newtheorem{assumption}[theorem]{Assumption}
\fi
\ifx\cond\undefined
\newtheorem{cond}[theorem]{Condition}
\fi

\newtheoremstyle{anothertheoremstyle} % name
    {\topsep}                    % Space above
    {\topsep}                    % Space below
    {\normalfont}                   % Body font
    {}                           % Indent amount
    {\bfseries}                   % Theorem head font
    {.}                          % Punctuation after theorem head
    {.5em}                       % Space after theorem head
    {\thmname{#1} \thmnumber{#2} \normalfont{#3}}  % Theorem head spec (can be left empty, meaning ‘normal’)
\ifx\condition\undefined
\theoremstyle{anothertheoremstyle}
\newtheorem{condition}[theorem]{Condition}
\fi
\numberwithin{equation}{section}
\numberwithin{theorem}{section}

\makeatletter
\newcommand{\raisemath}[1]{\mathpalette{\raisem@th{#1}}}
\newcommand{\raisem@th}[3]{\raisebox{#1}{$#2#3$}}
\makeatother

\let\oldabstract\abstract
\let\oldendabstract\endabstract
\makeatletter
\renewenvironment{abstract}
{\renewenvironment{quotation}%
               {\list{}{\addtolength{\leftmargin}{-0.5em} % change this value to add or remove length to the the default
                       \listparindent 0em%
                        \itemindent    \listparindent%
                        \rightmargin   \leftmargin%
                        \parsep        \z@ \@plus\p@}%
                \item\relax}%
               {\endlist}%
\oldabstract}
{\oldendabstract}
\makeatother



\usepackage[framemethod=TikZ]{mdframed}
\mdfdefinestyle{box}{
skipabove = 10pt, skipbelow = 10pt,
leftmargin=.5cm, rightmargin=.5cm, 
innerleftmargin = 15pt, innerrightmargin = 15pt,
innertopmargin = 10pt, innerbottommargin = 10pt,
roundcorner=15pt, middlelinewidth=1pt}



% \usepackage{xcolor}

\newcommand{\dtoprule}{\specialrule{1pt}{0pt}{0.4pt}%
            \specialrule{0.3pt}{0pt}{\belowrulesep}%
            }
\newcommand{\dbottomrule}{\specialrule{0.3pt}{0pt}{0.4pt}%
            \specialrule{1pt}{0pt}{\belowrulesep}%
            }


%%% Infrastructure    
\makeatletter
\newcommand{\refcheckize}[1]{%
  \expandafter\let\csname @@\string#1\endcsname#1%
  \expandafter\DeclareRobustCommand\csname relax\string#1\endcsname[1]{%
    \csname @@\string#1\endcsname{##1}\wrtusdrf{##1}}%
  \expandafter\let\expandafter#1\csname relax\string#1\endcsname
}
\makeatother
%%%

%%% Now we add the reference commands we want refcheck to be aware of
% \refcheckize{\cref}
% \refcheckize{\Cref}

% \newenvironment{neurips}
%     {\ifneurips \color{olive}
%     }
%     { 
%     % \fi
%     }
% \newcommand{\neurips}[1]{{\color{olive} \ifneurips #1 \fi}}

\def\neurips{\ifneurips\color{olive}}
% \def\neurips{\color{olive}}
\def\main{\ifmain\color{black}}

\newenvironment{longequation}
 {\begin{equation}\begin{minipage}{.9\columnwidth}$}
 {$\end{minipage}\end{equation}}

 \usepackage{nccmath}

\usepackage{xpatch}
\xpatchcmd{\NCC@ignorepar}{%
\abovedisplayskip\abovedisplayshortskip}
{%
\abovedisplayskip\abovedisplayshortskip%
\belowdisplayskip\belowdisplayshortskip}
{}{}

\newcommand{\aboveskip}[1][0.1]{\abovedisplayskip #1\abovedisplayshortskip}
\newcommand{\belowskip}[1][0.1]{\belowdisplayskip #1\belowdisplayshortskip}
\newcommand{\abovebelowskip}[2]{\abovedisplayskip #1\abovedisplayshortskip
\belowdisplayskip #2\belowdisplayshortskip}