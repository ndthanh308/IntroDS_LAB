\section{Supplementary Materials}

\tocomments{{\bf System Design Choices and Considerations.} To design our system, the notion of ``subgroup'' is a central concept, as (1) it is through the aggregation of subgroups that a Simpson's paradox emerges, and (2) this concept bears causal implications in terms of heterogeneous causal effects. In our study, the design of \vispur started with defining the core task: {\it visualizing subgroup heterogeneity} to interpret a paradoxical or spurious association, along with the specific design requirements ({\bf R1---R4}) listed in Section~\ref{sec:designguideline:requirement}. Besides, the causal diagram in Fig.~\ref{fig:teaser}B suggests that our visual design should clearly capture a set of six key elements, including three entities, i.e., cause $X$, outcome $Y$, covariates $Z$ (or group membership), and three arrows, i.e., propensity $\mathbf{Z}\rightarrow T$, base effect $\mathbf{Z}\rightarrow Y$, cause-outcome relationship $X\leftrightarrow Y$. Given such considerations, we investigated five designs in existing works of visualizing Simpson's paradox, including the B-K diagram \cite{baker2001good}, platform scale \cite{rum1980magic}, comet \cite{armstrong2014visualizing}, circle-line design \cite{rucker2008simpson}, as well as ellipse design \cite{friendly2013elliptical}. Table~\ref{tab:comp} provides a summary of advantages and disadvantages of the five visual diagrams examined in our design decision. Table~\ref{tab:visulizing_SP} summarizes whether and how the six key elements are represented in those five visual designs.}

\tocomments{Among them, the design of platform scale includes a set of blocks arranged in stacks of varying heights being placed on a platform and balanced on a pivot at the center of gravity \cite{rum1980magic}. Although the gravity-based design is intuitive, it is difficult to visually comprehend how a static equilibrium could be achieved when more than two subgroups (i.e., stacks of blocks) are present. As the blocks of the same subgroup are placed on different platforms (corresponding to different treatment options), it is not easy to examine the properties of a chosen subgroup. All of the other four designs have utilized a two-dimensional coordinate space, where the vertical axis represents outcome, but the horizontal axis holds different meanings in different designs. For example, the B-K diagram considers the horizontal axis as the percentage of a chosen subgroup (two subgroups in total), therefore it does not have a explicitly visual representation of more than two subgroups, failing to satisfy our design requirement \cite{baker2001good}. The design of comet consists of a set of comets (i.e., subgroups) placed in a two-dimensional space, and the motion of a comet from head to tail captures its change from the starting time point A to the ending time point B \cite{armstrong2014visualizing}. Although it well preserves the notion of subgroup and enables a straightforward comparison of subgroup patterns, the strong sense of motion conveyed by comets only works well for time-based data rather than a more general treatment scenario. We compare the pros and cons of all possible visual representation candidates, and decided that circle-line \cite{rucker2008simpson} and ellipse diagram \cite{friendly2013elliptical} are most suitable to meet the required elements and data types. The first reason is representation consistency. They share the same two-dimensional cause-outcome space, with the horizontal axis as cause and vertical as outcome, and the slope of regression lines as cause-outcome relationship. Being represented in the cause-outcome space, circle-line plot is designed for a dichotomous treatment while ellipse diagram for a continuous treatment. Secondly, the diagram, either a circle-line plot or a data ellipse, is a simple and effective summary of raw data points in the two-dimensional space. They are good at simplifying a possibly large-scale data set and capturing the most important information (e.g., the set of six key elements, including three entities and three arrows, are well represented, see Table~\ref{tab:visulizing_SP}). The third reason is that they enable a good representation and comparison of multiple subgroups. Both provide a high-level overview of multiple subgroups and enable inter-subgroup comparison; besides, an aggregate plot for the entire data (circle-line or ellipse) could be shown to alert Simpson's paradox.}

\tocomments{During the system design and development process, we conducted two rounds of open-ended discussion and feedback collection sessions with 5 colleagues in our research lab. We invited them to raise any concerns and suggestions to improve our system. For instance, the feature histograms in {\confounderdashboard} were initially designed to be overlapped, but users might have difficulty in reading distinctions when two distributions look similar. We decided to put them side by side vertically to give a straightforward comparison. The initial design of multi-thumb sliders didn't contain the associated feature distribution. Users reported that they sometimes had no idea where to put the cutting points. We then follow their suggestions to visualize a histogram distribution to guide the selection of proper cut points. In addition, to design the {\reasoningstoryboard}, we have tested two options to visualize data volume, through flow width versus through color darkness. Our users reported that width is a much clearer visual signal for them to comprehend.}

\input{tables/design_choice.tex}



\tocomments{{\bf How Participants' Backgrounds Affect Performance in Using \vispur.} In the controlled experiments, we asked participants to report their level (1 to 5) of being familiar with a series of advanced causality topics including random experiments, causal inference, confounding, propensity score, and selection bias. We computed the average value of self-reported scores regarding those advanced topics, and computed the Spearman's rank correlation coefficient ($\rho$) between this score and participants' performance. As shown in Fig.~\ref{fig:bck_results}A, the correlation coefficients between expertise score and accuracy for both methods, \vispur and baseline, are not significant ($\rho_{\mathrm{VISPUR}} = 0.078, p = 0.74$, and $\rho_{\mathrm{Baseline}} = -0.099, p = 0.68$). Similarly, we didn't observe significant positive correlations between expertise score and certainty in Fig.~\ref{fig:bck_results}B ($\rho_{\mathrm{VISPUR}} = 0.097, p = 0.69$, and $\rho_{\mathrm{Baseline}} = 0.12, p = 0.63$). To summarize, we didn't find a strong evidence showing that participants of various causality backgrounds have very different performances. We note that our experiments are not free of limitations. For instance, our system is designed for a broader range of data practitioners, so the majority of our recruited participants are not experts of causality. The scatter plots in Fig.~\ref{fig:bck_results} shows that most participants reported to have a familiarity level at 1-3 with advanced causality topics. Recruiting and testing individuals with greater expertise in the field is critical for gaining a more complete understanding of how expert users perform when utilizing VISPUR compared to ordinary data practitioners. Due to the excessive time needed for collecting data from each participant, we did not administer a pre-study knowledge test to participants; therefore, our analyses may contain self-reporting errors.}

\input{images/bck_results_caption}

\input{tables/interviews.tex}

\input{images/baseline_caption}

\input{tables/tasks.tex}

% \tocomments{{\bf System Demo.} We provide two demos:
% \begin{enumerate}
%     \item A longer version of VISPUR demo with a brief background (7 min), please click \href{https://drive.google.com/drive/folders/1mBIHysciAV8kvripizKeE2_2sr2deeeG}{https://shorturl.at/fwJT4}.
%     \item A shorter version of VISPUR demo without background information (5 min), please click \href{https://drive.google.com/drive/folders/1mBIHysciAV8kvripizKeE2_2sr2deeeG}{https://shorturl.at/lmqzE}.
% \end{enumerate}}

