% qcircuit file
% Steane X-error correction
%
\Qcircuit @C=0.7em @R=0.3em {
& \qw\A{a} & \multigate{7}{Q_{N}} &\qw & \qw\A{g} & \ctrl{10}\A{A1} & \qw & \qw & \qw & \qw & \qww \\
&     & \nghost{Q_{N}}   &   \\
& \qw\A{b} & \ghost{Q_{N}}    &   \\
& \qw\A{c} & \ghost{Q_{N}}    &   \\
& \qw\A{d} & \ghost{Q_{N}}    &   \\
& \qw\A{e} & \ghost{Q_{N}}    &   \\
&     & \nghost{Q_{N}}   &   \\
& \qw\A{f} & \ghost{Q_{N}}    &\qw &  \qw\A{h} & \qw & \qw & \qw & \ctrl{10}\A{B1} & \qw & \qww
   \ar@{.}"A1"+<.3em,-.5em>;"B1"+<-.3em,.5em>
   \ar@{.}"a"-<0em,.3em>;"b"+<0em,.3em>
   \ar@{.}"c"-<0em,.3em>;"d"+<0em,.3em>
   \ar@{.}"e"-<0em,.3em>;"f"+<0em,.3em>
   \ar@{.}"g"-<.5em,1em>;"h"+<-.5em,1em>|{\rotatebox{90}{\small\,$\ket{\widetilde{\phi}}_\mathcal{S}$\,}}
   \inputgrouph{1}{3}{1.2em}{\ket{\bm{u}}_\mathcal{Z}\left\lbrace\raisebox{0em}[1.8em]{\,}\right.}{2em}
   \inputgrouph{4}{5}{.6em}{\ket{\phi}_\mathcal{I}\left\lbrace\raisebox{0em}[1em]{\,}\right.}{2em}
   \inputgrouph{6}{8}{1.2em}{\ket{\bm{\oline{v}}}_\mathcal{X}\left\lbrace\raisebox{0em}[1.8em]{\,}\right.}{2em} \\
   %
   & \\
   & \\
   & \qw\A{a} & \multigate{7}{Q_{N}} &\qw & \qw\A{g} & \targ\A{A2} & \qw & \qw & \qw & \qw & \meter &\cw_<{m_1}\\
&     & \nghost{Q_{N}}   &   \\
& \qw\A{b} & \ghost{Q_{N}}    &   \\
& \qw\A{c} & \ghost{Q_{N}}    &   \\
& \qw\A{d} & \ghost{Q_{N}}    &   \\
& \qw\A{e} & \ghost{Q_{N}}    &   \\
&     & \nghost{Q_{N}}   &   \\
& \qw\A{f} & \ghost{Q_{N}}    &\qw &  \qw\A{h} & \qw & \qw & \qw & \targ\A{B2} & \qw & \meter & \cw_<{\,m_N}
   \ar@{.}"A2"+<.3em,-.5em>;"B2"+<-.3em,.5em>
   \ar@{.}"a"-<0em,.3em>;"b"+<0em,.3em>
   \ar@{.}"c"-<0em,.3em>;"d"+<0em,.3em>
   \ar@{.}"e"-<0em,.3em>;"f"+<0em,.3em>
   \ar@{.}"g"-<.5em,1em>;"h"+<-.5em,1em>|{\rotatebox{90}{\small\,$\ket{\widetilde {\oline{\bm{w'}}}}_{\mathcal{S}'}$\,}}
   \inputgrouph{11}{13}{1.2em}{\ket{\bm{u'}}_\mathcal{Z'}\left\lbrace\raisebox{0em}[1.8em]{\,}\right.}{2em}
   \inputgrouph{14}{15}{.6em}{\ket{\oline{\bm{w'}}}_\mathcal{I'}\left\lbrace\raisebox{0em}[1em]{\,}\right.}{2em}
   \inputgrouph{16}{18}{1.2em}{\ket{\oline{\bm{v'}}}_\mathcal{X'}\left\lbrace\raisebox{0em}[1.8em]{\,}\right.}{2em}
   %\inputgrouph{11}{18}{4.6em}{\rotatebox{90}{\footnotesize All-$\ket{+}$ logical state}}{-5.3em}
} 