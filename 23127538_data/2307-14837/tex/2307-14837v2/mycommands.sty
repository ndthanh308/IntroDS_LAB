\newcommand{\interior}[1]{\ensuremath{\mathop{\smash{#1}
			\rule{0pt}{6.3pt}}\limits^{\hspace{0.2em}\circ}}}
\newcommand{\Restrct}{\,\rule[-5pt]{0.4pt}{12pt}}
\newcommand{\restrct}{\,\rule[-5pt]{0.4pt}{10pt}}
\newcommand{\abs}[1]{\left\vert#1\right\vert} % abs with correct size
\newcommand{\norm}[1]{\left\lVert#1 \right\rVert} % norm with correct size
\newcommand{\nrm}[2]{{\left\lVert#1 \right\rVert}_{#2}} % norm with correct size
\newcommand{\bracket}[1]{\left[ #1 \right]}
\newcommand{\dbracket}[1]{[\![ #1]\!]}
\newcommand{\brc}[1]{\left\{ #1 \right\}}
\newcommand{\dd}[2]{\left\langle#1,\,#2\right\rangle}
\newcommand{\rdd}[2]{\left(#1,\,#2\right)}
\newcommand{\paran}[1]{\left(#1 \right)} %parantheses with correct size
\newcommand{\drv}{\mkern3mu\mathrm{d}} % Nice typesetting for derivative (upright d and small space)
\newcommand{\DRV}{\mathrm{D}}
\newcommand{\ddt}{\frac{\mathrm{d}}{\drv{t}}}
\newcommand{\epsdot}{{\dot\varepsilon}}
\DeclareMathOperator{\PL}{\mathcal{P}} % Prolongate
\DeclareMathOperator{\RS}{\mathcal{R}} %Rest
\newcommand{\C}{\mathbb{C}} % Complex
\newcommand{\R}{\mathbb{R}} % Real
\newcommand{\N}{\mathbb{N}} % Natural
\newcommand{\Z}{\mathbb{Z}} % Integers
\newcommand{\E}{\mathbb{E}} % Expectation
\newcommand{\LA}[1]{{\hat#1}}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\quart}{\frac{1}{4}}
\newcommand{\third}{\frac{1}{3}}
\DeclareMathOperator{\fortin}{P_{\text{For}}^{h}}
\DeclareMathOperator{\dv}{div}
\DeclareMathOperator{\rot}{rot}
\DeclareMathOperator{\grad}{grad}
\DeclareMathOperator{\tr}{tr}
\DeclareMathOperator{\kr}{ker}
\DeclareMathOperator{\rg}{rg}
\DeclareMathOperator{\spn}{span}
\DeclareMathOperator{\sgn}{sign}
\DeclareMathOperator{\supp}{supp}
\DeclareMathOperator{\ind}{\mathbb{I}}
\DeclareMathOperator{\im}{Im} % imaginary part of a complex number
\DeclareMathOperator{\EW}{\mathbb{E}}
\DeclareMathOperator{\Bias}{\text{Bias}}
\DeclareMathOperator{\Var}{\text{Var}}
\newcommand{\e}{\mathrm{e}\mkern0.75mu} % Correct typesetting for euler number
\newcommand{\iu}{\mathrm{i}\mkern0.75mu} %Correct typesetting for imaginary unit
\DeclareMathOperator{\re}{Re}  %Real part of a complex number
\newcommand{\mat}[1]{\mathbf{#1}} % it is nice to print matrices and vectors bold

\makeatletter
\let\save@mathaccent\mathaccent
\renewcommand*\if@single[3]{%
  \setbox0\hbox{${\mathaccent"0362{#1}}^H$}%
  \setbox2\hbox{${\mathaccent"0362{\kern0pt#1}}^H$}%
  \ifdim\ht0=\ht2 #3\else #2\fi
  }
%The bar will be moved to the right by a half of \macc@kerna, which is computed by amsmath:
\renewcommand*\rel@kern[1]{\kern#1\dimexpr\macc@kerna}
%If there's a superscript following the bar, then no negative kern may follow the bar;
%an additional {} makes sure that the superscript is high enough in this case:
\renewcommand*\widebar[1]{\@ifnextchar^{{\wide@bar{#1}{0}}}{\wide@bar{#1}{1}}}
%Use a separate algorithm for single symbols:
\renewcommand*\wide@bar[2]{\if@single{#1}{\wide@bar@{#1}{#2}{1}}{\wide@bar@{#1}{#2}{2}}}
\renewcommand*\wide@bar@[3]{%
  \begingroup
  \def\mathaccent##1##2{%
%Enable nesting of accents:
    \let\mathaccent\save@mathaccent
%If there's more than a single symbol, use the first character instead (see below):
    \if#32 \let\macc@nucleus\first@char \fi
%Determine the italic correction:
    \setbox\z@\hbox{$\macc@style{\macc@nucleus}_{}$}%
    \setbox\tw@\hbox{$\macc@style{\macc@nucleus}{}_{}$}%
    \dimen@\wd\tw@
    \advance\dimen@-\wd\z@
%Now \dimen@ is the italic correction of the symbol.
    \divide\dimen@ 3
    \@tempdima\wd\tw@
    \advance\@tempdima-\scriptspace
%Now \@tempdima is the width of the symbol.
    \divide\@tempdima 10
    \advance\dimen@-\@tempdima
%Now \dimen@ = (italic correction / 3) - (Breite / 10)
    \ifdim\dimen@>\z@ \dimen@0pt\fi
%The bar will be shortened in the case \dimen@<0 !
    \rel@kern{0.6}\kern-\dimen@
    \if#31
      \overline{\rel@kern{-0.6}\kern\dimen@\macc@nucleus\rel@kern{0.4}\kern\dimen@}%
      \advance\dimen@0.4\dimexpr\macc@kerna
%Place the combined final kern (-\dimen@) if it is >0 or if a superscript follows:
      \let\final@kern#2%
      \ifdim\dimen@<\z@ \let\final@kern1\fi
      \if\final@kern1 \kern-\dimen@\fi
    \else
      \overline{\rel@kern{-0.6}\kern\dimen@#1}%
    \fi
  }%
  \macc@depth\@ne
  \let\math@bgroup\@empty \let\math@egroup\macc@set@skewchar
  \mathsurround\z@ \frozen@everymath{\mathgroup\macc@group\relax}%
  \macc@set@skewchar\relax
  \let\mathaccentV\macc@nested@a
%The following initialises \macc@kerna and calls \mathaccent:
  \if#31
    \macc@nested@a\relax111{#1}%
  \else
%If the argument consists of more than one symbol, and if the first token is
%a letter, use that letter for the computations:
    \def\gobble@till@marker##1\endmarker{}%
    \futurelet\first@char\gobble@till@marker#1\endmarker
    \ifcat\noexpand\first@char A\else
      \def\first@char{}%
    \fi
    \macc@nested@a\relax111{\first@char}%
  \fi
  \endgroup
}
\makeatother
