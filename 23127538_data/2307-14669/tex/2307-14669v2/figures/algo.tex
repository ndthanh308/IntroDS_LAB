\begin{algorithm}[t!]
    \caption{Compute the unifier of $\psi_1$ and $\psi_2$ and their unification degree}
    \label{alg:unif}
    \hspace*{\algorithmicindent} \textbf{Input} $\psi_1, \psi_2\in \Psi$\\
    \hspace*{\algorithmicindent} \textbf{Output}
    $(\psi,\beta)$ such that $\psi = \psi_1 \fmeet_\beta \psi_2$
    \begin{algorithmic}[1]
        \Procedure{Unify}{$\psi_1,\psi_2$}
        \State $\phi \gets
                     \phi(\psi_1) \osfwith
                     \phi(\psi_2) \osfwith
                     \rtag(\psi_1) \doteq \rtag(\psi_2)$\label{line:2}
        \While{any rule $r$ of \cref{fig:osf_normalization} is applicable to
        $\phi$}\label{line:3}
          \State $\phi \gets $ result of applying $r$ to $\phi$\label{line:4}
        \EndWhile
        \If{$\phi$ is the inconsistent clause}\label{line:5}
          \State \textbf{return} $\X:\bots$ with unification degree $1$\label{line:6}
          \Else \label{line:7}
        \State $\phi' \gets \solved(\phi)$\label{line:8}
        \State $\osfeq = \{ (\X, \Y) \mid \X\doteq\Y~\text{or}~\Y\doteq\X~\text{is a conjunct of}~\phi\}^*$\label{line:9}
        \State $\quot[\osfeq][\osftags(\phi)] = \{ [\X] \mid \X\in \tags(\phi) \}$\label{line:10}
        \For{$\X\in\tags(\phi')$}\label{line:11}
          \State $\phi' \gets \phi'[\Z_{[\X]}/\X]$\label{line:12}
          \Comment{$\Z_{[\X]}$ is a new variable in $\V\setminus\tags(\phi)$}
        \EndFor
        \State $\psi\gets\psi(\phi')$\label{line:13}
          \Comment{Unifier $\psi = \psi_1\fmeet\psi_2$}
        \State $\beta_1 \gets \min\{
                \fisop(\sort_{\psi}(\Z_{[\X]}), \sort_{\psi_1}(\X))
              \mid \X\in\tags(\psi_1)\}$\label{line:14}
        \State $\beta_2 \gets \min\{ \fisop(\sort_{\psi}(\Z_{[\X]}),
                \sort_{\psi_2}(\X)) \mid \X\in\tags(\psi_2)\}$\label{line:15}
        \State $\beta \gets \min(\beta_1, \beta_2)$\label{line:16}
          \Comment{Unification degree $\beta\in[0,1]$}
        \State \textbf{return} ($\psi$, $\beta$)
        \EndIf
        \EndProcedure
    \end{algorithmic}
\end{algorithm}
