\begin{tikzpicture}[node distance={20mm},thick,
                    main/.style =
                    {thick,shape=ellipse,draw=sortcol,minimum height=20pt, minimum width=20pt},
                    root/.style = {thick,shape=ellipse,draw=sortcol,accepting,minimum height=20pt, minimum width=20pt},
                    box/.style = {draw,red,inner sep=10pt,rounded corners=5pt}]

  \node[root] (x0) at (5, 3)   {\s[v]};
  \node[main] (x1) at (5, 1.5) {\s[u]};
  \node[main] (x2) at (5, 0)   {\s[t]};

  \node[root] (z0) at (2.5, 2.25)   {\s[q]};
  \node[main] (z1) at (2.5, 0.75) {\s[s]};
  \node[main] (z2) at (2.5, -0.75)   {\s[r]};

  \node[root] (y0) at (0, 3)   {\s[u]};
  \node[main] (y1) at (0, 1.5) {\s[v]};
  \node[main] (y2) at (0, 0)   {\s[r]};

  \node[box,fit=(x0)(x1)(x2)] (gx) [label=above:$G(\psi_2)$] {};
  \node[box,fit=(y0)(y1)(y2)] (gy) [label=above:$G(\psi_1)$] {};
  \node[box,fit=(z0)(z1)(z2)] (gz) [label=above:$G(\psi)$] {};

  \draw[->,featcol] (x0) to node[left] {$\f$} (x1);
  \draw[->,featcol] (x1) to node[left] {$\f[g]$} (x2);

  \draw[->,featcol] (z0) to[bend left=25] node[right] {$\f$}    (z1);
  \draw[->,featcol] (z1) to[bend left=25] node[left] {$\f[g]$} (z0);
  \draw[->,featcol] (z1) to               node[left] {$\f[h]$} (z2);

  \draw[->,featcol] (y0) to[bend left=25] node[right] {$\f$}   (y1);
  \draw[->,featcol] (y1) to[bend left=25] node[left] {$\f[g]$} (y0);
  \draw[->,featcol] (y1) to               node[left] {$\f[h]$} (y2);

  \draw[->] (x0) to node[above] {$h_2$} (z0);
  \draw[->] (x1) to node[below] {$h_2$} (z1);
  \draw[->] (x2) to[bend right=25, pos=.66] node[above] {$h_2$} (z0);

  \draw[->] (y0) to node[above] {$h_1$} (z0);
  \draw[->] (y1) to node[above] {$h_1$} (z1);
  \draw[->] (y2) to node[above] {$h_1$} (z2);
\end{tikzpicture}
