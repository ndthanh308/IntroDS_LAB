\section{Fuzzy \osf term unification}%
\label{sec:unification}

Unification is an essential operation in automated reasoning. In crisp \osf
logic, the unification of two \osf terms allows to find their GLB in the
\osf term subsumption lattice. This operation is at the core of the
application of \osf logic and its variants in computational linguistics
\cite{Carpenter1992} and, more recently, it has enabled the implementation
of the very efficient CEDAR Semantic Web reasoner
\cite{AitKaciAmir2017,AmirAitKaci2017}.
In this section we prove that computing the GLB of two \osf terms in the
fuzzy subsumption lattice is no more difficult than computing
it in the crisp setting, as the same unification procedure can be employed,
and we also provide the complexity of computing the subsumption degree of
one term with respect to another.

\begin{definition}[Fuzzy \osf term unification]
\label{def:fuzzy_osf_term_unification}
  The \textit{unifier} of two normal \osf terms $\psi_1$ and $\psi_2$ is
  their GLB in the \osf term fuzzy subsumption lattice (modulo \osf term
  equivalence) and is denoted $\psi_1\fmeet\psi_2$.
  The \textit{unification degree} of $\psi_1$ and $\psi_2$ is defined as
  $\min(\fisop(\psi_1\fmeet\psi_2, \psi_1), \fisop(\psi_1\fmeet\psi_2,
  \psi_2))$. We write $\psi_1\fmeet_\beta\psi_2$ if the unification degree
  of $\psi_1$ and $\psi_2$ is $\beta$.
\end{definition}

The following theorem is an immediate consequence of the analogous result
for crisp \osf logic \cite{AitKaci1993b}, \cref{prop:glbs,thm:crispfuzzy}.
\begin{theorem}[Fuzzy \osf term unification]
\label{thm:fuzzy_osf_term_unification}
  Let $\psi_1$ and $\psi_2$ be \osf terms with no common variables. Then
  their unifier $\psi_1\fmeet\psi_2$ can be computed
  by non-deterministically applying any applicable \textit{constraint
  normalization rule} (\Cref{fig:osf_normalization}) to the clause
  $\phi(\psi_1) \osfwith \phi(\psi_2) \osfwith \rtag(\psi_1) \doteq
  \rtag(\psi_2)$
  until none applies, and translating the resulting clause back into an
  \osf term.
\end{theorem}

As the next example shows, the equality constraints contained in the clause
resulting from the unification procedure can be used to define two mappings
$h_0: \tags(\psi_0)\to\tags(\psi_0\fmeet\psi_1)$ and
$h_1: \tags(\psi_1)\to\tags(\psi_0\fmeet\psi_1)$ witnessing the
(syntactic) subsumptions
$\psi_0\fmeet\psi_1\fsynisa_{\beta_0}\psi_0$ and
$\psi_0\fmeet\psi_1\fsynisa_{\beta_1}\psi_1$, where the
degrees $\beta_0$ and $\beta_1$ can be computed by
\begin{align*}
  \beta_0 &= \min\{ \fisop(\sort_{\psi_0\fmeet\psi_1}(h_0(\X)),
  \sort_{\psi_0}(\X)) \mid \X\in\tags(\psi_0)\}~\text{and}\\
  \beta_1 &= \min\{ \fisop(\sort_{\psi_0\fmeet\psi_1}(h_1(\X)),
  \sort_{\psi_1}(\X)) \mid \X\in\tags(\psi_1)\}.
\end{align*}
By \cref{prop:synsem} it holds that
$\fisop(\psi_0\fmeet\psi_1, \psi_0) = \beta_0$ and
$\fisop(\psi_0\fmeet\psi_1, \psi_1) = \beta_1$. The unification degree of
$\psi_0$ and $\psi_1$ is then given by $\beta_0\land\beta_1$.

\input{fuzzy/unif_ex}

The unification procedure can also be employed to decide whether a normal
term $\psi_0$ is subsumed by another normal term $\psi_1$, and to what
degree: if the output of the unification is a term $\psi_0'$ that is
equivalent to $\psi_0$ and the unification degree is $\beta$,
then $\psi_0$ is subsumed by $\psi_1$ with degree $\beta$.

\subsection{Complexity of \osf term subsumption and unification}%
\label{sec:complexity}

In terms of complexity, finding the unifier of two normal \osf terms
$\psi_0$ and $\psi_1$ in this fuzzy setting has the same complexity of
deciding the problem in the crisp setting.
This is due to the fact that GLBs in a fuzzy lattice and its crisp
counterpart can be computed in the same way (also see \cref{prop:glbs}),
and the rules for fuzzy \osf constraint normalization and crisp \osf
constraint normalization are essentially the same.
The algorithm
from \cite{AitKaci1986b} is based
on the union-find problem \cite{Aho1974} and has a worst-case
  complexity of $O(mG(m))$, where $G(m)\leq 5$ for all practical
  purposes, and $m = \card{\tags(\psi_0)\cup\tags(\psi_1)}$.

Regarding the computation of the unification degree (and thus
also of the subsumption degree), the following steps are required.
\begin{itemize}
  \item First, it is necessary to compute the mappings
    $h_0: \tags(\psi_0)\to\tags(\psi_0\fmeet\psi_1)$ and
    $h_1: \tags(\psi_1)\to\tags(\psi_0\fmeet\psi_1)$
    witnessing the subsumptions
    $\psi_0\fmeet\psi_1\fsynisa_{\beta_0}\psi_0$ and
    $\psi_0\fmeet\psi_1\fsynisa_{\beta_1}\psi_1$. As shown in
    \cref{ex:unif},
    this amounts to finding partitions of the set
    $\tags(\psi_0)\cup\tags(\psi_1)$ and mapping each variable to its
    partition.
    This is an application of the union-find problem and thus its
    complexity is $O(mG(m))$, where
    $m = \card{\tags(\psi_0)\cup\tags(\psi_1)}$, and
    $G$ is as above.
  \item The second step involves finding the degrees $\beta_0$ and
    $\beta_1$ by computing
    \begin{align*}
      \beta_0 &= \min\{ \fisop(\sort_{\psi_0\fmeet\psi_1}(h_0(\X)),
      \sort_{\psi_0}(\X)) \mid \X\in\tags(\psi_0)\}~\text{and}\\
      \beta_1 &= \min\{ \fisop(\sort_{\psi_0\fmeet\psi_1}(h_1(\X)),
      \sort_{\psi_1}(\X)) \mid \X\in\tags(\psi_1)\}
    \end{align*}
    where the complexity of computing $\fisop(\s, \su)$ for two sorts
    $\s,\su\in\S$ is the same as the complexity of computing shortest paths
    in a DAG \cite{Milanese2021a}, i.e., $O(\card{\S}+e)$, where $e$ is the
    number of edges in the DAG
    representation of the fuzzy sort subsumption relation.
    The overall complexity is thus
    $O(m(\card{\S}+e))$, where
    $m = \card{\tags(\psi_0)\cup\tags(\psi_1)}$.
\end{itemize}
