\documentclass{lmcs}

\keywords{%
  algebraic effects,
  asynchrony,
  concurrency,
  interrupt handling,
  signals,
  promises%
}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{bbold} % alternative blackboard letters (amssymb already provides a set of them)
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{lineno}
\usepackage{listings}
\usepackage{mathpartir} % inference rules
\usepackage{stmaryrd}
\usepackage{mathtools} % to typeset equations in the appendix
\usepackage{thmtools}
\usepackage{upquote}
\usepackage{xcolor}
\usepackage[all]{xy}
\usepackage{fontawesome5} % for the lock symbol
\usepackage[most]{tcolorbox}

\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\input{macros.tex}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\definecolor{keywordColor}{rgb}{0.0,0.0,0.5} % the color of language keywords
\definecolor{rulenameColor}{rgb}{0.5,0.5,0.5} % the color of rule names

\newcommand{\sref}[2]{\hyperref[#2]{#1~\ref{#2}}} % workaround for autoref using Theorem for Lemmas and Propositions
\newcommand{\srefcase}[3]{\hyperref[#2]{#1~\ref{#2}~(#3)}} % workaround for autoref using Theorem for Lemmas and Propositions (linking to a particular case of the Lemma)

\def\sectionautorefname{Section}
\def\subsectionautorefname{Section}
\def\subsubsectionautorefname{Section}

\def\lstlanguagefiles{aeff}
\lstset{language=aeff,upquote=true}
\let\ls\lstinline

\newtcolorbox{aeffbox}{
  enhanced, 
  frame hidden, 
  borderline west = {2pt}{0pt}{lightgray}, 
  colback=white, 
  boxsep=0pt, 
  top=0pt, 
  bottom=0pt, 
  left=0pt, 
  right=0pt, 
  toprule=0pt, 
  bottomrule=0pt
}

\makeatletter
\tcbset{
  after app={%
    \ifx\tcb@drawcolorbox\tcb@drawcolorbox@breakable
    \else
      % add only when not breakabel
      \@endparenv
    \fi
  }
}

% for breakable
\appto\tcb@use@after@lastbox{\@endparenv\@doendpe}
\makeatother

\bibliographystyle{alphaurl}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\title[Higher-Order Asynchronous Effects]{Higher-Order Asynchronous Effects\rsuper*}
\titlecomment{{\lsuper*}This paper is an extended version of our previous work~\cite{Ahman:POPL}: 
it simplifies the meta-theory, removes the reliance on general recursion for reinstalling interrupt handlers, 
adds state to reinstallable interrupt handlers, and extends the calculus with higher-order signal and interrupt 
payloads, and with dynamic process creation.}
\thanks{ 
  This project has received funding from the European Union's Horizon 2020 research and 
  innovation programme under the Marie Sk\l{}odowska-Curie grant agreement No 834146
  \raisebox{-0.05cm}{
    \hspace{-0.15cm}
    % Figure removed
    \hspace{-0.15cm}
  }.
  This material is based upon work supported by the Air Force Office of Scientific Research under 
  awards number FA9550-17-1-0326 and FA9550-21-1-0024.
}

\author[D.~Ahman]{Danel Ahman\lmcsorcid{0000-0001-6595-2756}}[a]
\author[M.~Pretnar]{Matija Pretnar\lmcsorcid{0000-0001-7755-2303}}[b,c]

\address{University of Tartu, Institute of Computer Science, Narva mnt 18, Tartu, Estonia}
\email{danel.ahman@ut.ee}

\address{University of Ljubljana, Faculty of Mathematics and Physics, Jadranska 19, Ljubljana, Slovenia}
\email{matija.pretnar@fmf.uni-lj.si}

\address{Institute of Mathematics, Physics and Mechanics,  Jadranska 19, Ljubljana, Slovenia}

\begin{abstract}
  \noindent
  We explore asynchronous programming with algebraic effects. We complement their conventional 
  synchronous treatment by showing how to naturally also accommodate asynchrony within them, 
  namely, by decoupling the execution of operation calls into signalling that an operation's implementation 
  needs to be executed, and interrupting a running computation with the operation's result, to which the 
  computation can react by installing interrupt handlers. We formalise these ideas in a small core calculus
  and demonstrate its flexibility using examples ranging from a multi-party web application, to pre-emptive
  multi-threading, to (cancellable) remote function calls, to a parallel variant of runners of algebraic effects.
  In addition, the paper is accompanied by a formalisation of the calculus's type safety proofs in \pl{Agda},
  and a prototype implementation in \pl{OCaml}.
  
\end{abstract}

\maketitle

\input{introduction.tex}
\input{overview.tex}
\input{basic-calculus-computations.tex}
\input{basic-calculus-processes.tex}
\input{extensions.tex}
\input{applications.tex}
\input{conclusion.tex}

\bibliography{references}

\appendix

\input{appendix.tex}

\end{document}
