\section{Conclusion} \label{sec:conclusion}

We developed a sound refinement type system
for algebraic effects and handlers,
which adopts the concept of ATM (especially, ARM)
to capture how the use of effects and the handling of them influence the results of computations.
This enables precise analysis of programs
with algebraic effects and handlers.
We also implemented the type checking and inference algorithm for a subset of OCaml 5 and
demonstrated the usefulness of ARM.
Additionally, we defined a bidirectionally-type-preserving CPS transformation
from our language with effect handlers to the language without effect handlers.
%
It enables the reuse of existing refinement type checkers to verify programs with effect handlers, but makes programs to be verified complicated and requires them to be fully annotated.
%
One possible direction for future work is to incorporate
temporal verification as in \citet{Sekiyama23} into algebraic effects and handlers.
Also, it is interesting to apply ARM to other variants of effect handlers, such as lexically scoped effect handlers~\cite{ZhangM19,BiernackiPPS20}.
