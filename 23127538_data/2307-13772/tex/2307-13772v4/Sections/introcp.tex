The way in which economic agents react to transaction costs affects the extent to which such costs are detrimental to  economic efficiency.  Or, as \citet{demsetz1968} puts it ``the question that is relevant for efficiency is whether or not the cost is appropriately economized.''  In this paper, we investigate a unique environment that allows us to investigate, theoretically and empirically, how explicit transactions costs affect liquidity supply.

We investigate liquidity provision on a decentralized exchange (Uniswap v3). Automated exchanges such as Uniswap present a unique laboratory to investigate how transaction costs affect the market for liquidity. While there are various new institutional details that animate these exchanges, for our purposes  two are economically important.   First, in automated exchanges, liquidity demand and supply can easily be distinguished:  users either post liquidity or initiate a trade.  So, we can isolate the effect of transactions costs on each side of the market for liquidity.  Second, prices are not set by market participants, but are automatically calculated as a function of liquidity demand and supply. Thus, costs are not passed from liquidity suppliers to demanders through prices. 



 Briefly, Uniswap v3 allows liquidity suppliers and demanders to select into  trading places (called pools) that differ on transaction fees.  These proportional fees are paid by liquidity demanders and are the only source of remuneration to liquidity suppliers.  As noted, prices are calculated mechanically based on posted liquidity, so liquidity suppliers do not earn price impact. In addition, all participants pay a fixed transaction cost (called a ``gas fee'') to access the markets. Our theory and empirical work investigates the effect of different proportional fees and fixed fees on liquidity supply.

To do so, we present a simple model of liquidity supply in which there are two markets -- one has high fees, and one has low fees.  Liquidity demanders, who can  either be small or large, choose a venue based on the fees each venue charges. The decisions of the liquidity demanders determine the payoff to the liquidity suppliers. Liquidity suppliers have heterogeneous endowments, interpretable as different capital constraints --- low-endowment liquidity providers are akin to retail traders, whereas high-endowments stand in for large institutional investors or quantitative funds. Further, liquidity providers incur a fixed cost (i.e., gas price) each time they update their position.

Traders demanding liquidity route their orders first to the low-fee pool to minimize transaction costs. The high-fee pool executes the residual order flow from large traders who exhaust all liquidity at the cheaper venue. As a result, low-fee markets are actively traded and require frequent liquidity updates whereas high-fee pools have a longer liquidity update cycle since they absorb fewer trades.

We  establish conditions under which there is fragmentation or consolidation.  Specifically, even in this simple framework there is a robust parameter range in which liquidity does not naturally concentrate on one of the exchanges. Not only does liquidity fragment, but it differs in both use and type across the two markets.  That is, one exchange features liquidity provided by large suppliers while on the other smaller (retail) suppliers predominate. Finally, changes in the common fixed market access fee differentially affects the liquidity supply on the two pools.  Specifically it reduces market quality (in the sense of lower posted liquidity) on the low fee pool. 


Our paper also shows that fixed costs translate to significant economies of scale, which lead to market fragmentation and the emergence of liquidity provider clienteles. Specifically, our findings reveal that a small number of highly active large liquidity providers, potentially institutional investors and hedge funds, primarily trade against numerous small incoming trades on pools with low fees. In contrast, high-fee pools involve less frequent trading between a substantial number of capital-constrained passive liquidity providers (e.g., retail market makers) on one side and a few sizeable incoming orders on the other. The underlying economic mechanism is that smaller liquidity providers strategically trade off a lower execution probability against higher liquidity fee and less frequent fixed costs, such as gas fees.


Both pools can attract a positive market share if the gas price is large enough due to economies of scale. Liquidity providers trade off a higher revenue per unit of time in the low-fee pool (driven by the larger trading volume) against the additional gas cost required for active liquidity management. As a result, market maker clienteles emerge in equilibrium. Liquidity providers with large endowments gravitate towards low-fee markets, as they are best positioned to frequently update their position. In contrast, smaller market makers choose to passively provide liquidity on high-fee markets where they only trade against large orders being routed there. They optimally trade off a lower execution probability against higher fees per unit of volume and a lower liquidity management cost per unit of time. 

Uniswap v3 launched in May 2021 and quickly established itself as the leading decentralized exchange. Daily trading volume on Uniswap v3 typically exceeds US \$1 billion, whereas the total liquidity supply varies between US \$2-4 billion in our sample, across hundreds of cryptocurrencies. For major pairs such as Ether against USD stablecoins, Uniswap boasts twice or three times better liquidity than centralized exchanges such as Binance.\footnote{See \href{https://uniswap.org/blog/uniswap-v3-dominance}{The Dominance of Uniswap v3 Liquidity}; May 5, 2022.} 

The market design explicitly allows for fragmentation. Each asset pair to be traded on up to four liquidity pools that only differ in the compensation for liquidity providers: in particular, liquidity fees can be equal to 1, 5, 30, or 100 basis points and the corresponding tick sizes are 1, 10, 60, or 200 basis points. The liquidity pools are otherwise identical and, importantly, they share the common infrastructure of the Ethereum blockchain -- i.e., they are similarly impacted by variation in gas prices due to, say, network congestion. At launch, Uniswap Labs conjectured that trading and liquidity should consolidate in equilibrium on a single ``canonical'' pool for which the liquidity fee is just enough to compensate the marginal market maker for adverse selection and inventory costs. That is, activity in low-volatility pairs such as stablecoin-to-stablecoin trades should naturally gravitate to low fee liquidity pools, whereas speculative trading in more volatile pairs will consolidate on high fee markets.\footnote{See \emph{Flexible fees} paragraph at \url{https://uniswap.org/blog/uniswap-v3}; accessed September 14, 2022.}

Using the model for guidance, we analyze  more than 28 million interactions with Uniswap v3 liquidity pools -- that is, all liquidity updates and trades from the inception of v3 in May 2021 until July 2023. 
We first document  liquidity fragmentation in 32 out of 242 asset pairs in our sample, 
%AL why only 242 pairs?
which account for 95\% of liquidity committed to Uniswap v3 smart contracts and 93\% of trading volume. For each of the fragmented pairs, trading consolidates on two pools with adjacent fee levels: either 1 and 5 basis points (e.g., USDC-USDT), 5 and 30 basis points (ETH-USDC), or 30 and 100 basis points (USDC-CRV).

We then document that high-fee pools are on average larger -- with aggregate end-of-day liquidity of \$46.50 million relative to \$33.78 million, the average size of low-fee pools. Nevertheless, three quarters of daily trading volume executes on low-fee pools. In line with the model predictions, low-fee pools are more active as they capture many small trades. There are five times as many trades on low- than on high-fee pools (610 versus 110). However, the average trade on the high fee pool is twice as large: \$14,490 relative to \$6,340. Unsurprisingly, liquidity cycles -- measured as the time between the submission and update of posted liquidity -- are 20\% shorter on the highly active low-fee pool. 

We find robust evidence of liquidity supply clienteles across pools. The average liquidity deposit is 107.5\% larger on the low-fee pool, after controlling for daily volume and return volatility. At the same time, high-fee pools' market share is 21 percentage points higher. The results point to an asymmetric match between liquidity supply and demand: large liquidity suppliers are matched with small liquidity demanders on low-fee pools, whereas small liquidity suppliers trade with a few large orders on the high-fee pool. 

We then turn to the common fixed cost of accessing the market, or gas fees.  The degree of market fragmentation depends on the magnitude of gas costs on the Ethereum blockchain. In the model, a higher gas price leads to a shift in liquidity supply from the low- to the high-fee pool as active position management becomes relatively more costly for the marginal liquidity supplier. We find that a one standard deviation increase in gas prices corresponds to a 4.63 percentage points decrease in the low-fee pool market share, and a 29\% drop in liquidity inflows on days when gas costs are elevated. As liquidity suppliers  leave the low-fee pool, the time between position updates becomes 4.19\% shorter since incoming order flow depletes liquidity at a faster pace. The effect reinforces the expected gas cost difference between the two pools, and more liquidity suppliers switch to the high-fee venue.

Our paper is related to various literatures. 
The classical study of \citet{pagano1989trading} shows that if an asset is traded on two identical exchanges with equal transaction costs, in equilibrium market participants gravitate to a single exchange due to network effects. In practice, exchanges are rarely identical: fragmentation can emerge between fast and slow exchanges \citep{pagnotta2018competing, brocim:20} or between lit and dark markets \citep{Zhu2014}. In our model, fragmentation on decentralized exchanges is driven by variation in liquidity fees as well as different economies of scale due to heterogeneity in liquidity provider capital. We find that liquidity fragmentation driven by high gas fees implies larger transaction costs on incoming orders. We note that there is no time priority on decentralized exchanges, which clear in a pro rata fashion. On markets with time priority, \citet{FoucaultMenkveld2008} and \citet{Ohara2011market} find that market segmentation in equity markets improves liquidity (by allowing queue jumping) and price discovery.

Fixed costs for order submission are uncommon in traditional markets. However, in 2012, the Canadian regulator IIROC implemented an ``integrated fee model'' that charged traders for all messages sent to Canadian marketplaces. \citet{KorajczykMurphy2018} document that this measure disproportionately affected high-frequency traders, resulting in wider bid-ask spreads but lower implementation shortfall for large traders, possibly due to a reduction in back-running activity. Our study contributes additional insights by highlighting that the introduction of a fixed cost, even when applied across exchanges, can lead to market fragmentation.

We also relate to a rich literature on market fragmentation and differential fees. Closest to our paper, \citet{Battalio2016} and \citet{Cimon2021} study the trade-off between order execution risk and compensation for liquidity provision in the context of make-take fee exchanges. However, \citet{Battalio2016} specifically addresses the issue of the broker-customer agency problem, whereas our study focuses on liquidity providers who trade on their own behalf. In traditional securities markets, make-take fees are contingent on trade execution and proportional to the size of the order.  On the other hand, gas costs on decentralized exchanges are independent of order execution, highlighting the significance of economies of scale (lower proportional costs for larger liquidity provision orders) and dynamic liquidity cycles (managing the frequency of fixed cost payments). Strategic brokers in \citet{Cimon2021} provide liquidity alongside exogenous market-makers in a static setting. We complement this approach by modelling network externalities inherent in the coordination problem of heterogeneous liquidity suppliers. In our dynamic setup, this allows us to pin down the equilibrium duration of liquidity cycles and the relative importance of gas fixed costs.


Our paper relates to a nascent and fast-growing literature on the economics of decentralized exchanges. Many studies \citep[e.g.,][]{aoyagi2020,aoyagiito2021,park2022} focus on the economics of constant-function automated market makers, which do not allow liquidity providers to set price limits. In this restrictive environment, \citet{CapponiJia2021} argue that market makers have little incentives to update their position upon the arrival of news to avoid adverse selection, since pro-rata clearing gives an advantage to arbitrageurs. \citet{LeharParlour2021} solve for the equilibrium pool size in a setting where liquidity providers fully internalize information costs without rushing to withdraw positions at risk of being sniped. We argue that on exchanges that allow for limit or range orders, the cost of actively managing positions becomes a first-order concern, as liquidity suppliers need to re-set the price limits once posted liquidity no longer earns fees. Our empirical result on economies of scale echoes the argument in \citet{BarbonRanaldo2021}, who compare transaction costs on centralized and decentralized exchanges and find that high gas prices imply that the latter only become competitive for transactions over US\$100,000. \citet{HasbrouckRiveraSaleh2022} argue that liquidity suppliers require remuneration.  We complement the argument by stating that high fees might be \emph{necessary} for some liquidity providers to cover the fixed costs of managing their position. In line with our theoretical predictions, \citet{caparros2023blockchain} find that liquidity providers reposition their quotes more often on Uniswap V3 pools built on Polygon, which features substantially lower gas fees. Finally, \citet{Heimbach2023} document that after accounting for price impact, concentrated liquidity on Uniswap v3 pools results in increased returns for sophisticated participants but losses for retail traders. 


Despite higher gas costs, decentralized exchanges may hold advantages over centralized venues. \citet{han2022trust} demonstrate Uniswap frequently leads price discovery compared to centralized exchanges such as Binance, despite the latter having higher trading volume. \citet{capponi2023price} find that the fee paid traders to establish execution priority unveils their private information, and therefore contributes to price discovery. \citet{ASPRIS2021101845} argue that decentralized exchanges offer better security than their centralized counterparts since assets are never transferred to the custody of a third party such as an exchange wallet. In turn, \citet{BrolleyZoican2022b} make the point that decentralized exchanges may be able to reduce overall computational costs associated with latency arbitrage races, as they eliminate long-term co-location subscriptions.




