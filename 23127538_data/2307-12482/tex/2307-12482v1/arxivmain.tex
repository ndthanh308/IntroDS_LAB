\documentclass{article}
\usepackage{graphicx} % Required for inserting images

\usepackage{tikz,fullpage}
\usepackage{amsmath}
\usepackage{mathtools}
\usepackage{natbib}
\usepackage{caption}
\captionsetup[subfigure]{justification=centering}
% \usepackage{amsmath, amssymb, amsthm, mathrsfs, tikz, footmisc}
% \usepackage{multirow}
% \usepackage{algorithm2e}
% \usepackage{hyperref}
% \usetikzlibrary{shapes.geometric, arrows}
% \usepackage[sort]{cite}
\usetikzlibrary{arrows.meta,
                chains,
                decorations.pathreplacing,calligraphy,
                positioning,
                quotes,
                shapes.geometric
                }
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}

\input{arxiv00preamble}

\newcommand{\HH}[1]{{\color{magenta}{HH: }{#1} \color{red}}}

\title{Tight Approximations for  Graphical House Allocation}
\author{%
  % Author\thanks{Use footnote for providing further information
  %   about author (webpage, alternative address)---\emph{not} for acknowledging
  %   funding agencies.} \\
  Hadi Hosseini\\
  Penn State University\\
  \texttt{hadi@psu.edu} \\
  \and
  Andrew McGregor \\
  UMass Amherst\\
  \texttt{mcgregor@cs.umass.edu} \\
  \and
  Rik Sengupta \\
  UMass Amherst\\
  \texttt{rsengupta@cs.umass.edu} \\
  \and
  Rohit Vaish \\
  IIT Delhi\\
  \texttt{rvaish@iitd.ac.in} \\
  \and
  Vignesh Viswanathan \\
  UMass Amherst\\
  \texttt{vviswanathan@umass.edu} \\
}
\date{}



\begin{document}

\maketitle

\begin{abstract}
%The \GHA{} problem is concerned with assigning $n$ houses to $n$ agents that are placed on the vertices of an undirected graph. The goal is to minimize the total amount of envy---measured as the absolute difference between an agent's value for its own house and the value it attributes to the neighboring agents' houses.
%
%This problem, alternatively, can be viewed as the generalization of the classical {\MLA} problem that aims at assigning $n$ nonnegative real numbers to the vertices of a graph so as to minimize the edgewise sum of absolute differences of the endpoints. \HH{The last sentence may need some paraphrasing as "endpoints" are not quite clear.} Nonetheless, \cite{canon} recently showed that the \GHA{} problem is significantly more challenging than the \MLA{} problem as the latter admits fast algorithms while the former is inapproximable even on simple classes of graphs (e.g. \HH{perhaps we give an example or two}).

The {\GHA} problem asks: how can $n$ houses (each with a fixed non-negative value) be assigned to the vertices of an undirected graph $G$, so as to minimize the ``aggregate local envy'', i.e., the sum of absolute differences along the edges of $G$? This problem generalizes the classical {\MLA} problem, as well as the well-known \emph{House Allocation Problem} from Economics, the latter of which has notable practical applications in organ exchanges. Recent work has studied the computational aspects of {\GHA} and observed that the problem is NP-hard and inapproximable even on particularly simple classes of graphs, such as vertex disjoint unions of paths. However, the dependence of any approximations on the structural properties of the underlying graph had not been studied.

%In this work, we focus on identifying a variety of graph structures and parameters that admit approximate algorithms. In particular, we present algorithms to approximate the optimal envy and analyze their guarantees on
%\begin{inparaenum}[(a)]
%    \item general graphs,
%    \item general trees, 
%    \item planar graphs,
%    \item bounded-degree graphs, and 
%    \item bounded-degree planar graphs.
%\end{inparaenum}
%In each case, we prove \emph{matching} lower bounds, showing that no significant improvements can be attained unless P = NP. Moreover, we present general approximation ratios as a function of structural parameters of the underlying graphs---e.g. cutwidth and treewidth---which subsequently enables us to achieve better approximations for several natural subclasses of graphs while matching the previous tight upper bounds.
%
%Finally, we investigate the special case of bounded-degree trees and refute a conjecture posed by \cite{canon} about the structural properties of exact optimal allocations on binary trees, through a counterexample on a depth-$3$ complete binary tree.
%Nevertheless, we present a linear-time algorithm that attains a 2.7-approximation on complete binary trees. 

% Our results primarily rely on exploiting graph structures to reason about optimal arrangements. In particular, several of our hardness reductions are quite technical; in one case, we make use of the expansion properties of Ramanujan graphs. 
%To our knowledge, the use of these graphs and these techniques in the context of resource allocation problems is novel.



%%%%%% OLD Abstract %%%%%%%

% The {\GHA} problem was introduced by \cite{canon} as a generalization of the \emph{House Allocation Problem}, and a cardinal version of the notion of local envy-freeness defined by \cite{beynier2018localenvy}. In its canonical form, {\GHA} asks: given $n$ agents placed on the vertices of an undirected graph $G$, and $n$ houses with arbitrary nonnegative values, how do we allocate each house to an agent so as to minimize the total envy on the graph $G$? Here, an agent envies a neighboring agent in $G$ if the latter has a higher-valued house, and the amount of envy is the absolute difference in those two values.

% Note that the {\GHA} problem can be viewed as a purely combinatorial problem: given an $n$-vertex graph $G$ and $n$ nonnegative real numbers, how do we assign the numbers to the vertices of $G$ so as to minimize the edgewise sum of absolute differences of the endpoints? While this is a natural generalization of the classical {\MLA} problem, it was shown by \cite{canon} that {\GHA} is significantly harder, as it is NP-hard and inapproximable even on particularly simple classes of graphs, which have fast algorithms and nice structural guarantees for {\MLA}.

In this work, we give a nearly complete characterization of the approximability of {\GHA}. We present algorithms to approximate the optimal envy on
%:
%\begin{inparaenum}[(a)]
%     \item general graphs,
%     \item trees, 
%     \item planar graphs,
%     \item bounded-degree graphs, and 
%     \item bounded-degree planar graphs.
%\end{inparaenum}
general graphs, trees, planar graphs, bounded-degree graphs, and bounded-degree planar graphs.
For each of these graph classes, we then prove \emph{matching} lower bounds, showing that in each case, no significant improvement can be attained unless P = NP. We also present general approximation ratios as a function of structural parameters of the underlying graph, such as treewidth; these match the aforementioned tight upper bounds in general, and are significantly better approximations for many natural subclasses of graphs. Finally, we investigate the special case of bounded-degree trees in some detail. We first refute a conjecture by \cite{canon} about the structural properties of exact optimal allocations on binary trees by means of a counterexample on a depth-$3$ complete binary tree. This refutation, together with our hardness results on trees, might suggest that approximating the optimal envy even on complete binary trees is infeasible. Nevertheless, we present a linear-time algorithm that attains a 3-approximation on complete binary trees. 
% %We show that a natural class of algorithms (``value-agnostic'' procedures) cannot attain an approximation ratio better than 1.66 on complete binary trees.
We leave open the intriguing question of whether {\GHA} is NP-hard on binary trees.

Some of the technical highlights of our work are the use of expansion properties of Ramanujan graphs in the context of a classical resource allocation problem, and approximating optimal cuts in binary trees by analyzing the behavior of consecutive runs in bitstrings.
% Most of our results rely on exploiting graph structures to reason about optimal arrangements. In particular, several of our hardness reductions are quite technical; in one case, we make use of the expansion properties of Ramanujan graphs. To our knowledge, the use of these graphs and these techniques in the context of resource allocation problems is novel.
\end{abstract}

\input{arxiv01introduction}
\input{arxiv02prelims}
\input{arxiv03upperbounds}
\input{arxiv04lowerbounds}
\input{arxiv05completebinarytrees}
\input{arxiv06conclusion}

\section*{Acknowledgments}

We wish to thank Justin Payan for many helpful discussions during the early stages of this work. We also thank Paul Seymour for some discussions related to the material in Section \ref{sec:completebintrees}. Rohit Vaish acknowledges support from SERB grant no. CRG/2022/002621 and DST INSPIRE grant no. DST/INSPIRE/04/2020/000107. Andrew McGregor and Rik Sengupta acknowledge support from NSF grant CCF-1934846. 
Hadi Hosseini acknowledges support from NSF IIS grants \#2144413 and \#2107173.


\bibliographystyle{plainnat}
\bibliography{abb,arxivreferences}

\input{arxivappendix}

\end{document}