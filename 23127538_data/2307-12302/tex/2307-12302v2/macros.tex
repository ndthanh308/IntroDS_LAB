% !TEX root =  main.tex

\usepackage{xcolor}
\usepackage[all]{xy}
\usepackage{extarrows}
\usepackage{amssymb}
\usepackage{stmaryrd}
\usepackage{pst-node}
\usepackage{mathabx}
\usepackage{bussproofs}
\usepackage{sidenotes}

% svg
%\usepackage{amsmath}
\usepackage{pgf}
\usepackage{svg}

% tikz [AD]
\usepackage{tikz}
\usetikzlibrary{arrows}
\usetikzlibrary{positioning}

% lines
\usepackage[normalem]{ulem}

\newcommand\play[1]{\mathsf{play}(#1)}
\newcommand\trace[1]{\mathit{Tr}(#1)}
\newcommand\lang[1]{\mathit{L}(#1)}
\newcommand\abra[1]{\langle #1 \rangle}
\newcommand\cutout[1]{}
\newcommand\pmor{\rightharpoonup}
\newcommand\Aa{\mathcal{A}}
%\newcommand\e{\epsilon}

\newcommand\lock{\mathit{lock}}
\newcommand\vars{\mathrm{Vars}}
\newcommand\mm{\mathsf{m}}
\newcommand\eq{\epsilon_\Q}
\newcommand\ea{\epsilon_\A}
\newcommand\imax{\mathit{max}}
\newcommand\off{\rho}

\newcommand\alp[1]{\mathcal{T}_{#1}}
\newcommand\q{\mathsf{q}}
\newcommand\err{\mathsf{err}}
%
%\newtheorem{prop}{Proposition}
%\newtheorem{proposition}{Proposition}
%\newtheorem{theorem}{Theorem}
%\newtheorem{thm}{Theorem}
%\newtheorem{lemma}{Lemma}
%\newtheorem{corollary}{Corollary}
%
%\theoremstyle{definition}
%\newtheorem{definition}{Definition}
%\newtheorem{defn}{Definition}
%\newtheorem{eg}{Example}
\newcommand\sata{\mathsf{SATA}}

\newcommand\cn[1]{C^{(#1)}}
\newcommand\qn[1]{Q^{(#1)}}
\newcommand\sa{\mathit{SA}}
\newcommand\ees[1]{e^{(#1)}}
\newcommand\ms[1]{m^{(#1)}}
\newcommand\qs[1]{q^{(#1)}}
\newcommand\rs[1]{r^{(#1)}}

\newcommand\pow[1]{\mathbb{P}(#1)}

\newcommand\lfica{\mathsf{LFICA}}
\newcommand\rsfica{\mathsf{rsFICA}}
\newcommand\cs[1]{c^{(#1)}}
\newcommand\ds[1]{d^{(#1)}}
\newcommand\es[1]{e^{(#1)}}
\newcommand\fs[1]{f^{(#1)}}
\newcommand\CS[1]{C^{(#1)}}
\newcommand\DS[1]{D^{(#1)}}
\newcommand\ES[1]{E^{(#1)}}

\newcommand\colortext[2]{{\color{#1}#2}}
\newcommand\am[1]{\colortext{red}{#1}}
\newcommand\amnote[1]{\sidenote{\am{#1}}}
\newcommand\rl[1]{\colortext{green}{#1}}
\newcommand\rlnote[1]{\sidenote{\rl{#1}}}
\newcommand\ad[1]{\colortext{blue}{#1}}
\newcommand\adnote[1]{\sidenote{\ad{#1}}}
\newcommand\igw[1]{\colortext{violet}{#1}}
\newcommand\igwnote[1]{\sidenote{\igw{#1}}}
\newcommand\N{\mathbb{N}}

%GENERAL MACROS

\newcommand\sem[1]{{\llbracket}{#1}{\rrbracket}}
\newcommand\seq[2]{{#1} \vdash {#2}}
\newcommand\sseq[2]{\sem{\seq{#1}{#2}}}
\newcommand\rarr\rightarrow
\newcommand\dom[1]{\mathsf{dom}(#1)}
\newcommand\makeset[1]{\{#1\}}
\newcommand\word[1]{\textrm{#1}}
\newcommand\clg[1]{\mathcal{#1}}
\newcommand\set[1]{\{#1\}}

%AUTOMATA MACROS

\newcommand\trans[1]{{\xlongrightarrow{#1}}}
\newcommand\Aut{\mathcal{A}}
\newcommand\la{\mathsf{LA}}
\newcommand\D{\mathcal{D}}
\newcommand\pred[1]{\mathit{pred}(#1)}
\newcommand\predc{\mathit{pred}}
\newcommand\predd[2]{\mathit{pred}^{#1}(#2)}
\newcommand\add{\mathrm{ADD}}
\newcommand{\del}{\mathrm{DEL}}
\newcommand\eps{\mathrm{EPS}}
\newcommand\mop[3]{#1,#2,#3}
%IA MACROS

\newcommand\fica{\mathsf{FICA}}
\newcommand\iatype[1]{{\bf #1}}
\newcommand\expt{\iatype{exp}}
\newcommand\comt{\iatype{com}}
\newcommand\vart{\iatype{var}}
\newcommand\semt{\iatype{sem}}
\newcommand\ctx{\mathcal{C}}
\newcommand\iaterm[1]{{\bf #1}}
\newcommand\ia{\mathbf{FA}}
\newcommand\fa{\mathbf{FA}}
\newcommand\oa{\mathbf{OA}}
\newcommand\pq{\mathbf{PQ}}
\newcommand\mul[1]{\mathfrak{M}(#1)}
%\newcommand\iq{\mathbf{IQ}}
%\newcommand\ld{\mathbf{LD}}
\newcommand{\aasg}{\,\raisebox{0.065ex}{:}{=}\,}
%%\newcommand\assg[2]{#1\,\raisebox{0.065ex}{:}{=}\,#2}
\newcommand\assg[2]{#1\aasg#2}
\newcommand\deref[1]{!#1}
\newcommand\while[2]{\iaterm{while}\,#1\,\iaterm{do}\,#2}
\newcommand\cond[3]{\iaterm{if}\,#1\,\iaterm{then}\,#2\,\iaterm{else}\,#3}
\newcommand\skipcom{\iaterm{skip}}
\newcommand\divcom{\iaterm{div}}
\newcommand\newin[2]{\iaterm{newvar}\,#1\,\iaterm{in}\,#2}
\newcommand\newvar[2]{\iaterm{newvar}\,#1\,\iaterm{in}\,#2}
\newcommand\newsem[2]{\iaterm{newsem}\,#1\,\iaterm{in}\,#2}
\newcommand\grb[1]{\iaterm{grab}(#1)}
\newcommand\rls[1]{\iaterm{release}(#1)}
\newcommand\mkvar[2]{\iaterm{mkvar}(#1,#2)}
\newcommand\mksem[2]{\iaterm{mksem}(#1,#2)}
\newcommand\arop[1]{\mathbf{op}(#1)}
\newcommand\vvec[1]{\overrightarrow{#1}}
\newcommand\mem{\mathcal{V}}
\newcommand\mss{\hspace*{-2mm}}
\newcommand{\astep}[4]{\mem\vdash #2,\,#1 &\longrightarrow & #4,\,#3}
\newcommand{\step}[4]{\mem\vdash #2,\,#1\longrightarrow #4,\,#3}
\newcommand{\sqsubsim}{\,\raisebox{-.5ex}{$\stackrel{\textstyle\sqsubset}{\scriptstyle{\sim}}$}\,}
\newcommand{\sqsubsima}[1]{\,\raisebox{-.5ex}{$\stackrel{\textstyle\sqsubset}{\scriptstyle{\sim}}$}_{#1}\,}
\newcommand\parc{||}


%GS MACROS

\newcommand\moveset{{\mathcal{M}}}
\newcommand\move[1]{\mathsf{#1}}
\newcommand\mread{\move{read}}
\newcommand\mwrite[1]{\move{write}(#1)}
\newcommand\mok{\move{ok}}
\newcommand\mrun{\move{run}}
\newcommand\mdone{\move{done}}
\newcommand\zint{\move{0}}
\newcommand\zmax{\move{\mathsf{max}}}
\newcommand\mrls{\move{rls}}
\newcommand\mgrb{\move{grb}}
\newcommand\mq{\move{q}}
\newcommand\mi{\move{i}}
\newcommand\ma{\move{i}}
\newcommand\man{\move{a}}
\newcommand\wait{\mathsf{WAIT}}
\newcommand\fork{\mathsf{FORK}}
\newcommand\truncate[2]{{#1 \restriction #2}}
\newcommand{\comp}[1]{\textsf{comp}(#1)}

\newcommand\justf[3][]{\nccurve[arrowsize=3pt,nodesep=.5pt,offsetB=-2pt,linewidth=0.8pt,angleA=110,angleB=30,linecolor=darkgray#1]{->}{#2}{#3}}

\newcommand\justg[3][]{\nccurve[arrowsize=3pt,nodesep=.5pt,offsetB=-2pt,linewidth=0.8pt,angleA=130,angleB=30,linecolor=darkgray#1]{->}{#2}{#3}}

\newcommand\justh[3][]{\nccurve[arrowsize=3pt,nodesep=.5pt,offsetB=-2pt,linewidth=0.8pt,angleA=130,angleB=30,linecolor=darkgray#1]{->}{#2}{#3}}

\newcommand\justj[3][]{\nccurve[arrowsize=3pt,nodesep=.5pt,offsetB=-2pt,linewidth=0.8pt,angleA=160,angleB=30,linecolor=darkgray#1]{->}{#2}{#3}}

\newcommand\justk[3][]{\nccurve[arrowsize=3pt,nodesep=.5pt,offsetB=-2pt,linewidth=0.8pt,angleA=145,angleB=30,linecolor=darkgray#1]{->}{#2}{#3}}

\newcommand\justn[4][]{\nccurve[arrowsize=3pt,nodesep=.5pt,offsetB=-2pt,linewidth=0.8pt,angleA=#4,angleB=30,linecolor=darkgray#1]{->}{#2}{#3}}


\newcommand\Q{\mathsf{Q}}
\newcommand\A{\mathsf{A}}

\newcommand{\hsep}{\noindent\makebox[\linewidth]{\rule{\linewidth}{0.4pt}}}