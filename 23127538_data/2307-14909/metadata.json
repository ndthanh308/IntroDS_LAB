{
  "title": "Targeted Static Analysis for OCaml C Stubs: eliminating gremlins from the code",
  "authors": [
    "Edwin Török"
  ],
  "submission_date": "2023-07-27T14:49:52+00:00",
  "revised_dates": [
    "2023-07-28T14:32:06+00:00"
  ],
  "abstract": "Migration to OCaml 5 requires updating a lot of C bindings due to the removal of naked pointer support. Writing OCaml user-defined primitives in C is a necessity, but is unsafe and error-prone. It does not benefit from either OCaml's or C's type checking, and existing C static analysers are not aware of the OCaml GC safety rules, and cannot infer them from existing macros alone.The alternative is automatically generating C stubs, which requires correctly managing value lifetimes. Having a static analyser for OCaml to C interfaces is useful outside the OCaml 5 porting effort too.\n  After some motivating examples of real bugs in C bindings a static analyser is presented that finds these known classes of bugs. The tool works on the OCaml abstract parse and typed trees, and generates a header file and a caller model. Together with a simplified model of the OCaml runtime this is used as input to a static analysis framework, Goblint. An analysis is developed that tracks dereferences of OCaml values, and together with the existing framework reports incorrect dereferences. An example is shown how to extend the analysis to cover more safety properties.\n  The tools and runtime models are generic and could be reused with other static analysis tools.",
  "categories": [
    "cs.PL"
  ],
  "primary_category": "cs.PL",
  "doi": null,
  "journal_ref": null,
  "arxiv_id": "2307.14909",
  "pdf_url": "https://arxiv.org/pdf/2307.14909v2",
  "comment": "submitted to the OCaml 2023 workshop added references about OCaml/Rust interop and XenServer origins",
  "num_versions": null,
  "size_before_bytes": 187466,
  "size_after_bytes": 172579
}