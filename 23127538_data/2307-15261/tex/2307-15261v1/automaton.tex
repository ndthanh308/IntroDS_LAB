
\newcommand{\convexpath}[2]{
[   
    create hullnodes/.code={
        \global\edef\namelist{#1}
        \foreach [count=\counter] \nodename in \namelist {
            \global\edef\numberofnodes{\counter}
            \node at (\nodename) [draw=none,name=hullnode\counter] {};
        }
        \node at (hullnode\numberofnodes) [name=hullnode0,draw=none] {};
        \pgfmathtruncatemacro\lastnumber{\numberofnodes+1}
        \node at (hullnode1) [name=hullnode\lastnumber,draw=none] {};
    },
    create hullnodes
]
($(hullnode1)!#2!-90:(hullnode0)$)
\foreach [
    evaluate=\currentnode as \previousnode using \currentnode-1,
    evaluate=\currentnode as \nextnode using \currentnode+1
    ] \currentnode in {1,...,\numberofnodes} {
-- ($(hullnode\currentnode)!#2!-90:(hullnode\previousnode)$)
  let \p1 = ($(hullnode\currentnode)!#2!-90:(hullnode\previousnode) - (hullnode\currentnode)$),
    \n1 = {atan2(\y1,\x1)},
    \p2 = ($(hullnode\currentnode)!#2!90:(hullnode\nextnode) - (hullnode\currentnode)$),
    \n2 = {atan2(\y2,\x2)},
    \n{delta} = {-Mod(\n1-\n2,360)}
  in 
    {arc [start angle=\n1, delta angle=\n{delta}, radius=#2]}
}
-- cycle
}

\newcommand{\hobbyconvexpath}[2]{
[   
    create hobbyhullnodes/.code={
        \global\edef\namelist{#1}
        \foreach [count=\counter] \nodename in \namelist {
            \global\edef\numberofnodes{\counter}
            \node at (\nodename)
[draw=none,name=hobbyhullnode\counter] {};
        }
        \node at (hobbyhullnode\numberofnodes)
[name=hobbyhullnode0,draw=none] {};
        \pgfmathtruncatemacro\lastnumber{\numberofnodes+1}
        \node at (hobbyhullnode1)
[name=hobbyhullnode\lastnumber,draw=none] {};
    },
    create hobbyhullnodes
]
($(hobbyhullnode1)!#2!-90:(hobbyhullnode0)$)
\pgfextra{
  \gdef\hullpath{}
\foreach [
    evaluate=\currentnode as \previousnode using int(\currentnode-1),
    evaluate=\currentnode as \nextnode using int(\currentnode+1)
    ] \currentnode in {1,...,\numberofnodes} {
    \ifnum\currentnode=1\relax
    \xdef\hullpath{([closed=true]$(hobbyhullnode\currentnode)!#2!180:(hobbyhullnode\previousnode)$)
  ..($(hobbyhullnode\nextnode)!0.5!(hobbyhullnode\currentnode)$)}
    \else
    \xdef\hullpath{\hullpath
  ..($(hobbyhullnode\currentnode)!#2!180:(hobbyhullnode\previousnode)$)
  ..($(hobbyhullnode\nextnode)!0.5!(hobbyhullnode\currentnode)$)}
    \fi
    \ifx\currentnode\numberofnodes
    \else
    \xdef\hullpath{\hullpath
  ..($(hobbyhullnode\nextnode)!#2!-90:(hobbyhullnode\currentnode)$)}
    \fi
}
}
\hullpath
}


\newcommand*{\colorsetbkwh}[1]{
    \ifthenelse{\equal{#1}{clean}}{\colorlet{NodeTextColor}{black}}{\colorlet{NodeTextColor}{white}}
    \ifthenelse{\equal{#1}{clean}}{\colorlet{NodeFillColor}{white}}{\colorlet{NodeFillColor}{black}}
}
\newcommand{\partitioningexample}[6]{
    \begin{tikzpicture}[
        baseline=-0.8cm,
        ->,  % makes the edges directed
        node distance=5cm, % specifies the minimum distance between two nodes. Change if n
        every state/.style={thick, fill=gray!10}, % sets the properties for each ’state’ n
        initial text=$ $, % sets the text that appears on the start arrow
        thick,
        scale=0.32, % the total size
        every node/.style={transform shape, font=\huge},
        every edge/.append style={transform shape},
        use Hobby shortcut
        %every loop/.style={scale=3}
    ]
        % x
        \colorsetbkwh{#2}
        \node[state, text=NodeTextColor, fill=NodeFillColor] (x) {$x$};
        % y
        \colorsetbkwh{#3}
        \node[state, above right of=x, yshift=-2.4cm, text=NodeTextColor, fill=NodeFillColor] (y) {$y$};
        % w
        \colorsetbkwh{#5}
        \node[state, below right of=y, xshift=-2.7cm, accepting, text=NodeTextColor, fill=NodeFillColor] (w) {$w$};
        % z
        \colorsetbkwh{#4}
        \node[state, left of=w, yshift=-2.8cm, xshift=2.9cm, text=NodeTextColor, fill=NodeFillColor] (z) {$z$};
        % v
        \colorsetbkwh{#6}
        \node[state, below of=x, yshift=1cm, text=NodeTextColor, fill=NodeFillColor] (v) {$v$};
        \draw   (x) edge[above, bend left] node{$a$} (y)
        (y) edge[above, bend left=10] node{$a$} (x)
        (w) edge[above, loop right=10cm, min distance=10mm,in=-30, out=30] node{$a$} (w)
        (w) edge[above, bend left] node{$a$} (z)
        (x) edge[above] node{$b$} (z)
        (y) edge[above, below, left=0.3] node{$b$} (z)
        (x) edge[above, bend left=5] node{$b$} (w)
        (y) edge[above, bend left] node{$b$} (w)
        (v) edge[above] node{$b$} (z)
        (z) edge[above, bend left=5] node{$b$} (w)
        (v) edge[above, loop, min distance=10mm,out=60,in=120] node{$a$} (v) ;
        {#1}
    \end{tikzpicture}
}
