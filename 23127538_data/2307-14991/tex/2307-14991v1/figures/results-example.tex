\newsavebox\boxJavaCode
\begin{lrbox}{\boxJavaCode}
  \begin{lstlisting}[language=java-pretty, numbers=left]
      public static Document parseBodyFragment(String bodyHtml, String baseUri) {
        ...
        List <Node> nodeList = parseFragment(bodyHtml, body, baseUri);
        Node[] nodes = nodeList.toArray(new Node[0]);
        - for (int i = nodes.length - 1; i > (-w<)nodeList.size()(>w-); i--) {
        + for (int i = nodes.length - 1; i > (+w<)0(>w+); i--) {
            nodes[i].remove();
        }
        ...
      }
  \end{lstlisting}
\end{lrbox}

\newsavebox\boxCsExample
\begin{lrbox}{\boxCsExample}
  \begin{lstlisting}[language=java-pretty, numbers=left]
      public static Document ParseBodyFragment(String bodyHtml, String baseUri) {
        ...
        IList <iText.StyledXmlParser.Jsoup.Nodes.Node> nodeList = ParseFragment(bodyHtml, body, baseUri);
        iText.StyledXmlParser.Jsoup.Nodes.Node[] nodes = nodeList.ToArray(new iText.StyledXmlParser.Jsoup.Nodes.Node[nodeList.Count]);
        for (int i = nodes.Length - 1; i > nodeList.Count; i--) {
            nodes[i].Remove();
        }
        ...
      }
  \end{lstlisting}
\end{lrbox}

\newsavebox\boxCsEditTranslationExample
\begin{lrbox}{\boxCsEditTranslationExample}
  \begin{lstlisting}[language=java-pretty, numbers=left]
      ...
      - for (int i = nodes.Length - 1; i > (-w<)nodeList.Count(>w-); i--) {
      + for (int i = nodes.Length - 1; i > (+w<)0(>w+); i--) {
      ...
  \end{lstlisting}
\end{lrbox}

\newsavebox\boxCsUpdateExample
\begin{lrbox}{\boxCsUpdateExample}
  \begin{lstlisting}[language=java-pretty, numbers=left]
      ...
      - iText.StyledXmlParser.Jsoup.Nodes.Node[] nodes = nodeList.ToArray(new iText.StyledXmlParser.Jsoup.Nodes.Node[(-w<)nodeList.Count(>w-)]);
      + iText.StyledXmlParser.Jsoup.Nodes.Node[] nodes = nodeList.ToArray(new iText.StyledXmlParser.Jsoup.Nodes.Node[(+w<)0(>w+)]);
      - for (int i = nodes.Length - 1; i > (-w<)nodeList.Count(>w-); i--) {
      + for (int i = nodes.Length - 1; i > (+w<)0(>w+); i--) {
      ...
  \end{lstlisting}
\end{lrbox}

\newsavebox\boxCsTranslation
\begin{lrbox}{\boxCsTranslation}
  \begin{lstlisting}[language=java-pretty, numbers=left]
      ...
      - (-w<)iText.StyledXmlParser.Jsoup.Nodes.(>w-)Node[] nodes = nodeList.ToArray(new (-w<)iText.StyledXmlParser.Jsoup.Nodes.(>w-)Node[(-w<)nodeList.Count(>w-)]);
      + Node[] nodes = nodeList.ToArray(new Node[(+w<)0(>w+)]);
      - for (int i = nodes.Length - 1; i > (-w<)nodeList.Count(>w-); i--) {
      + for (int i = nodes.Length - 1; i > (+w<)0(>w+); i--) {
      ...
  \end{lstlisting}
\end{lrbox}

\begin{tikzpicture}[
    line width=0.4pt,
    node distance=0ex and 0em,
    every node/.style={scale=1},
    gridBox/.style={rectangle, opacity=0, draw=red},
    box/.style={rectangle, draw=black, inner sep=2pt, font=\small},
    rounded box/.style={rectangle, rounded corners, draw=black, inner sep=2pt, font=\small},
    anno/.style={font=\footnotesize},
]

    \DefMacro{wCodeBox}{46em}
    \DefMacro{hCodeBox}{19ex}
    \DefMacro{hJavaCodeBox}{23ex}
    \DefMacro{hCsCodeBox}{21ex}
    \DefMacro{hCsEditTranslationCodeBox}{10ex}
    \DefMacro{hCsUpdateCodeBox}{14ex}
    \DefMacro{hCsTranslationBox}{14ex}
    \DefMacro{ModelNameY}{-10pt}
    \DefMacro{color-box-w}{45.5em}
    
    \node (g-Old) at (0,0) [box, minimum width=\UseMacro{wCodeBox}, minimum height=\UseMacro{hJavaCodeBox}] {};
    \node (j-del) at(0, 0.1)[box, minimum width=\UseMacro{color-box-w}, minimum height=2ex, draw=none, fill=\UseMacro{git-del-color}, ] {};
    \node (j-add) at(0, -0.17)[box, minimum width=\UseMacro{color-box-w}, minimum height=2ex, draw=none, fill=\UseMacro{git-add-color}, ] {};
    \node (b-Old) [right = -0.3 of g-Old.west] [] {\usebox\boxJavaCode};
    \node (b-OldText) [below left = \UseMacro{ModelNameY} and 1pt of g-Old.south east] [box, scale=0.8] {\bf Java Change\phantom{p\hskip -.6em}};
    \node (g-New) [below = 0 of g-Old.south] [box, minimum width=\UseMacro{wCodeBox}, minimum height=\UseMacro{hCsCodeBox}] {};
    \node (b-New) [right = -0.3 of g-New.west] [] {\usebox\boxCsExample};
    \node (box-edit-translation) [below = 0 of g-New.south] [box, minimum width=\UseMacro{wCodeBox}, minimum height=\UseMacro{hCsEditTranslationCodeBox}] {};
    \node (c-del-0) at(0, -5)[box, minimum width=\UseMacro{color-box-w}, minimum height=2ex, draw=none, fill=\UseMacro{git-del-color}, ] {};
    \node (c-add-0) at(0, -5.28)[box, minimum width=\UseMacro{color-box-w}, minimum height=2ex, draw=none, fill=\UseMacro{git-add-color}, ] {};
    \node (edit-translatioin) [right = -0.3 of box-edit-translation.west] [] {\usebox\boxCsEditTranslationExample};
    \node (box-update) [below = 0 of box-edit-translation.south] [box, minimum width=\UseMacro{wCodeBox}, minimum height=\UseMacro{hCsUpdateCodeBox}] {};
    \node (c-del-1) at(0, -6.37)[box, minimum width=\UseMacro{color-box-w}, minimum height=2ex, draw=none, fill=\UseMacro{git-del-color}, ] {};
    \node (c-add-1) at(0, -6.65)[box, minimum width=\UseMacro{color-box-w}, minimum height=2ex, draw=none, fill=\UseMacro{git-add-color}, ] {};
    \node (c-del-2) at(0, -6.93)[box, minimum width=\UseMacro{color-box-w}, minimum height=2ex, draw=none, fill=\UseMacro{git-del-color}, ] {};
    \node (c-add-2) at(0, -7.21)[box, minimum width=\UseMacro{color-box-w}, minimum height=2ex, draw=none, fill=\UseMacro{git-add-color}, ] {};
    \node (update) [right = -0.3 of box-update.west] [] {\usebox\boxCsUpdateExample};
    \node (box-translation) [below = 0 of box-update.south] [box, minimum width=\UseMacro{wCodeBox}, minimum height=\UseMacro{hCsTranslationBox}] {};
    \node (c-del-3) at(0, -8.27)[box, minimum width=\UseMacro{color-box-w}, minimum height=2ex, draw=none, fill=\UseMacro{git-del-color}, ] {};
    \node (c-add-3) at(0, -8.55)[box, minimum width=\UseMacro{color-box-w}, minimum height=2ex, draw=none, fill=\UseMacro{git-add-color}, ] {};
    \node (c-del-4) at(0, -8.83)[box, minimum width=\UseMacro{color-box-w}, minimum height=2ex, draw=none, fill=\UseMacro{git-del-color}, ] {};
    \node (c-add-4) at(0, -9.11)[box, minimum width=\UseMacro{color-box-w}, minimum height=2ex, draw=none, fill=\UseMacro{git-add-color}, ] {};
    \node (translation) [right = -0.3 of box-translation.west] [] {\usebox\boxCsTranslation};
    \node (b-newtext) [below left = -9pt and 1pt of g-New.south east] [box, draw, scale=0.8] {\bf C\# Old Method};
    \node (b-newtext) [below left = -10pt and 1pt of box-edit-translation.south east] [box, draw, scale=0.8] {\bf \DeltaTool (\edittranslation) Prediction\phantom{p\hskip -.6em}};
    \node (b-newtext) [below left = \UseMacro{ModelNameY} and 1pt of box-update.south east] [box, draw, scale=0.8] {\bf \UseMacro{CodeT5Up} Prediction\phantom{p\hskip -.6em}};
    \node (b-newtext) [below left = \UseMacro{ModelNameY} and 1pt of box-translation.south east] [box, draw, scale=0.8] {\bf \translationModel Prediction\phantom{p\hskip -.6em}};
    
\end{tikzpicture}