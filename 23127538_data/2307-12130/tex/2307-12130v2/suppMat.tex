\setcounter{figure}{0}  % set the initial figure number to N+1
\setcounter{table}{0}   % set the initial table number to N+1
\setcounter{equation}{0}   % set the initial table number to N+1
\setcounter{section}{0}   % set the initial table number to N+1
\onecolumn
\makeatletter
\renewcommand{\thefigure}{S\@arabic\c@figure}
\renewcommand{\theequation}{S\@arabic\c@equation}
\renewcommand{\thesection}{S\@arabic\c@section}
\makeatother
% \markboth{Transactions on Image Processing}{}
\begin{center}
    {\Large \textbf{Supplementary material for:\\\titleOfArticle}}\\
    \href{mailto:navotoz@mail.tau.ac.il}{Navot Oz},
    \href{mailto:sochen@math.tau.ac.il}{Nir Sochen},
    \href{mailto:mend@eng.tau.ac.il}{David Mendelovich},
    and \href{mailto:iftach@volcani.agri.gov.il}{Iftach Klapp}
    
\end{center}

\section{Characterization of the nonuniformity}\label{sec:supp:characterization}
    \noindent The dataset used for characterization can be found \href{https://drive.google.com/drive/folders/1tu_hMJR1SPunttWM65EyuCs7DJs2K6ah?usp=drive_link}{Here}.
    \input{content/suppMat/characterization.tex}
\FloatBarrier

\section{Network}\label{sec:supp:network}
    The nonuniformity is space-variant (\cref{sec:intro}), so the network needs a large receptive field to correct the entire image. The U-Net architecture is a tradeoff between the receptive field of the network and the computational requirements. $\nLevels$ is the coefficient of the spatial resolution and $\nChannels$ is the coefficient for the number of channels. At each level, the spatial resolution decreases by $2^\nLevels$\ and the number of channels increases by $2^\nChannels$. The deeper levels of the network increase the receptive field because each convolution kernel affects a larger area in the original frame. The computation requirements decrease by a factor of 2 for each encoder level~\cite{Oz2020}.
    % Figure environment removed
\FloatBarrier

\section{List of figures}
\begin{enumerate}
    \item \cref{jeep,shed,building,shed2,building_sunlight,warehouse} shows the results of the temperature estimation on real-world data. The temperature map taken with the \scientificCamera serves as the gray background, and the colored map is the difference between the results of GxPD with the temperature map. The number in white as the MAE in $\circ C$ between the temperature map and the results of GxPD.
    \item \cref{jeep_real,shed_real,building_real,shed2_real,building_sunlight_real,warehouse_tau_real} are some of the original frames taken by the \taucamera.
    \item \cref{gt_lab,gt_shed,gt_building_sunlight,gt_warehouse} are some of the ground truth frames taken by the \scientificCamera. Notice that not all of the original frames could be displayed due to privacy limitations.
    \item \cref{fig:supp:patch:1,fig:supp:patch:2,fig:supp:patch:3,fig:supp:patch:4,fig:supp:patch:5,fig:supp:patch:6,fig:supp:patch:7,fig:supp:patch:8,fig:supp:patch:9,fig:supp:patch:10,fig:supp:patch:11,fig:supp:patch:12} are results of our GxPD model. A zoomed patch from the sample is presented (surrounded by a red square). From left to right - (a) the input sample, (b) the ground truth temperature map, (c) GxPD (ours), (d) ADMIRE~\cite{admire} (e) He et al.~\cite{He2018} and (f) SNRWDNN~\cite{snrwdnn}.
    \item \cref{fig:results:convergence} shows the convergence of the training for both E2E and GxPD networks.
    \item \cref{tab:hyperparams} are the hyperparameters of the final networks used for all the metrics and figures.
    \item \cref{tab:cameraParams} are the parameters of the \taucamera used throughout the experiments.
\end{enumerate}


\section{Data}
The training dataset was $12,897$ frames of different agricultural fields with dimensions $640\times 480$ pixels.
The validation set was comprised of $4,723$ frames. All frames were of different agricultural fields in Israel, taken from an unmanned aerial vehicle (UAV) flying $70_m-100_m$ above the ground.
369 frames of corn fields taken in \textit{Tzora} village,
646 frames of peach trees taken in \textit{Nir Eliyahu} village,
$1,162$ frames of wheat fields taken in \textit{Neve Yaar} research station,
372 frames of vineyards taken in \textit{Mevo Beitar} village,
765 frames of vineyards taken in \textit{Mevo Beitar} village on a different day,
$1,048$ frames of cotton fields taken in \textit{Neve Yaar} research station,
and 361 frames of wheat fields taken in \textit{Gilat} research station - for a total of $4,723$ frames for validation.

The collection of data for the comparison between \scientificCamera and \taucamera is elaborated in the article.

\begin{table}[h]
    \centering
    \caption{Hyperparameters used in end-to-end (E2E) and physically constrained (GxPD) networks.}
    \begin{tabular}{|c|c|c|}
        \hline
        Network                               & E2E                                   & GxPD                          \\
        \hline
        $\nChannels$ (number of filters)      & \multicolumn{2}{c|}{32}                                               \\
        \hline
        $\nLevels$ (number of layers in UNet) & \multicolumn{2}{c|}{6}                                                \\
        \hline
        Normalization                         & None                                  & Instance \cite{instance_norm} \\
        \hline
        Activation                            & \multicolumn{2}{c|}{GeLU \cite{GeLU}}                                 \\
        \hline
        $\beta$ (DSSIM loss)                  & \multicolumn{2}{c|}{0.01}                                             \\
        \hline
        $\gamma$ (TV loss)                    & 0.001                                 & 0.0001                        \\
        \hline
    \end{tabular}
    \label{tab:hyperparams}
\end{table}
\begin{table}[h]
    \centering
    \caption{The FLIR \taucamera settings as described in Tau2 Quark Software IDD}
    \begin{tabular}{|c|c||c|c|}
        \hline
        Function   & State  & Function        & State                  \\
        \hline\hline
        FFC Mode   & Auto   & FPS             & 4 ($60_{Hz}$)          \\
        \hline
        FFC Period & 0      & CMOS Depth      & 0 ($14_{bit}$ w/o AGC) \\
        \hline
        Isotherm   & 0      & LVDS            & 0                      \\
        \hline
        DDE        & 0      & LVDS Depth      & 0 ($14_{bit}$)         \\
        \hline
        T-Linear   & 0      & XP              & 2 ($14_{bit}$)         \\
        \hline
        AGC        & Manual & Brightness Bias & 0                      \\
        \hline
        Contrast   & 0      & Brightness      & 0                      \\
        \hline
        ACE        & 0      & SSO             & 0                      \\
        \hline
        Gain       & High   &                 &                        \\
        \hline
    \end{tabular}
    \label{tab:cameraParams}
\end{table}

% Figure environment removed
% Figure environment removed
% Figure environment removed
% Figure environment removed
% Figure environment removed
% Figure environment removed
% Figure environment removed
% Figure environment removed
% Figure environment removed
% Figure environment removed
% Figure environment removed
% Figure environment removed
% Figure environment removed
% Figure environment removed
% Figure environment removed
% Figure environment removed

% Figure environment removed
% Figure environment removed
% Figure environment removed
% Figure environment removed
% Figure environment removed
% Figure environment removed
% Figure environment removed
% Figure environment removed
% Figure environment removed
% Figure environment removed
% Figure environment removed
% Figure environment removed

% Figure environment removed
