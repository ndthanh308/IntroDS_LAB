\Xpolish{In this work we study the coding problem by considering the single pixel camera as a specific implementation. This system provides a well studied example of coding and is therefore a good toy model to work with. Our findings, however are general and should apply to any form of coding. \ynote{can mention spectral simulations if they are included}}
{Our study on coding focuses on the single pixel camera, which serves as a specific implementation that provides a well-studied example of coding. We use this system as a toy model to investigate the problem, but our findings have broader implications and can be generalized to any form of coding.}

\Xpolish{A single-pixel sensor, such as a photon multiplier tube (PMT), is capable of detecting the total number of photons in a measurement but lacks the ability to provide spatial information. In order to obtain this information, a Digital Micromirror Device (DMD) can be used to spatially code the signal. The DMD consists of millions of small tunable mirrors placed at the image plane of the camera objective lens. Each mirror reflects photons photons from a pixel in the image one of two separate detectors. During a measurement, the sensor counts the photons from the DMD
micromirrors, or pixels, that are facing it, providing spatial information about the distribution of photons within the field of view. }
{\Xhide{While a single-pixel sensor like a photon multiplier tube (PMT) can detect the total number of photons in a measurement, it cannot provide spatial information. A single pixel camera uses a Digital Micromirror Device (DMD) located at the image plane of the camera objective lens to code the signal.}}


\subsection{Model Formulation}\label{ssec:ModelFormulation}

\Xhide{Supposing the image of the field of view consists of $N \in \IZ^+$ pixels and is measured by $m \in \IZ^+$ masks\Xhide{\bnote{We have not introduced the language mask yet.}}, 
  the single-pixel-sensing process, if ignoring noise, can be expressed as the following equation 
 \begin{equation}
    \label{eqn:NoiselessMeasurement}
    \begin{aligned}
        \B{y} &=  \B{M x}
    \end{aligned}
\end{equation}
, where $\B{x} \in \IR^{N \times 1}$ is the image representation of the field of view, $\B{M} \in \IR^{m \times N}$ is the sensing masks\Xhide{or in other words, weighing design (WD) \cite{harwit1979hadamard} \bnote{not sure if language from 1979 is useful. I have not heard of weighing design},} linearly projecting the field of view, and $\B{y} \in \IR^{m \times 1}$ is the corresponding photon counts \cite{willet2009CSPoisson}.}

Recall the model described by Equation \ref{eqn:NoiselessMeasurement}. \Xpolish{The sensing matrix $\B{M}$ can be generated by either computational or non-computational imaging methods. Their primary difference is that computational imaging requires additional steps of optical coding and computational decoding in order to capture and process the image \cite{cossairt2012does}. Non-computational method, or Raster scan, involves measuring each pixel sequentially \cite{duarte2008CS} and $\B{M} = \B{I}$ which is an identity matrix. On the other hand, computational methods measure a combination of pixels simultaneously and can be further classified based on the type of mask used.\Xhide{ In this paper, we will arrange the various coding strategies based on their mask generation techniques.
\bnote{consistent language: maybe we should switch "Mask" to "Code" everywhere in the text}} For example, Hadamard matrices composed of $\pm 1$ have been proved as the best coding strategy for reconstruction by Hotelling in 1944 under the AGN \cite{harwit1979hadamard}. A useful feature of computational methods is the compressibility.\ynote{I wouldn't say the methods are compressible. I think what you are trying to say is that computational methods can take advantage of the compressibility of the data.} If the signal is sparse in the subspace of $\B{M}$, it is likely that we only need several vectors of $\B{M}$.}
{\ynote{\checkednote{We distinguish different types of sensing matrixes: A diagonal measurement matrix corresponds to a raster scan where the image is measured pixel by pixel. No computation is required to invert $\B{M}$ and reconstruct the image. We call a measurement with a diagonal $\B{M}$ a non-computational measurement. ...}}\bnote{\checkednote{Is non-computational/computational the best language? Maybe non-coded/coded measurements is more in line with the rest of our language.}  }The sensing matrix $\B{M}$ can be generated using either computational or non-computational imaging methods. The key difference between the two is that computational imaging involves additional steps of optical coding and computational decoding to capture and process the image \cite{cossairt2012does}, while non-computational method, i.e. Raster scan, \ynote{\checkednote{are there other non-computational methods????}}, involves measuring each pixel sequentially \cite{duarte2008CS}. In the case of Raster scan, $\B{M} = \B{I}$, which is an identity matrix. In contrast, computational methods measure a combination of pixels simultaneously and can be further classified based on the type of masks used. For example, Hadamard matrices composed of $\pm 1$ have been shown to be the optimal coding strategy for reconstruction under the AGN \cite{harwit1979hadamard}. A useful feature of computational methods is their compressibility. If the signal is sparse in the subspace of $\B{M}$, it is likely that only a few vectors of $\B{M}$ are needed.}

% Figure environment removed


\Xhide{\bnote{Use direct measurement / trivial measurement}}

\Xhide{
\begin{enumerate}
    \item Static strategies: 
    Masks are predetermined and fixed. \ynote{aren't they fixed for compressive strategies as well??? Maybe you are trying to distinguish between selective and non-selective masks?}
    \begin{enumerate}
        \item Non-compressible strategies \bnote{(Full rank)}
        \begin{enumerate}
            \item Raster Scan (RS). In this strategy, only one pixel will be scanned in each measurement. Thus, $\B{M} = \B{I}$.
            \item Impulse Imaging (II). II captures the field of view by a pixel array. In this case, each pixel gets $N$ times as much as the exposure time of RS. Mathematically, $\B{M} = N\B{I}$. Alternatively, we can treat it as another RS with $N$ times as many photons. The II works as the baseline for the comparisons with other strategies. 
            \item Hadamard Basis (HB). In this strategy, we choose the 2-D Walsh-Hadamard matrix $\B{H}$ as the mask basis. Hadamard matrices composed of $\pm 1$ has been proved as the best coding strategy \bnote{WD is only mentioned once way earlier, probably better to just change this language.} for reconstruction by Hotelling in 1944 under the AGN.
            \Xhide{\bnote{next part of this sentence is confusing}
            when noise is independent from this signal 
            such as the AGN\cite{cossairt2012does,harwit1979hadamard,wuttig2005optimal}.}
        \end{enumerate}        
        \item Compressible strategies
        \begin{enumerate}
            \item Low-Frequency Truncated Hadamard (LFTH). Given a default Walsh-Hadamard matrix $\B{H}$ and  pick first several rows of it as $\B{M}$. \Xhide{\bnote{switching to low freq}}
            % \item Low-Frequency-Truncated Hadamard (LFTH). Given a default Walsh-Hadamard matrix $\B{H}$ and only keep the first several rows as $\B{M}$.
            % \item Sorted-Truncated Hadamard (STH). Re-order the rows according to their correlation coefficients with the mean of training images. More relevant ones are picked first.
            \item Hardware Principal Components Analysis (HPCA). The DMD displays the PCA components calculated from the training images. \bnote{this learns from data so should maybe go with the ONN? also we should mention this is a novel technique, and give some more explanation to what PCA is}
        \end{enumerate}
    \end{enumerate}    
    \item Selective Sensing\Xhide{Dynamic strategies \bnote{Dynamic is probably not a good name, "dynamic" makes me think the masks will be determined on the fly based on previous measurements}\ynote{Lets use the selective sensing vacabulary here that we introduce in the title.}}: Masks can be optimized based on the tasks.
    \begin{itemize}
        \item Optical Neural Networks (ONN).
    \end{itemize}
\end{enumerate}
}

  
\Xhide{
\rnote{should we ignore the LFTH and STH? And add Compressed sensing}
\ynote{is this really ne distinction we need to make? Key is wether or not we change the mask to adjust to the measurement (selective sensing), or we use a general mask.}
\begin{enumerate}
    \item Null-Prior: RS, II, and HB. It requires no information before measurements.
    % \item Reconstruction-Prior: RTH and LFTH. This prior is from the inductive bias for signal reconstruction that low frequencies components are more robust to noise regardless of the data. % it is wrong if not explaining the LFTH
    \item Reconstruction-Prior: RTH. This prior is based on the fact that the light throughput and SNR in each measurement are greater with fewer masks.
    \item Task-Specific-Prior: STH, HPCA, and ONN. This prior requires the features from training data of a specific task.
    % make plots based on the groups
\end{enumerate}  
\rnote{We now have several results: classification reconstruction plot on MNIST; freeze method; reconstruction on random patterns; what to include?}  \bnote{Reconstruction on random patterns needs to be in the section when we explain the ONN optimizer}
}


\Xpolish{In this project, we are primarily interested in finding the most optimal one among all common coding strategies. Different from common optimization problems, there are two main physical constraints when optically implementing equation}
{In this paper, our main objective is to identify the optimal coding strategy among various commonly used methods. However\Xhide{, unlike typical optimization problems}, we face two fundamental physical constraints when implementing the coding strategy optically, as expressed by Equation \ynote{\checkednote{I think any coding method in imaging has these constraints. Probably word it differently.}}}\bnote{\checkednote{Agree to reword. Many optimization and physical problems have constraints no need to overstate the problem, just mentioning that our physical constraints induce the following mathematical constraints may be enough.} }\ref{eqn:NoiselessMeasurement} \cite{neifeld2003dual, willet2009CSPoisson}. 

\begin{enumerate}
    \item\label{constraint:photonNumber} \textbf{Flux-preserving} \cite{willet2009CSPoisson}\Xhide{\bnote{Y: Should I use the same term as Rebecca?}}. The single-pixel imaging model involves the allocation of available photons among masks, as discussed in \cite{neifeld2003dual}. It is important to ensure that the mask basis $\B{M}$ does not produce additional photons through improper entries \cite{neifeld2003dual}. Mathematically, $\sup \sum_{i=1}^m M_{ij} = 1, \forall j \in \{1,2,\dots,N\}$ \cite{neifeld2003dual}.\Xhide{\bnote{Include what an improper entry is!} \bnote{A: this is not something we need to mention here. its obvious that the measurements have to be normalized correctly}}
    \item\label{constraint:negativeEntry} \textbf{Positivity-preserving} \cite{willet2009CSPoisson}. It is not possible to physically implement negative values for the masks $\B{M}$, as demonstrated in \cite{neifeld2003dual, willet2009CSPoisson}. 
\end{enumerate}




% \subsubsection{Photon Distribution Factor} \label{sssection:PDF}



\subsection{Model under Noise}

\Xpolish{Two noise models were investigated in this project. The first one is the AGN, or read noise, mainly stemming from thermal vibration of atoms at sensors. In this noise model, the equation \ref{eqn:NoiselessMeasurement} turns into 
\Xequa{
    \noisy{\B{y}} = \B{Mx} + \B{\epsilon} 
},
where $\B{\epsilon} \sim \AGN(\B{0}, \sigma^2\B{I})$ and the $\sigma$ is the standard deviation. The other is the Poisson noise, or shot noise, \Xhide{model for photon-counting systems\rnote{A:shot noise doesn't just exist in photon counting systems} \cite{willet2009CSPoisson} }originating from the statistical nature of photons \cite{boyat2015review} with the following form
\Xequa{
    \noisy{\B{y}} \sim \Poisson(\B{Mx})
}. Due to the constraint \ref{constraint:negativeEntry}, no entries in $\B{M}$ can be negative.}
{This project investigates two noise models. The first one is the additive Gaussian noise (AGN) or read noise, which mainly originates from thermal vibrations of atoms at sensors. In this noise model, Equation \ref{eqn:NoiselessMeasurement} becomes:
\Xequa{
\noisy{\B{y}} = \B{Mx} + \B{\epsilon}
}
, where $\B{\epsilon} \sim \AGN(\B{0}, \sigma^2\B{I})$, and $\sigma$ is the standard deviation. The other noise model is the Poisson noise or shot noise, which arises from the statistical nature of photons \cite{boyat2015review}. The measurement equation for this noise model is:
\Xequa{
\noisy{\B{y}} \sim \Poisson(\B{Mx})
\label{eqn:poisson_measurement}
}. It should be noted that the constraint \ref{constraint:negativeEntry} in Equation \ref{eqn:poisson_measurement} prohibits negative entries in $\B{M}$. \bnote{\checkednote{Not equation 2 it is constraint 2 maybe enumerate the constraints with greek numbering so as not to be confused with the equations? (I, II, III, ..?)}}
}


\Xhide{
Two noise models were investigated in this project. The first one is the 
% Additive White Gaussian Noise (AWGN)
AGN
, or read noise,  mainly stemming from thermal vibration of atoms at sensors \iffalse the imperfectness of sensors\fi \cite{boyat2015review} with the following form
% \subsubsection{Gaussian Noise Model}
\Xequa{
    \Xalign{
        \lambda\tilde{\B{y}^+} &\sim \mathcal{N}(\lambda \B{M}^+ \B{x} , \sigma^2 \B{I})\\
        \lambda\tilde{\B{y}^-} &\sim \mathcal{N}(\lambda \B{M}^- \B{x} , \sigma^2 \B{I})
    },
} 
% \subsubsection{Poisson Noise Model}
where the $\sigma$ is the standard deviation. The other is the Poisson noise, or shot noise, \Xhide{model for photon-counting systems\rnote{A:shot noise doesn't just exist in photon counting systems} \cite{willet2009CSPoisson} }originating from the statistical nature of photons \cite{boyat2015review} with the following form
\Xequa{
    \Xalign{
        \lambda\tilde{\B{y}^+} &\sim \mathcal{P}(\lambda \B{M}^+ \B{x})\\
        \lambda\tilde{\B{y}^-} &\sim \mathcal{P}(\lambda \B{M}^- \B{x})
    }.
}   
\bnote{This paragraph is somewhat confusing, and some of the ideas should maybe be before the equations.}  
Although we can obtain a negative number of photons from the difference between the two branches, the Poisson noise cannot be directly applied to these values. Otherwise, it violates the nature of Poisson distributions and the fact that Poisson noise appears in the sensors. On the contrary, noise should be considered in both branches independently.  
\bnote{Mention that this comes from the relevant equation in the dual branch section. }
Therefore, in the AGN model, the measurement $\lambda \tilde{\B{y}} \sim \mathcal{N}(\lambda \B{Mx}, 2\sigma^2 \B{I})$ with the dual-rail trick. But in the Poisson noise model, the measurement $\lambda \tilde{\B{y}} \sim \text{Skellam}(\lambda \B{M}^+ \B{x}, \lambda \B{M}^- \B{x})$ \cite{hwang2007skellam, gan2017skellam}. 
}

% \subsection{Scan Strategies with Different Priors}

% \bnote{We should maybe focus less on the term "single-pixel imaging" that is the way we show our results but maybe it obscures our main point.}

% \Xhide{\ynote{We already talked about single pixel imaging in the beginning. I think the figure could be introduced here along with the math model}
% Single-pixel imaging is a technique that involves both computational and non-computational methods. }
