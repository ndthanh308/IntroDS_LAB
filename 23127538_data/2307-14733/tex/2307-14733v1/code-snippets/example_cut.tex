public LoginResult login(String userName, String password) {
    User user = null;
    while(user == null) {
        try {
            user = dao.findUser(userName);
        } catch (TimeoutException e) { ... }
    }
    var hash = DigestUtil.sha1Hex(password);
    if (hash.equals(user.getPasswordHash())) {
        // success
    } else {
        // failure
    }
}