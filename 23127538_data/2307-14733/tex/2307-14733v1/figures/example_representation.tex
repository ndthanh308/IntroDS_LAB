\begin{tikzpicture}[scale=0.5, node distance=0.2cm and 0cm]
    \tikzstyle{def} = [rectangle,draw]
    \tikzstyle{stub} = [rectangle,draw]
    \tikzstyle{code} = [rectangle]
    \tikzstyle{use} = [draw,->,-latex]

    \node[def] (Def0) {\(\mathbf{Def_1}\)};
    \node[code, right=of Def0] (Def0c) {\(v_0 \leftarrow \code{"foo"}\)};

    \node[def, below=of Def0] (Def1) {\(\mathbf{Def_1}\)};
    \node[code, right=of Def1] (Def1c) {\(v_1 \leftarrow \code{new TimeoutException()}\)};

    \node[stub, below=of Def1] (Stub1) {\(\mathbf{Stub_1}\)};
    \node[code, right=of Stub1] (Stub1c) {\(\langle\code{dao}, \code{findUser}, [\textsf{Eq}(v_0)] \rangle \to \textsf{Throw}(v_1)\)};

    \node[stub, below=of Stub1] (Stub2) {\(\mathbf{Stub_2}\)};
    \node[code, right=of Stub2] (Stub2c) {\(\langle\code{dao}, \code{findUser}, [\textsf{Eq}(v_0)]\rangle \to \textsf{Return}(\code{user})\)};

    \node[def, below=of Stub2] (Def2) {\(\mathbf{Def_2}\)};
    \node[code, right=of Def2] (Def3c) {\(v_2 \leftarrow \code{"bar"}\)};

    \node[def, below=of Def2] (Def3) {\(\mathbf{Def_3}\)};
    \node[code, right=of Def3] (Def4c) {\(v_3 \leftarrow \code{DigestUtils.sha1Hex(}v_2\code{)}\)};

    \node[stub, below=of Def3] (Stub3) {\(\mathbf{Stub_2}\)};
    \node[code, right=of Stub3] (Stub3c) {\(\langle \code{user}, \code{getPasswordHash}, \emptyset \rangle \to \textsf{Return}(v_3)\)};

    \path[use] (Def1) -- (Stub1);
    \path[use] (Def2) -- (Def3);
    \path[use] (Def3) -- (Stub3);
    \path[use] (Def0) [out=-140, in=140] to (Stub1);
    \path[use] (Def0) [out=-140, in=140] to (Stub2);
\end{tikzpicture}