\begin{algorithm}[tp]
\caption{Secure $\softmax$ Protocol $\Pi_{\softmax}$}\label{protocol:softmax}
\begin{algorithmic}[1]
\REQUIRE
$P_i$ holds the 2-out-of-3 replicate secret share $\share{\x}_i$ for $i\in \{0,1,2\}$, and $\x$ is a vector of size $n$. 
\ENSURE
$P_i$ gets the 2-out-of-3 replicate secret share $\share{\y}_i$ for $i\in \{0,1,2\}$, where $\y=\softmax(\x)$.

\STATE $P_0$, $P_1$, and $P_2$ jointly compute
$\shareb{\mathbf{b}} = \Pi_{\mathsf{LT}}(T_{\exp}, \share{\x})$ and the maximum $\share{\bar{x}} = \Pi_{\mathsf{Max}}(\share{\x})$.

\STATE Parties locally computes $\share{\hat{\x}} = \share{\x} - \share{\bar{x}} - \epsilon$, and jointly compute $\share{\z_0} = 1+  \Pi_{\mathsf{Trunc}}^t(\share{\hat{\x}})$.

\FOR{$j=1,2,\dots, t$}
\STATE $\share{\z_j} = \Pi_{\mathsf{Square}}(\share{\z_{j-1}})$.
\ENDFOR

\STATE Parties locally compute $\share{z} = \sum_{i=1}^n \share{\z[i]}$ and jointly compute $\share{1/z} = \Pi_{\mathsf{Recip}}(\share{z})$.

\STATE Parties jointly compute $\share{\z / z} = \Pi_{\mathsf{Mul}}(\share{\z}, \share{1/z})$

\RETURN $\share{\y} = \Pi_{\mathsf{Mul}_{\mathsf{BA}}}( \shareb{\mathbf{b}}, \share{\z / z})$.

\end{algorithmic}
\end{algorithm}