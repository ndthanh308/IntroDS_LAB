
\ProvidesPackage{knottedMacros}

\usepackage{amsmath}

%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ diagrams, pictures
\usepackage[dvipsnames]{xcolor}
\definecolor{myred}{RGB}{181, 10, 10}
\definecolor{mygreen}{RGB}{	8,156,79 }

\usepackage{tikz,tikz-cd}
\usetikzlibrary{patterns,knots,arrows.meta,decorations.markings}
\tikzset{>={Straight Barb[scale=0.8]}}
\tikzcdset{
  cells={font=\everymath\expandafter{\the\everymath\displaystyle}},
  arrows={line width=0.6pt},
  diagrams={>={Straight Barb[scale=0.8]}},
  arrow style=tikz,
  every label/.append style = {font = \small},
  column sep/small=2em,
  column sep/normal=2.9em,
  column sep/large=3.6em,
  row sep/normal=2.2em,
}


%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~ COMMANDS ~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~ important
\newcommand{\RGR}{\Z[\pi\sm1]}      % reduced group ring
\newcommand{\Dax}{\mathsf{Dax}}     % (relative) Dax invariant

\newcommand{\FQ}{\mathsf{FQ}}       % Freedman-Quinn invariant

\newcommand{\fm}{\operatorname{fm}}

\newcommand{\U}{\mathrm{U}}  % unknot
\newcommand{\e}{\varepsilon}

\newcommand{\AS}{\mathsf{AS}}
\newcommand{\IHX}{\mathsf{IHX}}

\newcommand{\evrel}{\mathsf{ev}^{\mathsf{rel}}}

\newcommand{\fol}{\mathsf{fol}}
\newcommand{\col}{\mathsf{col}}

% lambdabar, source: https://tex.stackexchange.com/questions/96479/how-can-i-type-lambda-bar
\makeatletter
\newcommand{\lambdabar}{{\mathchoice
  {\smash@bar\textfont\displaystyle{0.25}{1.2}\lambda}
  {\smash@bar\textfont\textstyle{0.25}{1.2}\lambda}
  {\smash@bar\scriptfont\scriptstyle{0.25}{1.2}\lambda}
  {\smash@bar\scriptscriptfont\scriptscriptstyle{0.25}{1.2}\lambda}
}}
\newcommand{\smash@bar}[4]{%
  \smash{\rlap{\raisebox{-#3\fontdimen5#10}{$\m@th#2\mkern#4mu\mathchar'26$}}}%
}
\makeatother

% endpoints of J_0
\newcommand{\mytheta}{\uptheta}

%~~ shortcuts
\newcommand{\wt}{\widetilde}
\newcommand{\wh}{\widehat}
\newcommand{\ol}{\overline}
\newcommand{\ul}{\underline}

%~~ operators
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Map}{Map}
\DeclareMathOperator{\Emb}{Emb}
\newcommand{\Embp}{\Emb_\partial}
\DeclareMathOperator{\Imm}{Imm}
\DeclareMathOperator{\Emm}{\mathcal{E}mm}
\DeclareMathOperator{\Diff}{Diff}
\DeclareMathOperator{\Vect}{Vect}
\DeclareMathOperator{\coker}{coker}
\DeclareMathOperator{\im}{im}      % image

\DeclareMathOperator{\Lie}{\mathsf{Lie}}
\DeclareMathOperator{\Tree}{\mathsf{Tree}}

\DeclareMathOperator{\connsum}{\bf\#}

%~~ some spaces and groups
\newcommand{\Id}{\mathrm{Id}}       % identity object
\renewcommand{\S}{\mathbb{S}}  % sphere
% \newcommand{\ball}{\mathbb{B}} % 3-DIM BALL
\newcommand{\D}{\mathbb{D}} % disk
\DeclareRobustCommand{\HD}{\text{\reflectbox{$\mathsf{D}$}}} % half-disk
\newcommand{\I}{\mathbb{I}} % interval

\newcommand{\Z}{\mathbb{Z}} % integers
\newcommand{\Q}{\mathbb{Q}} % rationals
\newcommand{\R}{\mathbb{R}} % reals
\newcommand{\FF}{\mathbb{F}} % field

\newcommand{\Conf}{\mathrm{Conf}}

\renewcommand{\int}{\mathrm{int}}


%~~ some maps
\newcommand{\deriv}{\mathcal{D}}  % derivative
\newcommand{\incl}{\mathfrak{i}}  % incl of emb to imm
\newcommand{\jincl}{\mathfrak{j}}  % incl of emb to imm
\newcommand{\amb}{\mathfrak{a}}
\newcommand{\foliate}{\mathfrak{f}}
\newcommand{\realmap}{\mathfrak{r}}  % realization map
\newcommand{\retr}{\mathfrak{retr}}

\newcommand{\ev}{\mathsf{ev}}   % evaluation map
\newcommand{\const}{\mathsf{const}}
\newcommand{\Exp}{\mathrm{Exp}}
\newcommand{\Path}{\mathcal{P}}

\newcommand{\forg}{\mathsf{forg}}
\newcommand{\conn}{\mathsf{conn}}
\newcommand{\modd}{\mathsf{mod}}
\newcommand{\proj}{\mathsf{proj}}


% NEW MACROS
\newcommand{\TODO}{ {\color{red} TODO } }
\newcommand{\ToCheck}{ {\color{red} Check } }

\newcommand{\mw}{\widetilde\mu_{3}}

% Arrows
\newcommand{\hra}{\hookrightarrow} 
\newcommand{\imra}{\looparrowright} 
\newcommand{\sra}{\twoheadrightarrow} 
\newcommand{\ira}{\rightarrowtail}
\newcommand{\ra}{\longrightarrow}


%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~ COMMANDS ~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~%
%~~ my j
\newcommand{\myj}{\mathsf{j}}
%~~ general


\newcommand{\dax}{\mathsf{dax}}
\newcommand{\pinch}{\mathsf{pinch}}
\renewcommand{\u}{\mathsf{u}} % unknot
\newcommand{\s}{\mathsf{s}} % unknot

\newcommand{\pT}{\mathsf{P}} % punctued model
\newcommand{\pF}{\mathsf{F}} % punctured model layer (fibre)
\newcommand{\rpT}{\mathsf{P}^\mathsf{red}} % reduced punctured model
\newcommand{\p}{\mathsf{p}}    % projections in the tower

\DeclareMathOperator{\fib}{fib}
\DeclareMathOperator{\hofib}{hofib}
\DeclareMathOperator*{\tofib}{tofib}
\DeclareMathOperator*{\holim}{holim}


\DeclareMathOperator{\sgn}{sgn}


%~~ knots, embeddings
\newcommand{\Arcs}[1]{\Emb_\partial(\D^1,#1)}
\newcommand{\ImArcs}[1]{\Imm_\partial(\D^1,#1)}

\newcommand{\KK}{\mathbb{K}} % pi_0Knots

\newcommand{\G}{\mathcal{G}}
\newcommand{\TG}{\mathbb{G}}
\newcommand{\ball}{\mathbb{B}}

% NON-DECORATED TREES
\DeclareRobustCommand{\ichord}[1]{
\begingroup
  \centering
    \begin{tikzpicture}[baseline=0.25ex,scale=0.22,every node/.style={scale=0.75,font=\bfseries}]
        \clip (-0.3,-0.22) rectangle (0.35,2.6);
        \draw[fill=black!30!white]
            (-0.15, -0.2) rectangle ++ (0.3,0.2);
        \draw[thick]
            (0,0) -- (0,1.5) (0,2.2)  node[]{$#1$};
    \end{tikzpicture}%
\endgroup
}
% DECORATED TREES
\DeclareRobustCommand{\gchord}[1]{%
 \begingroup
  \centering
    \begin{tikzpicture}[baseline=0.8ex,scale=0.26,every node/.style={scale=0.75,font=\bfseries}]
        \clip (-0.2,-0.22) rectangle (1,2.9);
        \draw[fill=black!30!white]
            (-0.15, -0.2) rectangle ++ (0.3,0.2);
        \draw[thick]
            (0,0) -- (0,1.75)  node[red, below right]{$#1$} (0,2.5) node[]{$1$};
    \end{tikzpicture}%
    \endgroup
}

\DeclareRobustCommand{\tree}{%
  \begingroup
  \centering
    \begin{tikzpicture}[baseline=0.7ex,scale=0.22,every node/.style={scale=0.75,font=\bfseries}]
        \clip (-1.25,-0.22) rectangle (1.2,3.6);
        \draw[fill=black!30!white]
            (-0.15, -0.2) rectangle ++ (0.3,0.2);
        \draw[thick]
            (0,0) -- (0,1) -- (-1,2.3) (-1,3) node[]{$2$}
                    (0,1) -- (1,2.3)  (1,3) node[]{$1$};
    \end{tikzpicture}%
  \endgroup
}

\DeclareRobustCommand{\igtree}[4]{%
  \begingroup
  \centering
    \begin{tikzpicture}[baseline=1ex,scale=0.26,every node/.style={scale=0.8,font=\bfseries}]
        \clip (-1.75,-0.22) rectangle (1.75,3.6);
        \draw[fill=black!30!white]
            (-0.15, -0.2) rectangle ++ (0.3,0.2);
        \draw[thick]
            (0,0) -- (0,1) -- (-1,2.3) node[above]{$#2$} node[red, below=0.12cm]{$#4\,$}
                    (0,1) -- (1,2.3)  node[above]{$#1$} node[red, below=0.12cm]{$\,#3$};
    \end{tikzpicture}%
  \endgroup
}