\ifdefined\ifdraft%
\let\oldifdraft\ifdraft
\let\ifdraft\relax
\usepackage{templatetools}
\let\ifdraft\oldifdraft
\else%
    \usepackage{templatetools}
\fi%

% ~ ~ ~ ~ ~ ~
% ~ basic essentials
% ! inputenc: encoding of .tex files
% 
\IfPackageNotLoaded{inputenc}{\usepackage[utf8]{inputenc}}

% ! fontenc: encoding of outputted text
% 
\IfPackageNotLoaded{fontenc}{\usepackage[T1]{fontenc}}

% ! babel: international and multilingual language support
% https://anorien.csc.warwick.ac.uk/mirrors/CTAN/macros/latex/required/babel/base/babel.pdf
\IfPackageNotLoaded{babel}{\usepackage[english]{babel}}

% ! color: for text
% https://anorien.csc.warwick.ac.uk/mirrors/CTAN/macros/latex/required/graphics/color.pdf
\IfPackageNotLoaded{color}{\usepackage{color}}

% ! xcolor: for colors with names
% 
\IfPackageNotLoaded{xcolor}{\usepackage[dvipsnames,hyperref]{xcolor}}

% ! graphicx: for images
% https://mirror.apps.cam.ac.uk/pub/tex-archive/macros/latex/required/graphics/grfguide.pdf
\IfPackageNotLoaded{graphicx}{\usepackage{graphicx}}

% ! geometry: for page sizes/layouts
% %
\IfPackageNotLoaded{geometry}{\usepackage[pass]{geometry}}
% \IfPackageNotLoaded{geometry}{\usepackage[pass,showframe]{geometry}}

% ! rotating: landscape figures
% https://mirror.apps.cam.ac.uk/pub/tex-archive/macros/latex/required/graphics/rotating.pdf
\IfPackageNotLoaded{rotating}{\usepackage{rotating}}

% ! lmodern: for more fonts
%
\IfPackageNotLoaded{lmodern}{\usepackage{lmodern}}

% ! float: for better position of floats
%
\IfPackageNotLoaded{float}{\usepackage{float}}
% ? for restatable
% \newfloat{restatable}{H}{lop}
% ? for frames around figures
% \floatstyle{boxed}
% \restylefloat{figure}

% ! bm: for bold math
%
\IfPackageNotLoaded{bm}{\usepackage{bm}}

% ~ ~ ~ ~ ~ ~
% ~ dev utility and tools
% ! xparse: for more powerful custom commands
% https://mirror.ox.ac.uk/sites/ctan.org/macros/latex/contrib/l3packages/xparse.pdf
\IfPackageNotLoaded{xparse}{\usepackage{xparse}}

% ! ifthen, ifdraft: checking
% 
\IfPackageNotLoaded{ifthen}{\usepackage{ifthen}}
\IfPackageNotLoaded{ifdraft}{\usepackage{ifdraft}}

% ! calc: for calculating distances/useful values
% https://mirror.ox.ac.uk/sites/ctan.org/macros/latex/required/tools/calc.pdf
\IfPackageNotLoaded{calc}{\usepackage{calc}}

% ! silence: for silencing known safe error messages
% 
\IfPackageNotLoaded{silence}{\usepackage{silence}}

% ! etoolbox: many things
\IfPackageNotLoaded{etoolbox}{\usepackage{etoolbox}}

% ~ ~ ~ ~ ~ ~
% ~ environments
% ! proof: for infer command
% https://ctan.math.illinois.edu/macros/latex/contrib/lkproof/lkproof-doc.pdf
\IfPackageNotLoaded{proof}{\usepackage{proof}}

% ! mathpartir: for better infer environment
% https://mirror.apps.cam.ac.uk/pub/tex-archive/macros/latex/contrib/mathpartir/mathpartir.pdf
\IfPackageNotLoaded{mathpartir}{\usepackage{mathpartir}}
% * change fonts for labels
\def\LeftTirName #1{\raisebox{0.4ex}{\scriptsize\texttt{\textbf{#1}}}}%
\def\RightTirName #1{\raisebox{0.4ex}{\scriptsize\texttt{\textbf{#1}}}}%

% ! mathtools: math environments, overlap, xarrows
% https://mirror.ox.ac.uk/sites/ctan.org/macros/latex/contrib/mathtools/mathtools.pdf
\IfPackageNotLoaded{mathtools}{\usepackage{mathtools}}
% ? loads amsmath
\IfPackageNotLoaded{amsmath}{%
    \let\subseteq\relax
    \usepackage{amsmath}
}

% ! amsthm: proof, lemma, theorem, corollary, etc
% https://mirror.ox.ac.uk/sites/ctan.org/macros/latex/required/amscls/doc/amsthdoc.pdf
\IfPackageNotLoaded{amsthm}{%
    % ? resolve conflict with proof environment
    \let\proof\relax
    \let\endproof\relax
    \usepackage{amsthm}
}

% ! thmtools, thm-restate: for resusing figs/thms
% LOAD AFTER amsmath
% https://ctan.math.illinois.edu/macros/latex/contrib/thmtools/doc/thmtools-manual.pdf
\IfPackageNotLoaded{thmtools}{\usepackage{thmtools}}
\IfPackageNotLoaded{thm-restate}{\usepackage{thm-restate}}

% ! longtable: page spanning tables
% https://anorien.csc.warwick.ac.uk/mirrors/CTAN/macros/latex/required/tools/longtable.pdf
\IfPackageNotLoaded{longtable}{\usepackage{longtable}}

% ! enumitem: inline lists and description; overhauls itemize, enumerate
% 
\IfPackageNotLoaded{enumitem}{\usepackage[inline]{enumitem}}
% ? for right aligning description labels, requires label width set
\SetLabelAlign{parright}{\parbox[t]{\labelwidth}{\raggedleft#1}}
% ~ defaults for enumitem
\setlist[description]{itemsep=0.5ex,labelsep=2ex,parsep=0ex,listparindent=0ex}%
\setlist[itemize]{topsep=0.5pt,itemsep=0.5pt}%
\setlist[enumerate]{topsep=0.5pt,itemsep=0.5pt}%


% ! tasks: tabled lists
% https://mirror.apps.cam.ac.uk/pub/tex-archive/macros/latex/contrib/tasks/tasks-manual.pdf
\IfPackageNotLoaded{tasks}{\usepackage{tasks}}
\settasks{style=enumerate,ref=\arabic*,after-item-skip=0.5ex}
% \settasks{label={\arabic*)},ref={\thetask}}

% ! algorithm2e: displaying code
% 
\IfPackageNotLoaded{algorithm2e}{\usepackage[ruled,vlined,linesnumbered,commentsnumbered,resetcount]{algorithm2e}}

% ! listings: displaying colored code
% https://mirror.apps.cam.ac.uk/pub/tex-archive/macros/latex/contrib/listings/listings.pdf
\IfPackageNotLoaded{listings}{\usepackage{listings}}

% ! wrapfig: 
% 
\IfPackageNotLoaded{wrapfig}{\usepackage{wrapfig}}

% ! xfrac: diagonal fractions
% 
\IfPackageNotLoaded{xfrac}{\usepackage{xfrac}}

% ! delarray: better array environments (align etc)
% https://mirror.ox.ac.uk/sites/ctan.org/macros/latex/required/tools/delarray.pdf
\IfPackageNotLoaded{delarray}{\usepackage{delarray}}

% ! tikz: for diagrams and drawings
% 
\IfPackageNotLoaded{tikz}{\usepackage{tikz}}
\newcounter{tmkcount}
\usetikzlibrary{shapes,trees,calc,tikzmark,positioning}
\tikzset{
    use tikzmark/.style={
            remember picture,
            overlay,
            execute at end picture={
                    \stepcounter{tmkcount}
                },
        },
    tikzmark suffix={-\thetmkcount}
}

% ~ ~ ~ ~ ~ ~
% ~ customisation
% ! titlesec: modify spacing around named section/paragraph
% 
\IfPackageNotLoaded{titlesec}{%
    % ? fix subparagrpah being removed by class
    % Save the class definition of \subparagraph
    \let\llncssubparagraph\subparagraph
    % Provide a definition to \subparagraph to keep titlesec happy
    \let\subparagraph\paragraph
    \usepackage{titlesec}
    % Revert \subparagraph to the llncs definition
    \let\subparagraph\llncssubparagraph
}

% ! multicol: specify multiple column pages
% https://anorien.csc.warwick.ac.uk/mirrors/CTAN/macros/latex/required/tools/multicol.pdf
\IfPackageNotLoaded{multicol}{\usepackage{multicol}}
% ? column divider
\setlength{\columnsep}{5mm}

% ! caption: adjust caption spacing around figures
% * llncs requires this is not loaded
% https://mirror.apps.cam.ac.uk/pub/tex-archive/macros/latex/contrib/caption/caption.pdf
% \IfPackageNotLoaded{caption}{\usepackage{caption}}
% \captionsetup{aboveskip=0pt,belowskip=0pt}
% \captionsetup[wrapfigure]{aboveskip=0pt,belowskip=0pt}

% % ! subcaption: for subfigures
% % * loads caption
% %
% \IfPackageNotLoaded{subcaption}{\usepackage{subcaption}}

% ! subfig: for subfigures
%
\IfPackageNotLoaded{subfig}{\usepackage[caption=false]{subfig}}
\captionsetup*[subfigure]{position=bottom}

% ~ ~ ~ ~ ~ ~
% ~ fonts
% ! amsfonts: math alphabet and symbols
% https://mirror.ox.ac.uk/sites/ctan.org/fonts/amsfonts/doc/amsfonts.pdf
\IfPackageNotLoaded{amsfonts}{\usepackage{amsfonts}}
\let\ulcorner\relax
\let\urcorner\relax
\let\llcorner\relax
\let\lrcorner\relax

% ! amstext: text in math mode
% https://mirror.ox.ac.uk/sites/ctan.org/macros/latex/required/amsmath/amstext.pdf
\IfPackageNotLoaded{amstext}{\usepackage{amstext}}

% ! mathabx: comprehensive math symbols
% https://mirror.ox.ac.uk/sites/ctan.org/fonts/mathabx/mathtest.pdf
\IfPackageNotLoaded{mathabx}{%
    \let\olddegree\degree
    \let\degree\relax
    \usepackage{mathabx}
    \let\degree\olddegree
}

% ! amssymb: maths symbols
% https://milde.users.sourceforge.net/LUCR/Math/mathpackages/amssymb-symbols.pdf
\IfPackageNotLoaded{amssymb}{\usepackage{amssymb}}
\let\emptyset\varnothing

% ! amsbsy: bold symbols
% https://mirror.apps.cam.ac.uk/pub/tex-archive/macros/latex/required/amsmath/amsbsy.pdf
\IfPackageNotLoaded{amsbsy}{\usepackage{amsbsy}}

% ! stmaryrd: more symbols
% https://mirror.ox.ac.uk/sites/ctan.org/fonts/stmaryrd/stmaryrd.pdf
\IfPackageNotLoaded{stmaryrd}{\usepackage{stmaryrd}}

% ! wasysym: more symbols
% https://anorien.csc.warwick.ac.uk/mirrors/CTAN/macros/latex/contrib/wasysym/wasysym.pdf
% \IfPackageNotLoaded{wasysym}{\usepackage[nointegrals]{wasysym}}

% ! AnonymousPro: for better tt font
%
\IfPackageNotLoaded{AnonymousPro}{\usepackage[ttdefault=true]{AnonymousPro}}

% % ! orcidlink: orcID link
% %
\IfPackageNotLoaded{orcidlink}{\usepackage{orcidlink}}

% ~ ~ ~ ~ ~ ~
% ~ output and visuals
% ! hyperref: hyperlinks and urls
% 
\IfPackageNotLoaded{hyperref}{\usepackage{hyperref}}
\hypersetup{
    % * links
    % hyperindex=true,
    linktocpage=false,
    colorlinks=true,
    % * bookmarks
    % bookmarks=true,
    bookmarksopen=false,
    % * colors
    linkcolor=blue,
    anchorcolor=red,
    citecolor=blue,
    filecolor=magenta,
    urlcolor=blue,
    % * border colors
    citebordercolor={0 0 0},
    filebordercolor={1 0 1},
    linkbordercolor={0 0 0},
    menubordercolor={0 0 0},
    urlbordercolor={0 0 0},
    % * meta
    % pdftitle={},
    % pdfauthor={},
    pdfstartpage=1
}

% ! bookmark: better pdf bookmarks
% https://ctan.math.utah.edu/ctan/tex-archive/macros/latex/contrib/bookmark/bookmark.pdf
\IfPackageNotLoaded{bookmark}{\usepackage[depth=5,atend]{bookmark}}

% ! cleveref: better referencing
% https://mirror.ox.ac.uk/sites/ctan.org/macros/latex/contrib/cleveref/cleveref.pdf
\IfPackageNotLoaded{cleveref}{\usepackage{cleveref}}

% ! tcolorbox: boxes around equations as in lagaillardie2022
% 
\IfPackageNotLoaded{tcolorbox}{\usepackage[theorems,xparse]{tcolorbox}}

% ! soul: for strikethrough
%
\IfPackageNotLoaded{soul}{\usepackage{soul}}
\let\oldst\st
\let\st\relax
\IfPackageNotLoaded{ulem}{\usepackage{ulem}}
% non underlined emph
\normalem

% ~ ~ ~ ~ ~ ~ 
% ~ other
% ! doi: for hyperlinking doi numbers
% https://ctan.org/pkg/doi?lang=en
\IfPackageNotLoaded{doi}{\usepackage{doi}}

\endinput
