%
% ! (lemma 16) : compat wf, end or future enabled
\begin{lemma}\label{lem:configs_compat_wf_fe}
	%
	If both \VIso*_1\ and \VIso*_2\ are \emph{well-formed} 
    and \Compat*[\VSoc_1][\VSoc_2],
	then both \VSoc*_1\ and \VSoc*_2\ are \emph{final} 
	or $\exists\ValTime$ such that \Trans*{\VSys}:{\ValTime,\SiltAction}[\Parl{\VSoc'_1,\VSoc'_2}].%
	%
\end{lemma}
\begin{proof}
	%
	By~\Cref{lem:cfgs_trans_wf_pres} \VIso*'_1\ and \VIso*'_2\ are \emph{well-formed} and by~\Cref{lem:cfg_wf_then_live} are \emph{live}.
	%
	By~\Cref{def:types_progress} if \VSoc*_2\ is \emph{final} then $\VSoc_2=\CSoc[\ValClocks_2];[\TypeEnd]:{\emptyset}$.
    %
    We proceed with the assumption that at least one participant is \emph{not final}, and hereafter only consider \VSoc*'_1.
	%
	The transition is given below:
 %in~\Cref{eq:configs_compat_wf_fe_trans}.
	%
	\begin{minieq}*\label{eq:configs_compat_wf_fe_trans}
		\Trans{\VSys}:{\ValTime}[\Trans{\Parl{\CSoc+{+\ValTime}_1,\CSoc+{+\ValTime}_2}}:{\SiltAction}[\Parl{\CSoc'_1,\CSoc'_2}]]
	\end{minieq}
	%
	We proceed only considering each case of \VSoc*_1\ not being \emph{final}.
	By induction on the cases of \TypeS*_1:
	%
	\begin{inductivecase}
		%
		%
		% ~ choice
		\item\NewCase[$\TypeS=\simplechoice$] 
		% Then by judgement of \LblTypChoice*\ $\exists\Const_i$ such that $\ValClocks\models\Past[\Const_i]$ and $\emptyset;\Past[\Const_i]~\Entails\simplechoice$.
		%
		As described in~\Cref{sec:types} we write $\Past$ if $\exists\ValTime$ such that $\ValClocks+\ValTime\models\Const$.
		Therefore, if $\ValClocks\not\models\Const$ and $\emptyset;\Const~\Entails\TypeS$ for a \emph{well-formed} \CIso*\ then $\ValClocks\models\Past[\Const]$.
		%
		By~\Cref{lem:cfgs_trans_wf_pres} the only possible values of \ValTime*\ ensure that the latest system-wide sending action is never missed and messages are received as soon as they arrive in a queue by rule \LblCfgSocTime*.
		
		Therefore, the hypothesis holds for systems composed where one participant is known to be a \emph{non-final} choice type.
		%
		%
		% ~ rec def
		\item\NewCase[$\TypeS=\mu\alpha.\TypeS'$]
		It follows~\Cref{lem:cfgs_trans_wf_pres} that \TypeS*'\ is \emph{well-formed} against $\ValClocks+\ValTime$.
		%
	\end{inductivecase}
	
	\noindent Therefore, if a \emph{well-formed} and compatible system \Parl*{\VSoc_1,\VSoc_2}\ that is not \emph{final}, then there is some value of time $\ValTime\geq 0$ that will enable a future action, which will result in a \emph{well-formed} and compatible system \Parl*{\VSoc'_1,\VSoc'_2}, which may or may not be \emph{final}, and to which this behaviour still applies.
	%
\end{proof}
% 