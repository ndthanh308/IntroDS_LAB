receive 
  {Q, data, STR} -> Foo();
  {Q, done} -> Bar();
after 3000  -> Q ! {self(), timeout}, 
  Timeout()
end.