
This section presents the syntax, semantics and formation rules for TimeOut Asynchronous Session Types (TOAST), which extend asynchronous binary timed session types~\cite{Bocchi2019} with a well-disciplined (hence safe) form of mixed-choice.

\paragraph*{Clocks \& Constraints}
We start with a few preliminary definitions borrowed from timed automata~\cite{Alur1994}. Let \ClockSet*\ be a finite set of clocks denoted \Clx*, \Cly*\ and \Clz*.
A (clock) valuation \ValClocks*\ is a map $\ValClocks: \ClockSet\to\RatSet$.
%
The initial valuation is $\ValClocks_0$ where $\ValClocks_0=\{x\mapsto0\mid x\in\ClockSet\}$.
Given a time offset $\ValTime\in\RatSet$ and a valuation \ValClocks*, $\ValClocks+\ValTime=\{x\mapsto\ValClocks(x)+\ValTime\mid x\in\ClockSet\}$.
%
Given $\RSet\subseteq\ClockSet$ and \ValClocks*,
$\ReSet[\ValClocks]=\{\text{if\ }(x\in\RSet)\,0\,\text{else\ }\ValClocks(x)\mid x\in\ClockSet\}$.
Observe $\ReSet[\ValClocks]:{\emptyset}=\ValClocks$.
%
\GuardSet*\ denotes the set of clock constraints, where a clock constraint \Const*\ takes the form:
\begin{equation}\label{eq:types_constraints}
    %
    \Const ::= \TypeTrue%
    \mid \Clx>\ValTime%
    \mid \Clx=\ValTime%
    \mid \Clx-\Cly>\ValTime%
    \mid \Clx-\Cly=\ValTime%
    \mid \neg\Const%
    \mid \Const_1\land\Const_2%
    %
\end{equation}

\noindent We write $\nu\models\delta$ for a constraint $\delta$ that is satisfied by the valuations of clocks within $\nu$.
We write $\Past$ (the past of $\delta$) for a constraint $\delta'$ such that $\nu \models \delta'$ if and only if $\exists t  : \nu + t \models \delta$.
For example $\Past[\Tup(3<x<5)]={x<5}$ and $\Past[\Tup(x>2)]=\TypeTrue$.