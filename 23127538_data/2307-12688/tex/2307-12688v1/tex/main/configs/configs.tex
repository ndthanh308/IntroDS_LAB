
This section presents a compositional semantics for timeout session types in the form of labelled transition systems (LTS) over configurations.
In this work, configurations refer to a tuple (or triple) used in the evaluation of a types behaviour; comprised of a type \TypeS*\ and a valuation of clocks \ValClocks*. 

This section explores different collections of semantics in a structured manner, in order to better provide an understanding of the overarching control flow of a system.
This work considers three kinds of configurations
\begin{inline}*+;
   \item \emph{isolated} configurations capture the behaviour of a type uninfluenced by anything beyond itself
   \item \emph{social} configurations capture the behaviour a type exhibits in order to communicate with others
   \item \emph{system} configurations capture the behaviour of a system comprised of multiple \emph{social} configurations, that run in parallel and communicate with each other
\end{inline}
Hereafter, configurations may be referred to as \emph{configs}.

Configurations are layered, building upon and encapsulating the layers below
\begin{inline}>[\;$\subset$\,]
   \item an isolated config
   \item a social config
   \item a system config
\end{inline}
In practice, a system makes a transition comprised of one or more social transitions, which is in turn comprised of some isolated transitions.

\paragraph*{Configuration Transitions}
Configurations may perform actions corresponding transition on a given LTS
(for isolated see~\cref{fig:configs_iso_rule}; social see~\cref{fig:configs_soc_rule}, and for system see:~\cref{fig:configs_sys_rule}).
Let \ProgAction*\ be any action that a configuration can take. Configuration transitions may be more specific than \ProgAction*.
\input{tex/figs/configs/actions.tex}
Let \Msg*\ be a message used in a communication between two configurations, comprised of a message label \MsgLabel*\ and some real data of type \DataType*. The symbol \TypComm*\ is defined with the same meaning as in the types.
Let \Queue*\ be a queue where messages \Msg*\ are to be received.

The transition \TypComm*\Msg*\ describes a message \Msg*\ being either being sent or received.
A transition of \ValTime*\ describes a time step occurring, with the value of \ValTime*\ passing over the configuration.
A \SiltAction*\ transition describes an action beyond the scope of its use.
\begin{note}
    Sequences of actions, such as \Act*\Act*, yield the same meaning as \Act*[\ProgAction\,\ProgAction].
\end{note}

\endinput


\subsection{Configurations of Isolated Types}
\TODO % TODO: 

\begin{note}
   A configuration of isolated types \isoconfig{}\ can also be written: \iso{}.
\end{note}

\subsubsection{Semantics of Isolated Configurations}\label{ssec:configs_iso_lts}
The semantics of social configurations are presented in~\cref{fig:configs_iso_lts}, followed by an explanation for each.

% Figure environment removed\vspace{-4ex}
\begin{description}[itemsep=1.25ex,parsep=1.25ex]
   \item[Rule \isorInteract\;] Describes an interaction being performed; having sent some data \msglabel, the relevant clocks are reset to 0 and the configuration progresses to the next type.

      The premise enforces that the current valuation of clocks must satisfy the constraint; and, using the same condition as \formChoice\ of the formation rules, ensures that only interactions of the same communication direction (sending or receiving) are considered together.

   \item[Rule \isorRec] Unfolds recursive types.

   \item[Rule \isorTime] Allows time to pass, adding \tval\ to the valuation of all clocks.

\end{description}

\input{tex/defs/configs_iso_future_enabled.tex}

\input{tex/defs/configs_iso_live.tex}
\begin{lemma}
   Given a well-formed \st, \isoinit{}\ is \emph{live}.
\end{lemma}
\begin{proof}
   As $\of{\mval}{0}\models\mpast$ holds for any possible \constr.
\end{proof}

\input{tex/defs/configs_iso_well_formed.tex}

\subsection{Social Configurations}
\TODO % TODO: 

A sent message $\mmsg$ must first be enqueued into the recipients queue, before it can be received.

\begin{note}
   A configuration of social types \socconfig{}\ can also be written: \soc{}.
\end{note}

\subsubsection{Semantics of Social Configurations}\label{ssec:configs_soc_lts}
The semantics of social configurations are presented in~\cref{fig:configs_soc_lts}, followed by an explanation for each.
% Figure environment removed\vspace{-4ex}
\begin{description}[itemsep=1.25ex,parsep=1.25ex]
   \item[Rule \socrSend] Sends a message $\mmsg$ representing some labelled data as defined by the types, given that this action adheres to the premise of \isorInteract, meaning that the constraint is satisfied and this is considered to be a safe mixed-choice. The resulting configuration has a new current type and updated valuation of clocks.

   \item[Rule \socrRecv] Retrieves a message $\mmsg$ from the queue, given that there is a corresponding receiving action, and, similarly \socrSend, that this receiving action adheres to the premise of \isorInteract. On a successful evaluation, the message received is removed from the queue, and the configuration has a new current type and updated valuation of clocks.

   \item[Rule \socrEnqu] Receives a message $\mmsg$ and enqueues it to the end of the queue.

   \item[Rule \socrTime] Allows a time step \tval\ over the valuation of clocks given that both of the following hold
      \begin{inlineEnum}
         \item the viability of any sending actions are still possible after the step (their constraints remain either satisfied or unsatisfied)
         \item that there is no smaller time step possible that would allow a message to be received from the queue sooner
      \end{inlineEnum}
      It is not enough that there is a message in the queue, but that the message in the queue corresponds to a receiving action, and will result in a new type and updated valuation of clocks (by \socrRecv).

\end{description}
