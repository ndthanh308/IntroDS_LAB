%
\begin{equation}
    %
    \begin{array}[t]{l c l}%
        %
        \Prc & = & %
        %
        \PDefRec[A].{%
            \PSet{x}/.{%
                \PDelay[t<2]/.{%
                    \PIf[x<1]:{\PThen[%
                        \PSend[stop]%
                    ]}:{\PElse[%
                        \PRecv[data].{%
                            \PRec[A]%
                        }<{4}>{%
                            \PDelay[1].{%
                                \PSend[tout]/.{%
                                    \PDelay[1]/.{%
                                        \PRecv[retry].{%
                                            \PRec[A]%
                                        }%
                                    }%
                                }%
                            }%
                        }%
                    ]}%
                }
            }%
        }%
        %
        \\ \\%
        \Qrc & = & %
        %
        \PDefRec[B].{%
            \PSet{y}/.{%
                \PRecv_q[stop]<{1}>{%
                    \PDelay[t<10]/.{%
                        \PIf[y\leq 4]:{\PThen[%
                            \PSend_q[data].{%
                                \PRec[B]%
                            }%
                        ]}:{\PElse[%
                            \PRecv_q[tout]/.{%
                                \PDelay[1\leq t]/.{%
                                    \PSend_q[retry].{%
                                        \PRec[B]%
                                    }%
                                }%
                            }%
                        ]}%
                    }%
                }%
            }%
        }%
        %
    \end{array}
    %
\end{equation}
%