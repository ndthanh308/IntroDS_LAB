
% ~ ~ ~ ~ ~ ~
% ~ wrappers

% ~ for defining mapping functions
\NewDocumentCommand{\DefineMap}{s}{%
    \IfBooleanT{#1}{$}% mm wrap
    %
    \IfBooleanT{#1}{$}% mm wrap
}

% ~ wraps as func: #1(#2)
\NewDocumentCommand{\mkFunc}{s t* O{???} O{}}{%
    \IfBooleanT{#1}{$}% mm wrap
    \IfBooleanTF{#2}{\mathtt{#3}}{#3}
    \left(#4\right)%
    \IfBooleanT{#1}{$}% mm wrap
}

% ~ returns two params in par
\NewDocumentCommand{\Par}{s O{0} O{0}}{%
    \IfBooleanT{#1}{$}% mm wrap
    {#2}\,\mid{#3}%
    \IfBooleanT{#1}{$}% mm wrap
}

% ~ returns two params in par
\NewDocumentCommand{\Compat}{s o o t'}{%
    \IfBooleanT{#1}{$}% mm wrap
    \IfValueTF{#2}{#2}{%
        \IfBooleanTF{#4}{\VSoc'_1}{\VSoc_1}%
    }\!~\!\bot\!~\!\IfValueTF{#3}{#3}{%
        \IfBooleanTF{#4}{\VSoc'_2}{\VSoc_2}%
    }%
    \IfBooleanT{#1}{$}% mm wrap
}

% ~ returns two params in par
\NewDocumentCommand{\Dual}{s O{\TypeS} t' e_}{%
    \IfBooleanT{#1}{$}% mm wrap
    \overline{{#2\IfBooleanT{#3}{'}\IfValueT{#4}{_{#4}}}\mathstrut}
    \IfBooleanT{#1}{$}% mm wrap
}

% ~ returns wrapped in region notation
\NewDocumentCommand{\mkReg}{s O{\emptyset}}{%
    \IfBooleanT{#1}{$}% mm wrap
    \left[\,#2\,\right]%
    \IfBooleanT{#1}{$}% mm wrap
}

% ~ returns wrapped in set notation
% #1: * denotes wrap in $$
% #2: item in set
\NewDocumentCommand{\mkSet}{s O{\emptyset}}{%
    \IfBooleanT{#1}{$}% mm wrap
    \left\{\,#2\,\right\}%
    \IfBooleanT{#1}{$}% mm wrap
}

% ~ returns wrapped in tuple notation
% #1: * mm
% #2: t;
% #3: O
% #4: o
% #5: o
% #6: o
% #7: o
% #8: o
\NewDocumentCommand{\mkTup}{s t; O{\emptyset} o o o o o}{%
    \IfBooleanT{#1}{$}% mm wrap
   % \left
    ({#3}%
    \IfNoValueF{#4}{\IfBooleanTF{#2}{;}{,}{#4}}%
    \IfNoValueF{#5}{\IfBooleanTF{#2}{;}{,}{#5}}%
    \IfNoValueF{#6}{\IfBooleanTF{#2}{;}{,}{#6}}%
    \IfNoValueF{#7}{\IfBooleanTF{#2}{;}{,}{#7}}%
    \IfNoValueF{#8}{\IfBooleanTF{#2}{;}{,}{#8}}%
   % \right
    )\!%
    \IfBooleanT{#1}{$}% mm wrap
}

% ~ wraps in sfrac with square brackets
\NewDocumentCommand{\Subst}{s O{?} O{?}}{%
    \IfBooleanT{#1}{$}% mm wrap
    \mkReg[\sfrac{#2}{#3}]%
    \IfBooleanT{#1}{$}% mm wrap
}



% ~ ~ ~ ~ ~ ~
% ~ formatters

% ~ vertical line buffer
\NewDocumentCommand{\Buff}{O{1.25}}{%
    \rule{0pt}{#1ex}%
}

% ~ rule labels
\NewDocumentCommand{\RName}{s O{???} O{}}{%
    \IfBooleanT{#1}{$}% mm wrap
    {\mkReg[{\mathtt{#2}}{#3}]}%
    \IfBooleanT{#1}{$}% mm wrap
}

% ~ sub and sup script
% #1: * mm
% #2: t^
% #3: O
% #4: t'
% #5: O
% #6: t'
% #7: o
% #8: t'
\NewDocumentCommand{\InSet}{s t^ O{\emptyset} t' O{0} t' o t'}{%
    \IfBooleanT{#1}{$}% mm wrap
    {\mkSet[#3]\IfBooleanT{#4}{'}}%
    \IfBooleanTF{#2}{^}{_}%
    {%
    \AsSet[\FmtMathOp{#5}{#6}][\FmtMathOp{#7}{#8}]%
    }%
    \IfBooleanT{#1}{$}% mm wrap
}

% ~ set notation
\NewDocumentCommand{\AsSet}{s O{0} o}{%
    \IfBooleanT{#1}{$}% mm wrap
    \IfNoValueTF{#3}{\uppercase{#2}}{\lowercase{#2}\in\uppercase{#3}}%
    \IfBooleanT{#1}{$}% mm wrap
}

% ~ nu sat delta: if only one ' given, applied to both defaults
\NewDocumentCommand{\Sat}{s o t' t: o t'}{%
    \IfBooleanT{#1}{$}% mm wrap
    {\IfValueTF{#2}{#2\IfBooleanT{#3}{'}\,\models\,\IfValueTF{#5}{#5\IfBooleanT{#6}{'}}{\Const\IfBooleanT{#6}{'}}}{\ValClocks\IfBooleanT{#3}{'}\,\models\,\IfValueTF{#5}{#5\IfBooleanT{#6}{'}}{\Const\IfBooleanTF{#6}{'}{\IfBooleanT{#3}{'}}}}}%
    \IfBooleanT{#1}{$}% mm wrap
}
