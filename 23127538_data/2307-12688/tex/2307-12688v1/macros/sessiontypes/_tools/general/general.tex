
% ~ judgements
% #1 : s* : 
% #2 : t| : part of inferrule?
% #3 : m  : 
% #4 : m  : 
% #5 : o  : typing process
\NewDocumentCommand{\FmtJudgement}{s t| m m o}{%
    \IfBooleanT{#1}{$}%
    \begin{array}[t]{l}{#3}\end{array}%
    \IfBooleanTF{#2}{\ \\\ }{\!\;}%
    {\Entails}%
    \IfBooleanTF{#2}{\ \\\ }{\!\,}%
    \begin{array}[t]{l}{#4}\end{array}%
    \IfValueT{#5}{% * prc typing judgement
        \IfBooleanTF{#2}{\ \\\ }{\!\;}%
        {\PrcTyped}%
        \IfBooleanTF{#2}{\ \\\ }{\!\,}%
        \begin{array}[t]{l}{#5}\end{array}%
    }%
    \IfBooleanT{#1}{$}%
}

% ~ end points
% #1 : s* : math mode wrap
% #2 : t| : swap default endpoints
% #3 : Op : endpoint p
% #4 : Oq : endpoint q
\NewDocumentCommand{\ISes}{s t| O{\PrcQ} O{\PrcP}}{%
    \IfBooleanT{#1}{$}% mm wrap
    \IfBooleanTF{#2}{% * swap endpoints
        {#4}{#3}%
    }{% * default order
        {#3}{#4}%
    }%
    \IfBooleanT{#1}{$}% mm wrap
}

% ~ env items from list
\NewDocumentCommand\ListToEnvItems{>{\SplitList{,}}m}{%
    {\ProcessList{#1}{\ListEnvItem}}%
}

% ~ 
\newcommand\ListEnvItem[1]{%
    \!\,,\,{#1}%
}

% ~ for unions of constraints
\NewDocumentCommand{\IConstOr}{s t| O{\Const} E_{i} E:{\SetI}}{%
    \IfBooleanT{#1}{$}% mm wrap
    \IfBooleanTF{#2}{% * past
        \Past[{\SetOr_{\hspace{-0.5ex}\vspace{0.5ex}\scriptstyle{\AsSet[#4][#5]}}}{#3_{#4}}]%
    }{% * no past
        {\SetOr_{\hspace{-0.5ex}\vspace{0.5ex}\scriptstyle{\AsSet[#4][#5]}}}{#3_{#4}}%
    }%
    \IfBooleanT{#1}{$}% mm wrap
}

% ~ future enabled
% #1: * mm
% #2: t/
% #3: O
\NewDocumentCommand{\ActFE}{s t! t? t' m t|}{%
    \IfBooleanT{#1}{$}% mm wrap
    {#5}\!\stackrel{\IfBooleanTF{#2}{\TypSend}{\IfBooleanTF{#3}{\TypRecv}{\TypComm\IfBooleanT{#4}{'}}}}{\IfBooleanT{#6}{\not}\Rightarrow}%
    \IfBooleanT{#1}{$}% mm wrap
}