
% ~ end
\NewDocumentCommand{\TypRuleEnd}{s}{%
    \IfBooleanT{#1}{$}% mm wrap
    \infer{%[{\RName[end]}]{% * judgement
    \TypJudge2{\TypeTrue}3{\TypeEnd}
    }{% * premise
    \mbox{\rule{0pt}{1ex}}
    }
    \IfBooleanT{#1}{$}% mm wrap
}

% ~ var
\NewDocumentCommand{\TypRuleVar}{s}{%
    \IfBooleanT{#1}{$}% mm wrap
    \infer{%[{\RName[var]}]{% * judgement
        \TypJudge1{\RecEnv,\TypRecLabel:\Const}3{\TypRecLabel}
    }{% * premise
    \mbox{\rule{0pt}{1ex}}
    }
    \IfBooleanT{#1}{$}% mm wrap
}

% ~ rec
\NewDocumentCommand{\TypRuleRec}{s}{%
    \IfBooleanT{#1}{$}% mm wrap
    \infer{%[{\RName[rec]}]{% * judgement
        \TypJudge3{\TypRecDef.\TypeS}
    }{% * premise
        \TypJudge1{\RecEnv,\TypRecLabel:\Const}3{\TypeS}
    }
    \IfBooleanT{#1}{$}% mm wrap
}

% ~ choice
\NewDocumentCommand{\TypRuleChoice}{s}{%
\IfBooleanT{#1}{$}% mm wrap
\infer{%[{\RName[choice]}]{% * judgement
\TypJudge|[i][i]
}{% * premise
\begin{array}[t]{c}
    %
    \forall i\in\SetI
    \quad
    \TypJudge2{\TypEnv_i}3{\TypeS_i}
    \quad
    % \TmpTypFutureSat_i2{1{\Const_i}2{\RSet_i}}
    \RSet_i\models\gamma_i
    %
    \qquad
    %
    \DataType_i = \TmpTypBTDelegate''
    \implies
    \TypJudge1{\emptyset}2{\TypEnv'}3{\TypeS'}
    \quad
    \Const'\models\TypEnv'
    %
    \\[1ex]
    %
    \forall\AsSet[i,j][i]: i\neq j
    \quad
    \Const_i\cap\Const_j = \emptyset
    \lor
    \TypComm_i = \TypComm_j
    %
\end{array}
}
\IfBooleanT{#1}{$}% mm wrap
}

\endinput

% ~
\NewDocumentCommand{\TypRule}{s}{%
    \IfBooleanT{#1}{$}% mm wrap
    \infer{%[{\RName[]}]{% * judgement
        \TypJudge[][][]
    }{% * premise
    \mbox{}
    }
    \IfBooleanT{#1}{$}% mm wrap
}
