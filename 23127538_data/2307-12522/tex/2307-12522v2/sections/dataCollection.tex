Figure~\ref{fig:empirical} shows the whole process of our empirical study.
First, we collect TV apps, and explore how many mobile apps support running on smart TVs.
Second, we match TV-phone app pairs, and analyze current GUI transformation techniques.
Third, we summarize common GUI groups on phone.
\textcolor{red}{Note that the GUI group refers to a set of related GUI components.}
Finally, we summarize change rules of common GUI groups from phone to TV.

% Figure environment removed

\subsection{RQ1 Do mobile apps support smart TV?}
\label{sec:supportTV}
We first explore how many popular phone apps currently support running on TV devices.
We crawl 5,580 most popular apps among all categories from Google Play and reverse engineering all apps. 

According to the official guidance of developing Android TV~\cite{AndroidTVDe}, 
it is compulsory for apps running on TV that pre-declare a TV activity with a intent filter \textit{CATEGORY\_LEANBACK\_LAUNCHER} in the manifest of Android projects.
In addition to the declaration, TV-enabled apps often have separate TV layouts called \textit{layout-television}.
So, we check the existence of the declaration fields and TV layouts file as the judgment condition.
Finally, we find that 298 out of 5,580 most popular apps support TV display, accounting for 5.34\%.
In 298 TV-support apps,  \textit{Weather}, \textit{Education}, \textit{Tool} are the top 3 categories, which account for 16.78\%, 15.10\%, 11.07\%.
One common feature of these apps is their simple GUI and functions, with little difference between large and small screens.

We also investigate how many apps offer corresponding TV app.
We collect TV apps from Google Play and Dangbei and align TV appsâ€™ APK files, JAVA packages and logo
% Playing TV games is one of the most common features used by smart TV owners, so games accounts for the largest share.
% The weather module is very common in TVs and phones, and there is little difference in style, so \textit{weather} is the second most.
% Similar with \textit{Game}, the TV's large screen is suitable for studying and reading books, so educational apps always support TV devices.
% Overall, except for a few apps, most current apps are not specifically optimized for smart TV and need external support to adapt to TV, such as redeveloping TV app and Desktop Mode of smart phones.

\subsection{Data Collection}
\label{sec:dataCollection}
\begin{comment}
GUI dataset and a GUI pair dataset.
The TV-phone app pair dataset is used to analyze characteristics of TV-phone app pairs.
The GUI dataset contains Rico~\cite{rico}, which is a public large mobile screenshots dataset, and our collected GUI data.
We train our UI element detection model on the GUI dataset. \chen{Where do we have machine learning models in this study?}
The GUI pair dataset is used for empirical study and verifying mapping results.	
\end{comment}
% The dataset we used based on a TV-phone app pair dataset, a 

Firstly, we collect TV apps from app stores including Google Play~\cite{googleplay}, and Dangbei~\cite{dangbei} \chen{Tell what is this? Why you use this, rather than other Android app market.}.\huComment{updated}
Google Play is the largest app stores covering phones and TVs, where we can collect data as much as possible.
Dangbei is an app store only for TV apps and can collect a variety of TV apps faster through it.
If an app has no comments or updates in a year, it will be filtered out.
Some apps with low quality GUI have been filtered out manually too.
Finally, we collect 2805 TV apps.
\chen{Why do you need to find corresponding phone apps? Is it possible that these apps can also run on the phone?}
\huComment{we need corresponding apps to collect pairs.  some can directly run on the phone.}

\subsubsection{Alignment between TV and Phone Apps}
Then, we use the name of 2805 TV apps' APK files, JAVA packages and logo to search for the corresponding phone apps in the app stores.
\chen{some heuristics ??That is too vague, and please be super clear about the details in the paper!} \huComment{updated}
% If a TV app has multiple Android versions, for example \textcolor{red}{xxx}, each version counts as a pair.
%TV games are all deleted for no applicable GUI and match phone version game.
We match 1405 TV-phone app pairs finally. 
% Table~\ref{tab:app dis} shows the distribution of TV apps. 
42\% of app pairs are in Video categories, 23\% in Education categories, 21\% in Tool categories, 4\% in Music categories, and 10\% in other categories.
Because of the characteristics of TV itself, video apps, like \textit{Youtube}, \textit{IQIYI} are most popular on smart TV.
Educational apps, especially for children, are also common on TVs, but the GUIs between phone and TV of educational apps always differ a lot.
Some tools, like TV app store, remote control and projection control are also widely-used in TV.


\subsubsection{Alignment between TV and Phone GUIs}
\label{sec:GUIAlignment}
\chen{Please draw a flow chart for the process of empirical study including data collection, alignment, and analysis}
\chen{some scripts ??This is a research paper, not a technical report, so please be clear and tell the method rather than the implementation.} \huComment{updated}
Droidbot~\cite{li2017droidbot} and UI Automator~\cite{uiautomator} are used to collect GUI automatically under the control of scripts.
In this phase, home page, landing page, personal information page, and settings page are paid more attention.
Finally, We collect 10,697 Android GUI data and 4,112 TV GUI data.
Every GUI have a rendered screenshot and a corresponding run-time XML DOM (Documentary Object Model).
% Some public phone GUI datasets, like Rico are also used to train our deep learning models.

After collecting, we begin to pair TV-phone GUIs.
Firstly, we reverse engineering TV-phone app pairs, and analyze all Activity files and their corresponding XML files.
We extract all activity names, and find that only a small part of TV-phone pairs have consistent activity names, that is, corresponding GUI pages with the same names, most pairs have inconsistent or even completely different names.
Although the naming has changed, the activities are semantically similar, like \textit{homeActivity} and \textit{mainActivity}.
Faced with the situation, we utilize bert~\cite{devlin2019bert} to embed their names for matching activities at semantic level. \chen{Be clear!!!} \chen{Be clear, not using ``such as'' in the approach description}.\huComment{updated}
Given a TV activity name \textit{MovieDetailActivity}, we extract words from activity names, and process them as single words or short sentence, namely \textit{movie detail}.
We process all activity names in the dataset as the same way.
Then, we use a pre-trained bert to embed processed activity names to vectors.
The next step is to find the smallest angle (cosine similarity) between the selected vector and other phone activity name vectors.
If the distance of the smallest angle is lower than a predefined threshold, we regard this pair as a valid TV-phone activity pair.
Following these steps, we could gather all TV-phone activity pairs in a TV-phone app pair.

Secondly, UI Automator and Droidbot are used to catch rendered GUI on mobiles and TVs.
Both tools can get the corresponding activity name of current rendered GUI, so we apply heuristics in tools' invoke scripts to collect paired TV-phone GUI automatically via TV-phone activity pairs.
When faced with multiple interface activities, like \textit{fragment}, \textit{tablayout} and \textit{framelayout}, we further extract fragment name,tab name and layout name as semantic strings in the decompiled activity code to represent every interface.
When collect rendered multiple interface activities, information from top tab texts, bottom tab texts and page titles are used to determine the semantics of current GUI, not activity name.
In addition to the above measures, four volunteers also manually collect and verify TV-phone pairs.

Finally, we collect 2,200 TV-phone pairs with 589 pairs have clear correspondence between phone' and TV' components.
% Figure \textcolor{red}{xxx} shows the detail of our GUI pair dataset.
% \textcolor{red}{more detail}
\chen{How can we have so many pairs? If so, we may be attacked by the reviewers that why not train an end-to-end DL system for that? To avoid that, please strengthen your rules.}\huComment{we give huawei 50000 pairs}

After data collection, to motivate the required support transformation tools, we perform further formative empirical studies to understand the characteristics of current paired apps and GUIs.