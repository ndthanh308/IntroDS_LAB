\ProvidesPackage{preamble}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% PACKAGES
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%---------------------
% TYPOGRAPHY
%---------------------
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\DeclareUnicodeCharacter{2212}{-}
\usepackage[english]{babel}
\usepackage{newtxtext}
\usepackage[varvw]{newtxmath}
\usepackage{mathscinet}
\usepackage{wasysym}
\usepackage{tensor}
\usepackage{nicefrac}
\usepackage{booktabs}

\usepackage{adjustbox}

\usepackage[activate={true,nocompatibility},final,tracking=true,kerning=true,spacing=false,factor=1100,stretch=20,shrink=20]{microtype}%text appearance improvements
% activate={true,nocompatibility} - activate protrusion and expansion
% final - enable microtype; use "draft" to disable
% tracking=true, kerning=true, spacing=true - activate these techniques
% factor=1100 - add 10% to the protrusion amount (default is 1000)
% stretch, shrink -  stretchability/shrinkability (default is 20/20)
\UseMicrotypeSet[protrusion]{basictext}
%\microtypecontext{spacing=nonfrench}
\DisableLigatures[N]{encoding=*, family =*}
\SetTracking{encoding=*, shape=sc}{0} %reduce spacing in small caps


%---------------------
% DOCUMENT LAYOUT
%---------------------

% copypaste some options from NeurIPS style file
%--------------------

% set page geometry
%\usepackage[verbose=true,letterpaper]{geometry}
%\AtBeginDocument{
%  \newgeometry{
%    textheight=9in,
%    textwidth=5.5in,
%    top=1in,
%    headheight=12pt,
%    headsep=25pt,
%    footskip=30pt
%  }
%  \@ifpackageloaded{fullpage}
%    {\PackageWarning{neurips_2022}{fullpage package not allowed! Overwriting formatting.}}
%    {}
%}

%\widowpenalty=10000
%\clubpenalty=10000
%\flushbottom
%\sloppy

% font sizes with reduced leading
\renewcommand{\normalsize}{
  \@setfontsize\normalsize\@xpt\@xipt
  \abovedisplayskip      7\p@ \@plus 2\p@ \@minus 5\p@
  \abovedisplayshortskip \z@ \@plus 3\p@
  \belowdisplayskip      \abovedisplayskip
  \belowdisplayshortskip 4\p@ \@plus 3\p@ \@minus 3\p@
}
\renewcommand{\small}{
  \@setfontsize\small\@ixpt\@xpt
  \abovedisplayskip      6\p@ \@plus 1.5\p@ \@minus 4\p@
  \abovedisplayshortskip \z@  \@plus 2\p@
  \belowdisplayskip      \abovedisplayskip
  \belowdisplayshortskip 3\p@ \@plus 2\p@   \@minus 2\p@
}
\renewcommand{\footnotesize}{\@setfontsize\footnotesize\@ixpt\@xpt}
\renewcommand{\scriptsize}{\@setfontsize\scriptsize\@viipt\@viiipt}
\renewcommand{\tiny}{\@setfontsize\tiny\@vipt\@viipt}
\renewcommand{\large}{\@setfontsize\large\@xiipt{14}}
\renewcommand{\Large}{\@setfontsize\Large\@xivpt{16}}
\renewcommand{\LARGE}{\@setfontsize\LARGE\@xviipt{20}}
\renewcommand{\huge}{\@setfontsize\huge\@xxpt{23}}
\renewcommand{\Huge}{\@setfontsize\Huge\@xxvpt{28}}

% sections with less space
%\providecommand{\section}{}
%\renewcommand{\section}{%
%  \@startsection{section}{1}{\z@}%
%                {-2.0ex \@plus -0.5ex \@minus -0.2ex}%
%                { 1.5ex \@plus  0.3ex \@minus  0.2ex}%
%                {\large\bf\raggedright}%
%}
%\providecommand{\subsection}{}
%\renewcommand{\subsection}{%
%  \@startsection{subsection}{2}{\z@}%
%                {-1.8ex \@plus -0.5ex \@minus -0.2ex}%
%                { 0.8ex \@plus  0.2ex}%
%                {\normalsize\bf\raggedright}%
%}
%\providecommand{\subsubsection}{}
%\renewcommand{\subsubsection}{%
%  \@startsection{subsubsection}{3}{\z@}%
%                {-1.5ex \@plus -0.5ex \@minus -0.2ex}%
%                { 0.5ex \@plus  0.2ex}%
%                {\normalsize\bf\raggedright}%
%}
%\providecommand{\paragraph}{}
%\renewcommand{\paragraph}{%
%  \@startsection{paragraph}{4}{\z@}%
%                {1.5ex \@plus 0.5ex \@minus 0.2ex}%
%               {-1em}%
%               {\normalsize\bf}%
%}
%\providecommand{\subparagraph}{}
%\renewcommand{\subparagraph}{%
%  \@startsection{subparagraph}{5}{\z@}%
%                {1.5ex \@plus 0.5ex \@minus 0.2ex}%
%                {-1em}%
%                {\normalsize\bf}%
%}
%\providecommand{\subsubsubsection}{}
%\renewcommand{\subsubsubsection}{%
%  \vskip5pt{\noindent\normalsize\rm\raggedright}%
%}

% float placement
%\renewcommand{\topfraction      }{0.85}
%\renewcommand{\bottomfraction   }{0.4}
%\renewcommand{\textfraction     }{0.1}
%\renewcommand{\floatpagefraction}{0.7}

%\newlength{\@neuripsabovecaptionskip}\setlength{\@neuripsabovecaptionskip}{7\p@}
%\newlength{\@neuripsbelowcaptionskip}\setlength{\@neuripsbelowcaptionskip}{\z@}

%\setlength{\abovecaptionskip}{\@neuripsabovecaptionskip}
%\setlength{\belowcaptionskip}{\@neuripsbelowcaptionskip}

% swap above/belowcaptionskip lengths for tables
%\renewenvironment{table}
%  {\setlength{\abovecaptionskip}{\@neuripsbelowcaptionskip}%
%   \setlength{\belowcaptionskip}{\@neuripsabovecaptionskip}%
%   \@float{table}}
%  {\end@float}

% footnote formatting
%\setlength{\footnotesep }{6.65\p@}
%\setlength{\skip\footins}{9\p@ \@plus 4\p@ \@minus 2\p@}
%\renewcommand{\footnoterule}{\kern-3\p@ \hrule width 12pc \kern 2.6\p@}
%\setcounter{footnote}{0}

% paragraph formatting
%\setlength{\parindent}{\z@}
%\setlength{\parskip  }{5.5\p@}

% list formatting
\setlength{\topsep       }{4\p@ \@plus 1\p@   \@minus 2\p@}
\setlength{\partopsep    }{1\p@ \@plus 0.5\p@ \@minus 0.5\p@}
\setlength{\itemsep      }{2\p@ \@plus 1\p@   \@minus 0.5\p@}
\setlength{\parsep       }{2\p@ \@plus 1\p@   \@minus 0.5\p@}
\setlength{\leftmargin   }{3pc}
\setlength{\leftmargini  }{\leftmargin}
\setlength{\leftmarginii }{2em}
\setlength{\leftmarginiii}{1.5em}
\setlength{\leftmarginiv }{1.0em}
\setlength{\leftmarginv  }{0.5em}
\def\@listi  {\leftmargin\leftmargini}
\def\@listii {\leftmargin\leftmarginii
              \labelwidth\leftmarginii
              \advance\labelwidth-\labelsep
              \topsep  2\p@ \@plus 1\p@    \@minus 0.5\p@
              \parsep  1\p@ \@plus 0.5\p@ \@minus 0.5\p@
              \itemsep \parsep}
\def\@listiii{\leftmargin\leftmarginiii
              \labelwidth\leftmarginiii
              \advance\labelwidth-\labelsep
              \topsep    1\p@ \@plus 0.5\p@ \@minus 0.5\p@
              \parsep    \z@
              \partopsep 0.5\p@ \@plus 0\p@ \@minus 0.5\p@
              \itemsep \topsep}
\def\@listiv {\leftmargin\leftmarginiv
              \labelwidth\leftmarginiv
              \advance\labelwidth-\labelsep}
\def\@listv  {\leftmargin\leftmarginv
              \labelwidth\leftmarginv
              \advance\labelwidth-\labelsep}
\def\@listvi {\leftmargin\leftmarginvi
              \labelwidth\leftmarginvi
              \advance\labelwidth-\labelsep}


% abstract styling
%\renewenvironment{abstract}%
%{%
%  \vskip 0.075in%
%  \centerline%
%  {\large\bf Abstract}%
%  \vspace{0.5ex}%
%  \begin{quote}%
%}
%{
%  \par%
%  \end{quote}%
%  \vskip 1ex%
%}


%------------------------

\setcounter{tocdepth}{1}
%\usepackage[affil-it]{authblk}
%\usepackage{abstract}
% \setlength{\parskip}{\smallskipamount}
% \setlength{\parindent}{0pt}
\usepackage[nodisplayskipstretch]{setspace}


%---------------------
% MATH
%---------------------
\usepackage{mathtools}
\usepackage{cuted}
\usepackage{siunitx} % SI units
\usepackage{amsmath}
% \usepackage{amssymb}
\usepackage{wasysym}
\usepackage{tensor}

\let\openbox\relax %Sometimes needed to avoid clash with amsthm
\usepackage{amsthm}

% make all math inside \bfseries automatically be bold
\makeatletter
\g@addto@macro\bfseries{\boldmath}
\makeatother


%---------------------
% TIKZ
%---------------------

\usepackage{tikz}
\usetikzlibrary{shapes.geometric}
\tikzset{gon/.style={name=tmp,regular polygon,regular polygon sides=#1,minimum
size=10pt,inner sep=0pt},flag connection/.style={-},
polygon side/.style args={#1--#2}{
insert path={(tmp.corner #1) edge[flag connection] (tmp.corner #2)}}}
%
\newcommand{\FlagGraph}[3][]{\ifnum#2=2%
\tikz[baseline=(tmp1)]{\node[circle,inner sep=0.7pt,fill] (tmp1) at (0,0){};
\node[#1,circle,inner sep=0.7pt,fill] (tmp2) at (10pt,0){};
\ifx#3\empty%
\else
\draw[#1] (tmp1) edge[flag connection] (tmp2);
\fi}
\else%
\tikz[baseline=(tmp.south)]{\node[#1,gon=#2]{};
\foreach \X in {1,...,#2}{\fill (tmp.corner \X) circle (1pt);}
\draw[#1,polygon side/.list={#3}]}
\fi}

\usepackage{tikz-cd}

%---------------------
% FIGURES & FORMATTING
%---------------------
\usepackage[inkscapearea=page]{svg} % For including SVG figures
\usepackage{pdfpages}
\graphicspath{{figures/}}	% Root directory of the pictures 
\usepackage{cancel}
\usepackage{imakeidx}
\usepackage{wrapfig}
\usepackage[stable]{footmisc}
\usepackage{xspace}
\pagestyle{headings}

\usepackage{color}
\usepackage{verbatim}
\usepackage{enumitem}

\usepackage{marginnote}
\usepackage{tabularx}
\usepackage{multirow}
\usepackage{dcolumn}

%%% Adds empty text lines next to the wrapfigure, 
%   if the paragraph is shorter than needed.
\makeatletter 
\def\WFfill{\par 
    \ifx\parshape\WF@fudgeparshape 
    \nobreak 
    \ifnum\c@WF@wrappedlines>\@ne 
    \advance\c@WF@wrappedlines\m@ne 
    \vskip\c@WF@wrappedlines\baselineskip 
    \global\c@WF@wrappedlines\z@ 
    \fi 
    \allowbreak 
    \WF@finale 
    \fi 
} 
\makeatother 


%---------------------
% HYPERLINKS
%---------------------
%\usepackage[unicode=true,
% bookmarks=true,bookmarksnumbered=false,bookmarksopen=false,
% breaklinks=true,pdfborder={0 0 0},pdfborderstyle=%{},backref=false,colorlinks=true]
% {hyperref}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% EQUATION FORMATTING
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%TO ENUMERATE ALL EQUATIONS
\renewenvironment{align*}{\align}{\endalign}
\renewenvironment{alignat*}{\alignat}{\endalignat}
\renewenvironment{multline*}{\multline}{\endmultline}
\renewenvironment{gather*}{\gather}{\endgather}
\renewenvironment{equation*}{\equation}{\endequation}


\providecommand{\definitionname}{Definition}
\providecommand{\examplename}{Example}
\providecommand{\exercisename}{Exercise}
\providecommand{\propositionname}{Proposition}
\providecommand{\remarkname}{Remark}
\providecommand{\theoremname}{Theorem}
\providecommand{\lemmaname}{Lemma}

\newtheorem{thm}{\theoremname}[section]
\newtheorem*{thm*}{\theoremname}
\newtheorem{lem}{\lemmaname}[section]
\newtheorem*{lem*}{\lemmaname}


\theoremstyle{definition}
\newtheorem{definition}{Definition}[section]


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% MATH SYMBOLS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\bbR}{\mathbb{R}}
\newcommand{\bbN}{\mathbb{N}}
\newcommand{\bbC}{\mathbb{C}}
\newcommand{\bbZ}{\mathbb{Z}}
\newcommand{\bbH}{\mathbb{H}}
\newcommand{\bbQ}{\mathbb{Q}}
\newcommand{\calC}{\mathcal{C}}
\newcommand{\calD}{\mathcal{D}}
\newcommand{\calJ}{\mathcal{J}}
\newcommand{\calE}{\mathcal{E}}
\newcommand{\calU}{\mathcal{U}}
\newcommand{\calV}{\mathcal{V}}

\newcommand{\dd}{{\mathrm{d}}}
\newcommand{\bm}[1]{\boldsymbol{\mathrm{#1}}}
\renewcommand{\geq}{\geqslant}
\renewcommand{\leq}{\leqslant}
\renewcommand{\i}{\mathrm{i}}
\renewcommand{\Re}{\operatorname{Re}}
\renewcommand{\Im}{\operatorname{Im}}
\DeclareMathOperator{\sign}{sign}
\DeclareMathOperator{\mor}{Mor}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\ob}{Ob}
\DeclareMathOperator{\Mat}{Mat}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Int}{int}
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\pr}{pr}
\DeclareMathOperator{\supp}{supp}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Diff}{Diff}
\DeclareMathOperator{\Hol}{Hol}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\SO}{SO}
\DeclareMathOperator{\UU}{UU}
\DeclareMathOperator{\SU}{SU}
\DeclareMathOperator{\SL}{SL}
\DeclareMathOperator{\PSL}{PSL}
\DeclareMathOperator{\Tr}{Tr}
\DeclareMathOperator{\tr}{tr}
\DeclareMathOperator{\proj}{pr}
\DeclareMathOperator{\codim}{codim}
\DeclareMathOperator{\Alt}{Alt}
\DeclareMathOperator{\Sym}{Sym}
\DeclareMathOperator{\grad}{grad}
\DeclareMathOperator{\coker}{coker}
\DeclareMathOperator{\coim}{coim}
\DeclareMathOperator{\Ext}{Ext}
\DeclareMathOperator{\Tor}{Tor}
\let\div\relax
\DeclareMathOperator{\div}{div}
\DeclareMathOperator*{\res}{res}
\DeclareMathOperator\arcsinh{arcsinh}
\DeclareMathOperator\arccosh{arccosh}
\newcommand{\colimit}{\varinjlim}
\newcommand{\limit}{\varprojlim}
\newcommand{\Lie}{\mathcal{L}}
\newcommand{\fX}{\mathfrak{X}}
\newcommand{\sub}{\vartriangleleft}
\newcommand{\sube}{\trianglelefteqslant}
\newcommand{\bigslant}[2]{{\raisebox{.2em}{$#1$}\left/\raisebox{-.2em}{$#2$}\right.}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% PHYSICS MACROS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%% GENERATORS
\newcommand{\Pythia}    {\texttt{\textsc{Pythia}}\xspace}
\newcommand{\PythiaEight}   {\texttt{\textsc{Pythia8}}\xspace}
\newcommand{\Delphes}   {\texttt{\textsc{Delphes}}\xspace}
\newcommand{\Fastjet}   {\texttt{\textsc{FastJet}}\xspace}

%%% Processes and final states
\newcommand{\Zprime}    {\ensuremath{Z^{\prime}}\xspace}
\newcommand{\ttbar}     {\ensuremath{t\overline{t}}\xspace}

%%% Collider
\newcommand{\pp}        {\ensuremath{pp}\xspace}
\newcommand{\ppbar}     {\ensuremath{p\overline{p}}\xspace}
%\newcommand{\ee}        {\ensuremath{e^+e^-}\xspace}
\newcommand{\qqbar}     {\ensuremath{q\overline{q}}\xspace}

%%% Jet kinematics
\newcommand{\pT}        {\ensuremath{p_{T}}\xspace}
\newcommand{\pt}        {\pT}
\newcommand{\eT}        {\ensuremath{E_{T}}\xspace}
\newcommand{\ET}        {\ET}
\newcommand{\JVF}       {\ensuremath{JVF}\xspace}
\newcommand{\ptjet}     {\ensuremath{\pt^{\rm jet}}\xspace}
\newcommand{\ptthr}     {\ensuremath{\pt^{3}}\xspace}
\newcommand{\ptfour}    {\ensuremath{\pt^{4}}\xspace}
\newcommand{\mjet}      {\ensuremath{m^{\rm jet}}\xspace}
\newcommand{\massjet}   {\mjet}
\newcommand{\Mjet}      {\mjet}
\newcommand{\MJ}        {\ensuremath{M_{\textrm{J}}^{\Sigma}}\xspace}
\newcommand{\mjetAvg}   {\ensuremath{\langle\mjet\rangle}\xspace}
\newcommand{\masstrkjet}{\ensuremath{M^{\rm track \;jet}}\xspace}
\newcommand{\ptemjes}   {\ensuremath{\pt^{\rm jet, EM+JES}}\xspace}
\newcommand{\mThresh}   {\ensuremath{M_{\rm threshold}}\xspace}
\newcommand{\ptgjes}    {\ensuremath{\pt^{\rm GCW+JES}}\xspace}
\newcommand{\ptljes}    {\ensuremath{\pt^{\rm LCW+JES}}\xspace}
\newcommand{\ptem}      {\ensuremath{\pt^{\rm EM}}\xspace}
\newcommand{\etemjet}   {\ensuremath{\pt^{\rm jet,EM}}\xspace}
\newcommand{\etjet}     {\ensuremath{\et^{\rm jet}}\xspace}
\newcommand{\etjesjet}  {\ensuremath{\et^{\rm jet, EM+JES}}\xspace}
\newcommand{\etajet}    {\ensuremath{\eta^{\rm jet}}\xspace}
\newcommand{\rapjet}    {\ensuremath{y^{\rm jet}}\xspace}
\newcommand{\phijet}    {\ensuremath{\phi^{\rm jet}}\xspace}
\newcommand{\wjet}      {\ensuremath{w^{\rm jet}}\xspace}
\newcommand{\pthat}     {\ensuremath{\hat{p}_{T}}\xspace}
\newcommand{\njet}      {\ensuremath{N_{\rm jet}}\xspace}
\newcommand{\Njet}      {\njet}
\newcommand{\HTtwo}     {\ensuremath{\frac{1}{2}H_{T,2}}\xspace}
\newcommand{\ptavg}     {\ensuremath{\frac{1}{2}(p_{T,1} + p_{T,2})}\xspace}
\newcommand{\etaDet}    {\ensuremath{\eta_{\rm det}}\xspace}
\newcommand{\Ecalo}     {\ensuremath{E_{\rm calo}}\xspace}
\newcommand{\EcaloEM}   {\ensuremath{E_{\rm calo}^{\rm EM}}\xspace}
\newcommand{\EcaloEMJES}{\ensuremath{E_{\rm calo}^{\rm EM+JES}}\xspace}
\newcommand{\pTlead}    {\ensuremath{p_{T,{\rm lead}}}\xspace}
\newcommand{\pTsublead} {\ensuremath{p_{T,{\rm sub-leading}}}\xspace}
\newcommand{\pTone}     {\ensuremath{p_{T,1}}\xspace}
\newcommand{\ptone}     {\pTone}
\newcommand{\pTtwo}     {\ensuremath{p_{T,2}}\xspace}
\newcommand{\pttwo}     {\pTtwo}
\newcommand{\pTthree}   {\ensuremath{p_{T,3}}\xspace}
\newcommand{\ptthree}   {\pTthree}

%%% Jet algorithms
\newcommand{\kt}        {\ensuremath{k_{t}}\xspace}
\newcommand{\AKT}       {anti-\kt}
\newcommand{\antikt}    {\AKT}
\newcommand{\AKTSix}    {\AKT, \ensuremath{R=0.6}\xspace}
\newcommand{\AKTFat}    {\AKT, \ensuremath{R=1.0}\xspace}
\newcommand{\AKTPrune}  {\AKT, \ensuremath{R=1.0} (pruned)\xspace}
\newcommand{\AKTFilt}   {\AKT, \ensuremath{R=1.0} (filtered)\xspace}
\newcommand{\AKTTrim}   {\AKT, \ensuremath{R=1.0} (trimmed)\xspace}
\newcommand{\yij}       {\ensuremath{y_{ij}}\xspace}
\newcommand{\dcut}      {\ensuremath{d_{\rm cut}}\xspace}
\newcommand{\dmin}      {\ensuremath{d_{\min}}\xspace}
\newcommand{\dij}       {\ensuremath{d_{ij}}\xspace}
\newcommand{\fcut}      {\ensuremath{f_{\rm cut}}\xspace}
\newcommand{\Rsub}      {\ensuremath{R_{\rm sub}}\xspace}
\newcommand{\drsub}     {\ensuremath{\Rsub}\xspace}
\newcommand{\mufrac}    {\ensuremath{\mu_{\rm frac}}\xspace}
\newcommand{\rcut}      {\ensuremath{R_{\rm cut}}\xspace}
\newcommand{\zcut}      {\ensuremath{z_{\rm cut}}\xspace}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% EDITORIAL MACROS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Figure, section, subsection refs
\newcommand{\figref}[1]       {figure~\ref{#1}}
\newcommand{\Figref}[1]       {Figure~\ref{#1}}
\newcommand{\figsref}[2]      {figures~\ref{#1} and \ref{#2}}
\newcommand{\Figsref}[2]      {Figures~\ref{#1} and \ref{#2}}
\newcommand{\figrange}[2]     {figures~\ref{#1}--\ref{#2}}
\newcommand{\Figrange}[2]     {Figures~\ref{#1}--\ref{#2}}
\newcommand{\eref}[1]         {eq.~\ref{#1}}
\newcommand{\Eref}[1]         {Eq.~\ref{#1}}
\newcommand{\equref}[1]       {eq.~(\ref{#1})}
\newcommand{\Equref}[1]       {Eq.~(\ref{#1})}
\newcommand{\tabref}[1]       {table~\ref{#1}}
\newcommand{\Tabref}[1]       {Table~\ref{#1}}
\newcommand{\secref}[1]       {section~\ref{#1}}
\newcommand{\Secref}[1]       {Section~\ref{#1}}
\newcommand{\secrange}[2]     {sections~\ref{#1}--\ref{#2}}
\newcommand{\Secrange}[2]     {Sections~\ref{#1}--\ref{#2}}
\newcommand{\appref}[1]       {appendix~\ref{#1}}
\newcommand{\Appref}[1]       {Appendix~\ref{#1}}
\newcommand{\bibref}[1]       {\cite{#1}}

\newcommand{\editnote}[2][Ed] {{[{\bf {#1}: }{\textcolor{red}{#2}}]}}
\newcommand{\placeholder}[3]  {\framebox[#1]{\begin{minipage}[t]{#1} \centering #3 \vspace{#2}\end{minipage}}}
\newcommand{\alertbf}[1]      {{\alert{\textbf{#1}}}}
\newcommand{\boldit}[1]       {{\textit{\textbf{#1}}}}
\newcommand{\bluebf}[1]       {{\textcolor{blue}{\textbf{#1}}}}
\newcommand{\greenbf}[1]      {{\textcolor{green}{\textbf{#1}}}}
\newcommand{\ubf}[1]          {\underline{\textbf{#1}}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{xparse}
\DeclareDocumentCommand{\restr}{m m o}  
{%
 \IfNoValueTF{#3}
 {
 \left.\kern-\nulldelimiterspace % automatically resize the bar with %\right
 #1 % the function
 \vphantom{\big|} % pretend it's a little taller at normal size
 \right|_{#2}
 }{
 \left.\kern-\nulldelimiterspace % automatically resize the bar with %\right
 #1 % the function
 \vphantom{\big|} % pretend it's a little taller at normal size
 \right|_{#2}^{#3} }
}




\makeatletter  %define \xoverline, automatically sized overline
\newsavebox\myboxA
\newsavebox\myboxB
\newlength\mylenA
\newcommand*\xoverline[2][0.75]{%
    \sbox{\myboxA}{$\m@th#2$}%
    \setbox\myboxB\null% Phantom box
    \ht\myboxB=\ht\myboxA%
    \dp\myboxB=\dp\myboxA%
    \wd\myboxB=#1\wd\myboxA% Scale phantom
    \sbox\myboxB{$\m@th\overline{\copy\myboxB}$}%  Overlined phantom
    \setlength\mylenA{\the\wd\myboxA}%   calc width diff
    \addtolength\mylenA{-\the\wd\myboxB}%
    \ifdim\wd\myboxB<\wd\myboxA%
       \rlap{\hskip 0.5\mylenA\usebox\myboxB}{\usebox\myboxA}%
    \else
        \hskip -0.5\mylenA\rlap{\usebox\myboxA}{\hskip 0.5\mylenA\usebox\myboxB}%
    \fi}
\makeatother



\usepackage{graphicx}
\newcommand{\PRLsep}{   %decorative line used to separate sections
           \noindent\makebox[\linewidth]{
                \resizebox{0.5\linewidth}{1pt}{$\blacklozenge$}}}

\usepackage{scalerel}
\newcommand\wh[1]{\hstretch{1.42}{\hat{\hstretch{.7}{#1\mkern2mu}}}\mkern-2mu} %requires \usepackage{graphicx,scalerel}
\newcommand\wt[1]{\hstretch{1.42}{\tilde{\hstretch{.7}{#1\mkern2mu}}}\mkern-2mu}
\newcommand\wb[1]{\hstretch{1.42}{\bar{\hstretch{.7}{#1\mkern2mu}}}\mkern-2mu}



% DEFINE EMAIL COMMAND
\makeatletter
\newcommand\email[2][]%
  {\newaffiltrue\let\AB@blk@and\AB@pand
      \if\relax#1\relax\def\AB@note{\AB@thenote}\else\def\AB@note{\relax}%
        \setcounter{Maxaffil}{0}\fi
      \begingroup
        \let\protect\@unexpandable@protect
        \def\thanks{\protect\thanks}\def\footnote{\protect\footnote}%
        \@temptokena=\expandafter{\AB@authors}%
        {\def\\{\protect\\\protect\Affilfont}\xdef\AB@temp{#2}}%
         \xdef\AB@authors{\the\@temptokena\AB@las\AB@au@str
         \protect\\[\affilsep]\protect\Affilfont\AB@temp}%
         \gdef\AB@las{}\gdef\AB@au@str{}%
        {\def\\{, \ignorespaces}\xdef\AB@temp{#2}}%
        \@temptokena=\expandafter{\AB@affillist}%
        \xdef\AB@affillist{\the\@temptokena \AB@affilsep
          \AB@affilnote{}\protect\Affilfont\AB@temp}%
      \endgroup
      \let\AB@affilsep\AB@affilsepx
}
\makeatother


% WIDTH OF CAPTIONS
%\usepackage[font={small}]{caption}
%\captionsetup{width=\columnwidth}
