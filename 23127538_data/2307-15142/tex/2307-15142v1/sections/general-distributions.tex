\section{Evaluating diversity}\label{sec:diversity}

We now formalize our approach to evaluating diversity. For a set $S$ of items, we define
\begin{equation}
    r_t(S) := \frac{\text{\# of items in }S\text{ of type }t}{|S|},
\end{equation}
the \textbf{representation} of type $t$ in $S$. Intuitively, a set of recommendations is diverse if all types are well represented. We now define an interpretable family of representations that interpolates between maximum diversity and maximum homogeneity, and which arises naturally in many of our results.

\begin{definition}[$\gamma$-homogeneity]
A set $S$ is \textbf{$\bm{\gamma}$-homogeneous} if for all $t\in [m],$
\begin{equation}\label{eq:gamma}
r_t(S) = \frac{p_t^{\gamma}}{\sum_{i=1}^m p_i^{\gamma}}.
\end{equation}
\end{definition}

\noindent $\gamma$-homogeneity captures several intuitive notions of diversity, using $p_1,\cdots,p_m$ as a benchmark:
\begin{itemize}[leftmargin=*]
\item When $\gamma = 0$, $r_t(S)=\frac{1}{m}.$ There is ``equal representation.''
\item When $\gamma = 1$, $r_t(S)=p_t.$ There is ``proportional representation,'' where an item type is represented in proportion to its likelihood.
\item When $\gamma = \infty$, $r_t(S)=1$ for $t=\argmax_{i\in [m]} p_i$ and $r_t(S)=0$ otherwise. There is ``complete homogeneity,'' where only the highest-likelihood item type is represented.
\end{itemize}
A smaller $\gamma$ corresponds to more diversity, with $\gamma\le 1$ indicating \textit{at least proportional} representation. In practice, it is challenging to show that individual sets are $\gamma$-homogeneous; for one, since sets have an integer number of items from each type, it is typically impossible to obtain the exact ratios in \eqref{eq:gamma}. Instead, we will give primarily asymptotic results, showing that as $n$ grows large, the optimal set $S_{n,k}$ approaches $\gamma$-homogeneity. Formally, we define $\gamma$-homogeneity over sequences of sets:

\begin{definition}[$\gamma$-homogeneity for set sequences]
A sequence of sets $\{S_n\}_{n=1}^\infty$ is \textbf{$\bm{\gamma}$-homogeneous} if for all $t\in [m],$
\begin{equation}
\lim_{n\rightarrow \infty} r_t(S_n) = \frac{p_t^{\gamma}}{\sum_{i=1}^m p_i^{\gamma}}.
\end{equation}
\end{definition}

One perhaps surprising aspect of our results is that $\gamma$-homogeneity is sufficient to characterize diversity in a large class of settings, as opposed to requiring more complicated functions of proportions $p_t$. 

\section{Main results}
We now state our main results, which consider several settings reflecting different assumptions about the conditional item values $X_i^{(t)}.$ In \Cref{sec:general}, we assume that $X_i^{(t)}\simiid \DD$ are drawn from a shared distribution, which implies that the recommender has little information about the value of specific items. In \Cref{sec:bernoulli}, $X_i^{(t)}$ are Bernoulli random variables with success probabilities differing depending on $i$ and $t$, meaning that the recommender has information about which items are more likely to satisfy a user.

In each setting, we analyze the diversity of optimal sets $S_{n,k}$ for when $k$ is fixed (i.e., accounting for consumption constraints) and $k=n$ (i.e., not accounting for consumption constraints). We sketch our proof strategy in \Cref{sec:proof-sketch} and defer full proofs to \Cref{sec:proofs}.

\subsection{i.i.d. conditional item values}\label{sec:general}
Consider the setting in which
$X_i^{(t)}\simiid \DD,$
i.e., conditional item values are drawn from a shared distribution. This implies that the values of items behave similarly across types and within types, and the platform cannot easily distinguish between the items in a type. From the perspective of a hiring platform, there may be many candidates with similar backgrounds (e.g., education or work history), none of whom can be distinguished from another by the platform. Conditional on a recruiter preferring this background, candidate values can be modeled as coming from a shared distribution.

We show that for a fixed $k$, as $n$ grows large, the diversity of $S_{n,k}$ theoretically varies between equal representation, proportional representation, and near-complete homogeneity depending on the tail-behavior of $\DD$. In particular, distributions that are bounded or have exponential tails induce at least proportional representation. Meanwhile, $S_{n,n}$ is completely homogeneous.

\begin{theorem}\label{thm:general}
Suppose $X_i^{(t)}\simiid \DD$ where $\DD$ has finite mean. Then the following statements hold.
\begin{enumerate}
\item[(i)] \textbf{[Finite Discrete]} If $\DD$ is a finite discrete distribution, $\{S_{n,k}\}_{n=1}^\infty$ is $0$-homogeneous.
\item[(ii)] \textbf{[Bounded]} If $\DD$ has support bounded from above by $M$ with pdf $f_\DD$ satisfying
\begin{equation}
\lim_{x\rightarrow M} \frac{f_\DD(x)}{(M-x)^{\beta-1}} = c
\end{equation}
for some $\beta, c>0$, then $\{S_{n,k}\}_{n=1}^\infty$ is $\frac{\beta}{\beta+1}$-homogeneous.\\(This pdf class contains beta distributions, including the uniform distribution.)
\item[(iii)] \textbf{[Exponential tail]} If $\DD = \Exp(\lambda)$ for $\lambda > 0,$ then $\{S_{n,k}\}_{n=1}^\infty$ is $1$-homogeneous.
\item[(iv)] \textbf{[Heavy tail]} If $\DD = \Pareto(\alpha)$ for $\alpha>1$, then $\{S_{n,k}\}_{n=1}^\infty$ is $\frac{\alpha}{\alpha-1}$-homogeneous.
\end{enumerate}
Additionally,
\begin{enumerate}
    \item[(v)] $S_{n,n}$ contains only items of type $t = \argmax_{t\in [m]} p_t.$
\end{enumerate}
\end{theorem}

As \Cref{table:thmgeneral} illustrates, the theorem shows how for fixed $k$, the diversity of optimal solutions depends on the tail behavior of $\DD$. In fact, we can obtain $\gamma$-homogeneity for any $\gamma$:
\begin{corollary}
    For any $\gamma\ge 0,$ there exists $\DD$ such that when $X_i^{(t)}\simiid \DD$ and $k$ is fixed, $\{S_{n,k}\}_{n=1}^\infty$ is $\gamma$-homogeneous.
\end{corollary}
Intuitively, heavy-tailed distributions (part (iv)) induce less diverse recommendations since the marginal returns of recommending more items from the same type remains high: drawing more samples from a heavy-tailed distribution produces ever-increasing item values. This contrasts with bounded distributions like the uniform distribution (part (ii)), where once an item has close to the maximum value, additional draws of that type will not further improve the utility significantly. 
\input{figures/bigtable.tex}

\paragraph{A result for finite $n$ and larger $k$.} One limitation of our main results is that they are asymptotic $(n\rightarrow \infty)$ and are restricted to fixed consumption constraints $k$. Stronger results can be obtained by considering specific distributions. For example, the result below characterizes for any $n, k$ the representation of each type when conditional item values are uniformly distributed on $[0,1].$

\begin{proposition}\label{prop:uniform}
When $X_i^{(t)}\simiid U([0,1])$,
\begin{equation}
    \left|r_t(S_{n,k}) - \frac{\sqrt{p_t}}{\sum_{i=1}^m \sqrt{p_i}}\right|\le \frac{m+1}{n}.
\end{equation}
for all $k\le \frac{\sqrt{p_m}}{\sum_{i=1}^m \sqrt{p_i}}n - m - 1.$
\end{proposition}
Therefore, for any $n$, $S_{n,k}$ is approximately $\frac{1}{2}$-homogeneous. In addition, for any $k$ that is smaller than a constant fraction of $n$, the diversity $S_{n,k}$ does not depend on $k$. Thus, even for small sets of recommendations and large consumption constraints, diversity is optimal in this setting. We further give simulated results for small $n$ and large $k$ in \Cref{sec:simulations} corroborating our theoretical results.