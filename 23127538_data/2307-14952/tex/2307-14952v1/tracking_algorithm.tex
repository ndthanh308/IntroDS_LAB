\begin{algorithm}[H] \label{alg: tracking single}
\SetAlgoLined
    \textit{Initialization:} Set $z_j[0] = w_j = \bm{0}\in \mathbb{R}^d$, $m_j[0] = 1 \in \mathbb{R}$, $\sigma_j[0] = \bm{0} \in \mathbb{R}^d$, $\Tilde{\sigma}_j[0] = 0 \in \mathbb{R}$; $\rho_{kj}[0] = \bm{0} \in \mathbb{R}^d$, $\Tilde{\rho}_{kj}[0] = 0 \in \mathbb{R}$ for each agent $j$ with incoming edge $(k, j)$, $\eta[t] \in O(\frac{1}{t})$
    
\medskip
 
\For{$t = 1,... ,T$} {
    
Obtain measurement $y_j[t]$ according to Equation \eqref{eq: tracking observation}\;   
Compute a local stochastic gradient $g_j[t]$ that corresponds to the previous measurement $y_j[t-1]$ evaluated at local estimated $w_j[t-1]$\;  
            
\text{(Mass-preserving broadcast:)} 
        
        $\sigma_j^+[t] \gets \sigma_j[t-1] + \frac{z_j[t-1]}{d_j[t]+1}$ ~~ \text{and} ~ 
        $\Tilde{\sigma}_j^+[t] \gets \Tilde{\sigma}_j[t-1] + \frac{m_j[t-1]}{d_j[t]+1}$\; 
        
        Broadcast $(\sigma_j^+[t], \Tilde{\sigma}_j^+[t])$ to all outgoing neighbors of agent $j$\; 
        
        \For{each incoming link $(k, j)$ at time $t$} {
            \uIf{message $(\sigma_{k}^+[t], \Tilde{\sigma}_{k}^+[t])$ are received} {
                {\red $\rho^+_{kj}[t] \gets \sigma_{k}^+[t]$ ~ \text{and}~ $\Tilde{\rho}^+_{kj}[t] \gets \Tilde{\sigma}_{k}^+[t]$\; } 
            }
            \Else{
               {\red   $\rho^+_{kj}[t] \gets \rho_{kj}[t-1]$ ~ \text{and}~ $\Tilde{\rho}^+_{kj}[t] \gets \Tilde{\rho}_{kj}[t-1]$\; }
            }
            
        }
        
   
        $z_j^+[t] \gets \frac{z_j[t-1]}{d_j[t]+1} + \sum_{k \in \calI_j[t]} {\red (\rho^+_{kj}[t] - \rho_{k j}[t-1])}$, and  
        
        
        $m_j^+[t] \gets \frac{m_j[t-1]}{d_j[t]+1} + \sum_{k \in \calI_j[t]} {\red (\Tilde{\rho}^+_{kj}[t] - \Tilde{\rho}_{kj}[t-1])} $\; 
        

        
        {\red $\sigma_j[t] \gets A\pth{\sigma_j^+[t] + \frac{z_j^+[t]}{d_j[t]+1}}$, and $\Tilde{\sigma}_j[t] \gets \Tilde{\sigma}_j^+[t] + \frac{m_j^+[t]}{d_j[t]+1}$\; } 
        \For{each incoming link $(k, j)$ at time $t$} {
        {\red 
         $\rho_{kj}[t] \gets A\rho^+_{kj}[t]$, and $\Tilde{\rho}_{kj}[t] \gets \Tilde{\rho}^+_{kj}[t]$ 
        }
        }
        
        $z_j[t] \gets A\frac{z_j^+[t]}{d_j[t]+1} - \eta[t]g_j[t]$, and $m_j[t] \gets \frac{m_j^+[t]}{d_j[t]+1}$\; 
        $w_j[t] = \prod_{\calW}\qth{\frac{z_j[t]}{m_j[t]}}$.  
        % \vskip \baselineskip 
        
        % \text{(Dual Averaging Update Step:)} \\
        %  %\begin{itemize}
        %     %\item 
        %     Obtain measurement $y_i[t]$ according to Equation \ref{eq: tracking observation}\; 
        %     %\item 
        %     Compute a local stochastic gradient $g_j[t]$\;    
        %     %\item
        %     $z_j[t] \gets z^{++}_j[t] + g_j[t]$\; 
        %     %\item $w_j[t] \gets \prod_{w\in \calW}^{\varphi}(\frac{z_j[t]}{m_j[t]}, \alpha[t-1])$
        % %\end{itemize}
    }
%    \KwRet{$w_j[T]$}\ls{?}
 \caption{Collaborative tracking algorithm (for each agent $j\in \cup_{i=1}^M \calV_i$)}
\end{algorithm}