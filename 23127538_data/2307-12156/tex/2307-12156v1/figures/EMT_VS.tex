%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% EMT_SSS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass{standalone}

\usepackage{pgfplots}
\usetikzlibrary{pgfplots.groupplots}

% import style library
\usepackage{myStyleIEEE}

\begin{document}


\begin{tikzpicture}
    \begin{groupplot}[
    group style={
    group name=my plots,
    group size=1 by 2,
    vertical sep=2pt
    },
    footnotesize,
    scaled ticks=false,
    tick label style={/pgf/number format/fixed},
    colormap name=viridis,
    width=7.25cm,
    height=4cm,
    %trim axis left,
    %trim axis right,
    %xlabel style={yshift=0.75em},
    %ylabel style={yshift=-1.5em},
    xmin=-0, xmax=40,
    %ymin=0.9, ymax=1.1,
    xtick={0,10,20,30,40},
    %ytick={0.9,0.95,1,1.05,1.1},
    %legend pos=north east,
    xmajorgrids=true,
    ymajorgrids=true,
    legend cell align={left},
    grid style=dashed,
]

    \nextgroupplot[ylabel={$\mathrm{Voltage\,[p.u.]}$},xticklabels=\empty, yshift=-0.25em,
    ymin=0.85, 
    ymax=1.09, 
    % ytick={49.9, 50, 50.1}, 
    legend style={at={(axis cs:0.4,0.855)},anchor=south west,nodes={scale=0.75, transform shape}}
    ]
    \addplot[
        smooth,
        thick,
        color=pBlue,
        %fill=black, 
        %fill opacity=0.15
        ]
        table [x expr=\thisrow{X}/1, y expr=(\thisrow{Y}+0.035)]  {data/EMT_VS/data0.txt};    
        \addlegendentry{\footnotesize $V$}     

    \addplot[
        smooth,
        thick,
        dashed,
        color=pRed,
        %fill=black, 
        %fill opacity=0.15
        ]
        coordinates {(0,1)(40,1)};
        \addlegendentry{\footnotesize $V^*$}  
    \addplot+[mark=none, dashed, thick, color=pYellow]  coordinates {(2, 0.85) (2, 1.09)}; 
    \addplot+[mark=none, dashed, thick, color=pYellow]  coordinates {(22, 0.85) (22, 1.09)}; 
    \nextgroupplot[ylabel={$ \mathrm{Power}\,\mathrm{[p.u.]}$},xlabel={$t\,\mathrm{[s]}$}, yshift=-0.25em,
    ymin=-0.5, 
    ymax= 1.35, 
    % ytick={-1,-0.5,0,0.5}, 
    legend style={at={(axis cs:0.4,-0.46)},    anchor=south west,nodes={scale=0.75, transform shape}}
    ]
    \addplot[
        smooth,
        thick,
        color=pBlue,
        %fill=black, 
        %fill opacity=0.15
        ]
        table {data/EMT_VS/data1.txt}; 
        \addlegendentry{\footnotesize $P$}  
        
    \addplot[
        % smooth,
        thick,
        dashed,
        color=pRed,
        %fill=black, 
        %fill opacity=0.15
        ]
        coordinates {(0,0.83)(1.999,0.83)(2,0.98)(40,0.98)};
        \addlegendentry{\footnotesize $P^*$}  
    \addplot+[mark=none, dashed, thick, color=pYellow]  coordinates {(2, -0.5) (2, 1.35)}; 
    \addplot+[mark=none, dashed, thick, color=pYellow]  coordinates {(22, -0.5) (22, 1.35)};    
        
    \end{groupplot}
\end{tikzpicture} 

\end{document}