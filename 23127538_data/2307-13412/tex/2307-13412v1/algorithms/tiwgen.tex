\SetArgSty{textnormal} % normal text in if-conditions
\setlength{\textfloatsep}{0pt}% Remove \textfloatsep
\begin{algorithm}[!t]	
%	\algsetup{linenosize=\tiny}
	\footnotesize
%	\scriptsize
	\SetAlgoLined
	\LinesNumbered
	\DontPrintSemicolon
	
	% inputs
	\KwIn{Layer's weights matrix shape:  $P \times C = N_{\text{in}}K^2 \times N_{\text{out}}$}
	\nonl
	\myinput{Row and column tile sizes $T_P$ and $T_C$}
	\nonl
	\myinput{$\alpha$ values with $\alpha \in \mathbb{R}^{N_\text{in}N_\text{out}\left\lceil \rho K^2 \right\rceil}$}
	
	% outputs
	\KwOut{Weights matrix $\boldsymbol{W}$}
	
    \For(\Comment{\textit{tiles loop} - \textbf{\#} \textbf{\texttt{PIPELINE}}}){$t\gets1$ \KwTo $\left\lceil \frac{P}{T_P} \right\rceil$$\cdot$$\left\lceil \frac{C}{T_C} \right\rceil$}{
	   \For(\Comment{\textit{subtiles loop} - \textbf{\#} \textbf{\texttt{PIPELINE}}}){$i\gets1$ \KwTo $\left\lceil \frac{T_P T_C}{M} \right\rceil$}{
    	    $\text{subtile}^t_i \leftarrow \mathbf{0}$ \;
    	    \For(\Comment{\textit{basis vectors loop} - \textbf{\#} \textbf{\texttt{PIPELINE}}}){$j\gets1$ \KwTo $\rho K^2$}{
    	       % \textbf{\#} \textbf{\texttt{CNN-WGen}}: \textit{pipeline}\;
    	        \For(\Comment{\textbf{\#} \textbf{\texttt{UNROLL}}}){$k\gets1$ \KwTo $M$}{
    	            $incr_k \leftarrow \text{vec}_j(k) \cdot \alpha_k$ \hspace{0.37in}\Comment{\textit{Multiplier array}} \;
    	            $\text{subtile}^t_i(k) \leftarrow \text{subtile}^t_i(k) + incr_k$ \hfill\Comment{\textit{Adder array}}\;
    	        }
    	    }
    	    $\text{tile}^t \leftarrow \text{UpdateTile}(\text{tile}^t,\text{subtile}^t_i)$\;
    	}
    	$\boldsymbol{W} \leftarrow \text{UpdateMatrix}(\boldsymbol{W}, \text{tile}^t)$\;
	}
	
		
	\caption{\footnotesize 
	Generation of a layer's weights using TiWGen
	}
	\label{alg:tiled_weights_gen}	
\end{algorithm}
