\begin{algorithm}[H]
\label{splitrootleaf}
\caption{\texttt{splitRootLeaf}}
$\textup{Node* } leftChild :=$ \texttt{new leafNode()}\;
$\textup{Node* } rightChild :=$ \texttt{new leafNode()}\;
$leftChild \rightarrow next := rightChild$ \;
$rightChild \rightarrow next := next$ \;
Split \textit{\textbf{this}} node into a pair of nodes pointed to by $leftChild$ and $rightChild$\;
\If{\textup{!}$\ newNext$.\texttt{\textup{CAS}}($nullptr,\ leftChild$)}{
    $leftChild := newNext$\;
    $rightChild := leftChild \rightarrow next$\;
}

$\textup{Node* } newNode :=$ \texttt{new internalNode()}\;
$newNode \rightarrow ptr[0] := leftChild$\;
$newNode \rightarrow ptr[1] := rightChild$\;
$newNode \rightarrow key[0] := rightChild's$  first key\;
\textbf{if} \textup{!}$\,root$.\texttt{CAS}($this,\ newNode$) \textbf{then} \textbf{return} \texttt{nullptr}\; 
\textbf{return} $newNode$\;
\end{algorithm}