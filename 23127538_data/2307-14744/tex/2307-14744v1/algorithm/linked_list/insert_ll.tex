\begin{algorithm}[H]
\label{llinsert}
\caption{\texttt{llInsert}(key, value)}
\While{\textup{\texttt{true}}}
{
    llNode* $prevNode :=$ \texttt{nullptr}\;
    llNode* $nextNode :=$ \texttt{llFind}($key,\  \&prevNode$)\;
    \label{alg21:line252}
    \If{$nextNode =$ \textup{\texttt{nullptr}}}
    {
        \textbf{return} \texttt{false}\;
    }
    \ElseIf{$nextNode \rightarrow key = key$}
    {
        \While{\textup{\texttt{true}}}
        {
            $currVhead := nextNode \rightarrow vhead$\;
            \textbf{if} \texttt{isMarked}($currVhead$) \textbf{then} \textbf{return} \texttt{false} \;
            $currValue :=$ \texttt{read}($currVhead)$\;
            \textbf{if}\texttt{vCAS}($nextNode,\ currValue,\ value,\ currVhead $) \textbf{then} \textbf{return} \texttt{true}\;
            \label{alg21:line260}
        }
    }
    \Else
    {
        llNode* $newNode :=$ \texttt{new llNode}($key,\ value$)\;
        $newNode \rightarrow next := nextNode$\;
        \If{$prevNode \rightarrow next$.\textup{\texttt{CAS}}($nextNode,\ newNode$)}{
            \label{alg21:line264}
            \texttt{initTs}$(newNode \rightarrow vhead)$\;
            \label{alg21:line265}
            \textbf{return} \texttt{true}\;
        }
        \textbf{else if} \texttt{isMarked}($prevNode \rightarrow next$) \textbf{then return} \texttt{false}\;
    }
}
\end{algorithm}