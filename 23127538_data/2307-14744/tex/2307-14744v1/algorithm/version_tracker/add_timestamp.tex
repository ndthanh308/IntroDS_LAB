\begin{algorithm}[H]
\label{addtimestamp}
\caption{\texttt{addTimestamp}()}
\While{\textup{\texttt{true}}}{
    $currTail := tail$\;
    TrackerNode* $\ newTail :=$ \texttt{new TrackerNode}$(currTail \rightarrow ts + 1 ,\ sentinelLast)$\;
    \If{$currTail \rightarrow next$.\textup{\texttt{CAS}} $(sentinelLast,\ newTail)$}{
        $tail$.\texttt{CAS}$(currTail,\ newTail)$\;
        \textbf{return} $newTail \rightarrow ts$\;
    }
    \Else{
        \While{\textup{\texttt{true}}}{
            $currTail := tail$\;
            \textbf{if} $currTail \rightarrow next = sentinelLast$ \textbf{then return}\;
            \textbf{else} $tail$.\texttt{CAS}$(currTail,\ currTail \rightarrow next)$\;
        }
    }
}
\end{algorithm}