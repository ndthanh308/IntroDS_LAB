\begin{algorithm}[H]
\label{markleaf}
\caption{\texttt{freezeLeaf()}}
llNode* $currNode := list.head$\;
\While{$currNode \rightarrow next \neq$ \textup{\texttt{nullptr}}}
{
    $currNode \rightarrow next$.\texttt{CAS}($currNode \rightarrow next,\ $ \texttt{markedRef}($currNode \rightarrow next$))\;
    \label{alg13:line163}
    $currNode \rightarrow vhead$.\texttt{CAS}($currNode \rightarrow vhead,\ $ \texttt{markedRef}($currNode \rightarrow vhead$))\;
    \label{alg13:line164}
    $currNode := currNode \rightarrow next$\;
}
$frozen := true$\;
$count := list$.\texttt{size()}\;
\end{algorithm}