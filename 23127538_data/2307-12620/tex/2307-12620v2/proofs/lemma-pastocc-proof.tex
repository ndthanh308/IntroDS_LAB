
\begin{definition}\label{def:forgettable:future}
Let $\tuple{\Htrace,\Ttrace}$ and $\tuple{\Htrace',\Ttrace}$ be two \HT-traces of length $\lambda$ and let $\rangeco{i}{0}{\lambda}$. We say denote by
$\tuple{\Htrace,\Ttrace} \sim_{i}\tuple{\Htrace',\Ttrace}$ the fact for all $\rangeo{j}{0}{i}$, $H_i = H'_i$.
\end{definition}

\begin{proposition}\label{prop:pure-past}
For all \HT-traces $\tuple{\Htrace,\Ttrace}$ and $\tuple{\Htrace',\Ttrace}$  and for all $\rangeco{i}{0}{\lambda}$, if
$\tuple{\Htrace,\Ttrace} \sim_{i}\tuple{\Htrace',\Ttrace}$ then for all $\rangeo{j}{0}{i}$ and for all past formulas $\varphi$,
$\tuple{\Htrace,\Ttrace},j \models \varphi$ iff $\tuple{\Htrace',\Ttrace}, j \models \varphi$
\end{proposition}


\begin{definition}[$\X^{i}$]\label{def:bigX}
Let $\tuple{\Htrace,\Ttrace}$ be a \HT{-trace} of length $\lambda$ and $\rangeo{i}{0}{\lambda}$.
We denote $\X^{i}$ the trace of length $\lambda$ satisfying $X^i_k = \emptyset$ for all $\rangeo{k}{0}{i}$.
\end{definition}






\begin{lemma}\label{lem:pastocc}
    For all \HT{-traces} $\tuple{\Htrace,\Ttrace}$ of length $\lambda$, for all $\rangeo{i}{0}{\lambda}$ and for any past formula $\varphi$,
    if each present and positive occurrence of an atom from $X^i_i$
    in $\varphi$ is in the scope of negation then $\tuple{\Htrace,\Ttrace}, i \models \varphi$ iff $\tuple{\Htrace\setminus \X^i , \Ttrace},i \models \varphi$.
\end{lemma}

\begin{proofof}{Lemma \ref{lem:pastocc}}
By induction on $\varphi$.
First, note that for any formula $\phi$ of the form $\varphi\vee\psi$, $\varphi\wedge\psi$,
$\varphi\trigger\psi$ or $\varphi\since\psi$, if all present and positive occurrences of an atom $p$ are in the
scope of negation in $\phi$, then all present and positive occurrences of $p$ are also in the scope of negation
in $\varphi$ and $\psi$.

\begin{itemize}
    \item case $\bot$: clearly, $\tuple{\Htrace,\Ttrace},i\not\models\bot$  and $\tuple{\Htrace\setminus\X^i,\Ttrace},i\not\models\bot$.
    \item case $p$:
    	we consider two cases.
        If $p\not\in X^i_i$,
        $\tuple{\Htrace,\Ttrace},i\models p$ iff $p\in H_i$, iff $p\in H_i\setminus X_i$,
        iff $\tuple{\Htrace\setminus\X^i,\Ttrace},i\models p$.

        If $p\in X^i_i$, then $p$ has a present and positive occurence in $\varphi$, which is not in the scope of negation.
        Therefore, the lemma automatically holds.

    \item case $\neg \varphi$:
        $\tuple{\Htrace,\Ttrace},i \models \neg\varphi$ iff
        $\tuple{\Ttrace,\Ttrace},i \not\models \varphi$ iff
        $\tuple{\Htrace\setminus\X^i(L),\Ttrace},i \models \neg\varphi$ (because of persistency).


    \item case $\previous \varphi$:
    \begin{itemize}
        \item if $i=0$, then $\tuple{\Htrace,\Ttrace},i \not\models \previous\varphi$ and
                  $\tuple{\Htrace\setminus\X^i,\Ttrace},i \not\models \previous\varphi$.
    	\item if $i>0$, then $\tuple{\Htrace,\Ttrace},i \models \previous\varphi$ iff
    	$\tuple{\Htrace,\Ttrace},i-1 \models \varphi$.
    	%As $X^i_{i-1}=\emptyset$, we can apply the induction hypothesis, so
        Let $X^{i-1}$ be such that $X^{i-1}_{i-1}=\emptyset$. Then, we can apply the induction hypothesis, so
    	$\tuple{\Htrace,\Ttrace},i-1 \models \varphi$ iff (IH)
    	$\tuple{\Htrace\setminus\X^{i-1},\Ttrace},i-1 \models \varphi$.
    	Since $\tuple{\Htrace\setminus\X^{i-1},\Ttrace}\sim_{i} \tuple{\Htrace\setminus\X^{i},\Ttrace}$ (Proposition~\ref{prop:pure-past})
    	then $\tuple{\Htrace\setminus\X^{i-1},\Ttrace},i-1 \models \varphi$
    	iff $\tuple{\Htrace\setminus\X^{i},\Ttrace},i-1 \models \varphi$,
    	iff $\tuple{\Htrace\setminus\X^{i},\Ttrace},i \models \previous\varphi$.
    \end{itemize}

    \item case $\varphi\vee\psi$:
        $\tuple{\Htrace,\Ttrace},i \models \varphi\vee\psi$ iff
        $\tuple{\Htrace,\Ttrace},i \models \varphi$ or $\tuple{\Htrace,\Ttrace},i \models \psi$.
        Since all positive and present occurences of atoms from $X^i_i$ in $\varphi$ and $\psi$ are in the scope of
        negation, we can apply the induction hypothesis to get
        $\tuple{\Htrace\setminus\X^i,\Ttrace},i \models \varphi$ or $\tuple{\Htrace\setminus\X^i,\Ttrace},i \models \psi$.
        Therefore, $\tuple{\Htrace\setminus\X^i,\Ttrace},i \models \varphi\vee\psi$.
    \item case $\varphi\wedge\psi$: Similar as for $\varphi\vee\psi$.
    \item case $\varphi\since\psi$:
        $\tuple{\Htrace,\Ttrace},i \models \varphi\since\psi$ iff
        for some $\rangec{j}{0}{i}$, $\tuple{\Htrace,\Ttrace},j \models \psi$ and
        $\tuple{\Htrace,\Ttrace},k \models \varphi$ for all $\rangeoc{k}{j}{i}$.
        By induction we get that iff
        for some $\rangec{j}{0}{i}$, $\tuple{\Htrace\setminus \X^j,\Ttrace},j \models \psi$ and
        $\tuple{\Htrace\setminus \X^k,\Ttrace},k \models \varphi$ for all $\rangeoc{k}{j}{i}$.
        Since $\tuple{\Htrace\setminus \X^t,\Ttrace} \sim_t \tuple{\Htrace\setminus \X^i,\Ttrace}$ for all
        $\rangeco{t}{0}{i}$, by Proposition~\ref{prop:pure-past} we get that iff
        for some $\rangec{j}{0}{i}$, $\tuple{\Htrace\setminus \X^i,\Ttrace},j \models \psi$ and
        $\tuple{\Htrace\setminus \X^i,\Ttrace},k \models \varphi$ for all $\rangeoc{k}{j}{i}$.
        iff $\tuple{\Htrace\setminus\X^i,\Ttrace},i \models \varphi\since\psi$.
    \item case $\varphi\trigger\psi$:
        assume by contradiction that $\tuple{\Htrace\setminus\X^i,\Ttrace},i \not\models \varphi\trigger\psi$.
        This means that there exist $\rangec{j}{0}{i}$ such that $\tuple{\Htrace\setminus\X^i,\Ttrace},j \not\models \psi$ and
        $\tuple{\Htrace\setminus\X^i,\Ttrace},k \not\models \varphi$ for all $\rangeoc{k}{j}{i}$.
	    Since $\tuple{\Htrace\setminus \X^t,\Ttrace} \sim_t \tuple{\Htrace\setminus \X^i,\Ttrace}$ for all
	    $\rangeco{t}{0}{i}$, by Proposition~\ref{prop:pure-past} we get
		that there exist $\rangec{j}{0}{i}$ such that $\tuple{\Htrace\setminus\X^j,\Ttrace},j \not\models \psi$ and
		$\tuple{\Htrace\setminus\X^k,\Ttrace},k \not\models \varphi$ for all $\rangeoc{k}{j}{i}$.
		By induction, there exist $\rangec{j}{0}{i}$ such that $\tuple{\Htrace,\Ttrace},j \not\models \psi$ and
		$\tuple{\Htrace,\Ttrace},k \not\models \varphi$ for all $\rangeoc{k}{j}{i}$
		iff $\tuple{\Htrace,\Ttrace},i \not\models \varphi\trigger\psi$: a contradiction.
\end{itemize}
\end{proofof}
