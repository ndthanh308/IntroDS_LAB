
\begin{proofof}{Theorem \ref{thm:loops0}}

We first prove that if \Ttrace\ is a temporal answer set of $P$, then \Ttrace\ is a \LTLf-model of $P \cup \LF{P}$.
\Ttrace\ is a temporal answer set of $P$, so \Ttrace\ is a \LTLf-model of $P$.
We can show that \Ttrace\ is a \LTLf-model of \LF{P} the same way as for Theorem~\ref{thm:loops}.\\

%-------------------
Next, we prove that if \Ttrace\ is a \LTLf-model of $P \cup \LF{P}$, then \Ttrace\ is a temporal answer set of $P$.
It amounts to showing that there is no $\Htrace<\Ttrace$ such that $\tuple{\Htrace,\Ttrace}\models P$.
Let assume that there is such a trace $\Htrace$, and let $i$ be the smallest time point such that $H_i\subset T_i$.
%
\begin{enumerate}
	\item If $i>0$,
	Let $a\in T_i\setminus H_i$. $\tuple{\Ttrace,\Ttrace}\models \LF{P}$, so $\tuple{\Ttrace,\Ttrace},i \models a \leftrightarrow
	\bigvee_{r\in\dynamic{P}, a\in\Head{r}}(\support{a}{\body{r}}\wedge\bigwedge_{p\in \Head{r}\setminus \{a\}} \neg p)$.
	As $a\in T_i$, there exists $r\in\dynamic{P}$ such that $a\in\Head{r}$,
	$\tuple{\Ttrace,\Ttrace},i \models \support{a}{\body{r}}$ and $\tuple{\Ttrace,\Ttrace},i \models \bigwedge_{p\in \Head{r}\setminus \{a\}} \neg p$.
	$\tuple{\Htrace,\Ttrace}\models P$, so $\tuple{\Htrace,\Ttrace},i \models \body{r} \rightarrow a \vee\bigvee_{p\in\Head{r}\setminus\{a\}} p$.
	Then, $\tuple{\Htrace,\Ttrace},i \not\models \body{r}$ or $\tuple{\Htrace,\Ttrace},i \models a$ or
	$\tuple{\Htrace,\Ttrace},i \models \bigvee_{p\in\Head{r}\setminus\{a\}} p$.
	As $a\not\in H_i$, $\tuple{\Htrace,\Ttrace},i \not\models a$.
	As $\tuple{\Ttrace,\Ttrace},i \models \bigwedge_{p\in \Head{r}\setminus \{a\}} \neg p$,
	$\tuple{\Htrace,\Ttrace},i \not\models \bigvee_{p\in\Head{r}\setminus\{a\}} p$.
	So, $\tuple{\Htrace,\Ttrace},i \not\models \body{r}$.
	
	
	$\tuple{\Ttrace,\Ttrace},i \models \support{a}{\body{r}}$, $\tuple{\Htrace,\Ttrace},i \not\models \body{r}$ and $T_j\setminus H_j = \emptyset$ for $j<i$, so,
	by Lemma~\ref{lem:support}, there must be some $b\in T_i\setminus H_i$ with a present and positive occurence in $\body{r}$ that is not in the scope of negation.
	Therefore, for any $a\in T_i\setminus H_i$, there is some $b\in T_i\setminus H_i$ such that $(a,b)\in G(\dynamic{P})$.
	It implies a loop $L$ in $\dynamic{P}$, with $L\subseteq T_i\setminus H_i$.
	
	The strongly connected components (SCC) of the dependency graph of $\dynamic{P}$ over $T_i\setminus H_i$ form
	a directed acyclic graph, so there is some SCC $L$, such that,
	for any $a\in L$, there is no $b\in (T_i\setminus H_i)\setminus L$ such that $(a,b)\in \Graph{\dynamic{P}}$.
	
	
	For any $a\in T_i\setminus H_i$, $\tuple{\Htrace,\Ttrace},i\not\models \body{r}$, for all $r \in \dynamic{P}$
	such that $a\in\Head{r}$ and $\tuple{\Ttrace,\Ttrace},i \models \bigwedge_{p\in \Head{r}\setminus \{a\}} \neg p$.
	So $\tuple{\Htrace,\Ttrace},i\not\models \body{r}$, for all $r \in \dynamic{P}$ such that $L\cap\Head{r}\neq \emptyset$
	and $\tuple{\Ttrace,\Ttrace},i \models \bigwedge_{p\in \Head{r}\setminus L} \neg p$.
	Let \X\ be a trace of length $\lambda$ with $X_i=L$ and $X_j=\emptyset$ for $ j\neq i$.
	For any $a\in L$ there is no $b\in (T_i\setminus H_i)\setminus L$ such that $(a,b)\in \Graph{\dynamic{P}}$,
	so all positive and present occurences of atoms from $L$ in $\body{r}$ are in the scope of negation.
	Then, we can apply Lemma~\ref{lem:pastocc}, and get that
	$\tuple{\Ttrace\setminus \X,\Ttrace},i\not\models \body{r}$, for all $r \in \dynamic{P}$ such that $L\cap\Head{r}\neq \emptyset$
	and $\tuple{\Ttrace,\Ttrace},i \models \bigwedge_{p\in \Head{r}\setminus L} \neg p$.
	Then, as $X_i\setminus L = \emptyset$, by Lemma~\ref{lem:support},
	$\tuple{\Ttrace,\Ttrace},i\not\models \support{L}{\body{r}}$, for all $r \in \dynamic{P}$ such that $L\cap\Head{r}\neq \emptyset$
	and $\tuple{\Ttrace,\Ttrace},i \models \bigwedge_{p\in \Head{r}\setminus L} \neg p$.
	So, $\tuple{\Ttrace,\Ttrace},i\not\models \bigvee_{a\in L} a \rightarrow \mathit{ES}_{\dynamic{P}}(L)$,
	and then $\tuple{\Ttrace,\Ttrace}\not\models \LF{P}$: a contradiction.\\
	
	
	\item For the case when $i=0$ we reach a contradiction in a similar way as above.
\end{enumerate}

\end{proofof}
