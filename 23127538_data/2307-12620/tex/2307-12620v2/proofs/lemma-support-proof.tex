

\begin{definition}
	Let $L \subseteq \A$ and let $\lambda >0$ and $\rangeco{i}{0}{\lambda}$. By $\X(L)^i$ we mean a trace of length $\lambda$ satisfying the following conditions:
		\begin{enumerate}
			\item  $L \subseteq X(L)^i_i \subseteq \A$;
			\item  $X(L)^i_t = \emptyset$ for all $\rangeco{t}{0}{i}$.
		\end{enumerate}
\end{definition}



\begin{lemma}\label{lem:support}
    Let $\tuple{\Htrace,\Ttrace}$ be a \HT{-trace} of length $\lambda$, $\varphi$ a past formula. Let us consider the set of atoms $L\subseteq\A$.
    For all $\rangeo{i}{0}{\lambda}$, if each positive occurrence of an atom from $X(L)^i_i\setminus L$ in $\varphi$ is in the scope of negation,
    $\tuple{\Htrace,\Ttrace},i\models\support{L}{\varphi}$ iff $\tuple{\Htrace\setminus\X(L)^i,\Ttrace},i\models\varphi$.
%
%     Let $\X$ be a trace of length $\lambda$ such that $X_i \supseteq L$ and
%    $X_j=\emptyset$ for $\rangeo{j}{0}{i}$.
%    If each present and positive occurrence of an atom from $X_i\setminus L$ in $\varphi$ is in the scope of negation,
%    $\tuple{\Htrace,\Ttrace},i\models\support{L}{\varphi}$ iff $\tuple{\Htrace\setminus\X,\Ttrace},i\models\varphi$.
\end{lemma}
\begin{proofof}{Lemma~\ref{lem:support}}
    By induction on $\varphi$.
    First, note that for any formula $\phi$ of the form $\varphi\vee\psi$, $\varphi\wedge\psi$,
    $\varphi\trigger\psi$ or $\varphi\since\psi$, if all present and positive occurrences of an atom $p$ are in the
    scope of negation in $\phi$, then all present and positive occurrences of $p$ are also in the scope of negation
    in $\varphi$ and $\psi$.

    \begin{itemize}
    \item case $\bot$: $\tuple{\Htrace,\Ttrace},i\not\models\bot$ and $\tuple{\Htrace\setminus\X(L)^i,\Ttrace},i\not\models\bot$.
    \item case $p\not\in L$: we consider the following two cases
    	\begin{itemize}
    		\item If $p\not\in L$, $\support{L}{p}=p$ and, by definition, $p \not \in X(L)^i_i$.
    		      Therefore,  $\tuple{\Htrace,\Ttrace},i\models \support{L}{p}$ iff $\tuple{\Htrace,\Ttrace},i\models p $, iff $p\in H_i$
    		      iff $p\in H_i\setminus X(L)_i^i$, iff $\tuple{\Htrace\setminus\X(L)^i,\Ttrace},i\models p$.

    		\item If $p\in L$ then $p \not \in X(L)^i_i \setminus L$ and $\support{L}{p}=\bot$.
    		Therefore, we get that $\tuple{\Htrace,\Ttrace},i\not\models \support{L}{p}$ and $\tuple{\Htrace\setminus\X^i(L),\Ttrace},i\not\models p$.
    	\end{itemize}

    \item case $\neg\varphi$:
        $\tuple{\Htrace,\Ttrace},i\models \support{L}{\neg\varphi}$ iff $\tuple{\Htrace,\Ttrace},i\models \neg\varphi$,
        iff $\tuple{\Ttrace,\Ttrace},i\not\models \varphi$, iff $\tuple{\Htrace\setminus\X^i(L),\Ttrace},i\models \neg\varphi$.
    \item case $\previous\varphi$:
        $\tuple{\Htrace,\Ttrace},i\models\support{L}{\previous\varphi}$ iff $\tuple{\Htrace,\Ttrace},i\models\previous\varphi$.
        \begin{itemize}
        	\item If $i=0$, then both $\tuple{\Htrace,\Ttrace},0\not\models\previous\varphi$ and
        	      $\tuple{\Htrace\setminus\X(L)^0,\Ttrace},0\not\models\previous\varphi$.
        	\item If $i>0$, then
        	        $\tuple{\Htrace,\Ttrace},i\models\previous\varphi$ iff $\tuple{\Htrace,\Ttrace},i-1\models\varphi$.
        	        By definition, $X(L)^i_{j} = \emptyset$
        	        for $\rangeo{j}{0}{i}$ so by Lemma~\ref{lem:pastocc},
        	        $\tuple{\Htrace\setminus\X^{i}(L),\Ttrace},i-1\models\varphi$,
        	        iff $\tuple{\Htrace\setminus\X^i(L),\Ttrace},i\models\previous\varphi$.

        \end{itemize}



    \item case $\varphi\wedge\psi$:
        $\tuple{\Htrace,\Ttrace},i\models\support{L}{\varphi\wedge\psi}$\\
        iff $\tuple{\Htrace,\Ttrace},i\models\support{L}{\varphi}$ and $\tuple{\Htrace,\Ttrace},i\models\support{L}{\psi}$,\\
        iff (IH) $\tuple{\Htrace\setminus\X^i(L),\Ttrace},i\models\varphi$ and $\tuple{\Htrace\setminus\X^i(X),\Ttrace},i\models\psi$,\\
        iff $\tuple{\Htrace\setminus\X^i(L),\Ttrace},i\models\varphi\wedge\psi$.
    \item case $\varphi\vee\psi$:
        $\tuple{\Htrace,\Ttrace},i\models\support{L}{\varphi\vee\psi}$\\
        iff $\tuple{\Htrace,\Ttrace},i\models\support{L}{\varphi}$ or $\tuple{\Htrace,\Ttrace},i\models\support{L}{\psi}$,\\
        iff (IH) $\tuple{\Htrace\setminus\X^i(L),\Ttrace},i\models\varphi$ or $\tuple{\Htrace\setminus\X^i(L),\Ttrace},i\models\psi$,\\
        iff $\tuple{\Htrace\setminus\X^i(L),\Ttrace},i\models\varphi\vee\psi$.
%    \item case $\varphi\trigger\psi$
%        $\tuple{\Htrace,\Ttrace},i\models\support{L}{\varphi\trigger\psi}$\\
%        iff
%        \begin{enumerate}
%        	\item
%        \end{enumerate}
%
%
%        $\tuple{\Htrace,\Ttrace},i\models\support{L}{\psi}$ and, $\tuple{\Htrace,\Ttrace},i\models\support{L}{\varphi}$
%            or $\tuple{\Htrace,\Ttrace},i\models\previous(\varphi\trigger\psi)$,\\
%        iff (IH) $\tuple{\Htrace\setminus\X,\Ttrace},i\models\psi$  and, $\tuple{\Htrace\setminus\X,\Ttrace},i\models\varphi$
%                 or $\tuple{\Htrace,\Ttrace},i\models\previous(\varphi\trigger\psi)$,\\
%        iff $\tuple{\Htrace\setminus\X,\Ttrace},i\models\psi$  and, $\tuple{\Htrace\setminus\X,\Ttrace},i\models\varphi$
%            or $\tuple{\Htrace,\Ttrace},i-1\models\varphi\since\psi$,\\
%            iff, by Lemma~\ref{lem:pastocc} as $X_j=\emptyset$ for $\rangeo{j}{0}{i}$,
%            $\tuple{\Htrace\setminus\X,\Ttrace},i\models\psi$  and, $\tuple{\Htrace\setminus\X,\Ttrace},i\models\varphi$
%            or $\tuple{\Htrace\setminus\X,\Ttrace},i-1\models\varphi\since\psi$,\\
%        iff $\tuple{\Htrace\setminus\X,\Ttrace},i\models\psi$  and, $\tuple{\Htrace\setminus\X,\Ttrace},i\models\varphi$
%            or $\tuple{\Htrace\setminus\X,\Ttrace},i\models\previous(\varphi\since\psi)$,\\
%        iff $\tuple{\Htrace\setminus\X,\Ttrace},i\models\varphi\since\psi$.
    \item case $\varphi\since\psi$:
        $\tuple{\Htrace,\Ttrace},i\models\support{L}{\varphi\since\psi}$ iff
        \begin{enumerate}
        	\item $\tuple{\Htrace,\Ttrace},i\models\support{L}{\psi}$ iff  $\tuple{\Htrace\setminus\X^i(L),\Ttrace},i\models\psi$ (IH) or
        	\item $\tuple{\Htrace,\Ttrace},i\models\support{L}{\varphi}$ and $\tuple{\Htrace,\Ttrace},i\models\previous(\varphi\since\psi)$
        	iff  $\tuple{\Htrace\setminus\X^i(L),\Ttrace},i\models\varphi$ (IH) and $\tuple{\Htrace,\Ttrace},i\models\previous(\varphi\since\psi)$
        	iff  $\tuple{\Htrace\setminus\X^i(L),\Ttrace},i\models\varphi$ and $\tuple{\Htrace\setminus \X^i(L),\Ttrace},i\models\previous(\varphi\since\psi)$
        \end{enumerate}
        From the previous items we conclude iff
        $\tuple{\Htrace\setminus\X^i(L),\Ttrace},i\models \psi \vee \left( \varphi \wedge \previous \left(\varphi \since \psi\right)\right)$
        iff $\tuple{\Htrace\setminus\X^i(L),\Ttrace},i\models \varphi \since \psi$.

    \item case $\varphi\trigger\psi$:
		$\tuple{\Htrace,\Ttrace},i\not \models\support{L}{\varphi\trigger\psi}$ iff
		\begin{enumerate}
			\item $\tuple{\Htrace,\Ttrace},i\not \models\support{L}{\psi}$ iff  $\tuple{\Htrace\setminus\X^i(L),\Ttrace},i\not \models\psi$ (IH) or
			\item $\tuple{\Htrace,\Ttrace},i\not \models\support{L}{\varphi}$ and $\tuple{\Htrace,\Ttrace},i\not \models\previous(\varphi\trigger\psi)$
			iff  $\tuple{\Htrace\setminus\X^i(L),\Ttrace},i\not \models\varphi$ (IH) and $\tuple{\Htrace,\Ttrace},i\not \models\previous(\varphi\trigger\psi)$
			iff  $\tuple{\Htrace\setminus\X^i(L),\Ttrace},i\not \models\varphi$ and $\tuple{\Htrace\setminus \X^i(L),\Ttrace},i\not \models\previous(\varphi\trigger\psi)$
\end{enumerate}
From the previous items we conclude iff
$\tuple{\Htrace\setminus\X^i(L),\Ttrace},i\not \models \psi \wedge \left( \varphi \vee \previous \left(\varphi \trigger \psi\right)\right)$
iff $\tuple{\Htrace\setminus\X^i(L),\Ttrace},i\not \models \varphi \trigger \psi$.




%        iff $\tuple{\Htrace,\Ttrace},i\models\support{L}{\psi}$ or, \\
%        iff (IH) $\tuple{\Htrace\setminus\X,\Ttrace},i\models\psi$  or, $\tuple{\Htrace\setminus\X,\Ttrace},i\models\varphi$
%                 and $\tuple{\Htrace,\Ttrace},i\models\previous(\varphi\since\psi)$,\\
%        iff $\tuple{\Htrace\setminus\X,\Ttrace},i\models\psi$  or, $\tuple{\Htrace\setminus\X,\Ttrace},i\models\varphi$
%            and $\tuple{\Htrace,\Ttrace},i-1\models\varphi\since\psi$,\\
%        iff,  by Lemma~\ref{lem:pastocc} as $X_j=\emptyset$ for $\rangeo{j}{0}{i}$,
%        $\tuple{\Htrace\setminus\X,\Ttrace},i\models\psi$  or, $\tuple{\Htrace\setminus\X,\Ttrace},i\models\varphi$
%            and $\tuple{\Htrace\setminus\X,\Ttrace},i-1\models\varphi\since\psi$,\\
%        iff $\tuple{\Htrace\setminus\X,\Ttrace},i\models\psi$  or, $\tuple{\Htrace\setminus\X,\Ttrace},i\models\varphi$
%            and $\tuple{\Htrace\setminus\X,\Ttrace},i\models\previous(\varphi\since\psi)$,\\
%        iff $\tuple{\Htrace\setminus\X,\Ttrace},i\models\varphi\since\psi$.
    \end{itemize}
\end{proofof}
