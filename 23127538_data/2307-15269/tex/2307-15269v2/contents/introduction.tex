% no \IEEEPARstart

The appearance of blockchain has catalyzed the investigation of secure and resilient computation within decentralized systems fraught with Byzantine faults in both Nakamoto consensus and Byzantine Fault Tolerance (BFT) research. However, many public blockchains, such as Bitcoin~\cite{Nakamoto_2008}, rely on Proof of Work (PoW) and have been criticized due to energy consumption and constrained transaction throughput. In response to these challenges, alternative strategies offer a less computationally intensive mechanism. For example, executing the BFT algorithm based on a committee selected by Proof of Stack (PoS) has been adopted for balancing throughput and energy consumption. %This work studies the BFT protocols within an asynchronous network model~\cite{pass2017analysis} that is closest to our internet condition.

Numerous asynchronous BFT protocols have been studied in the past, and it constitutes a committee of nodes that are continuously proposing blocks (or proposals) and outputting a sequence of valid proposed blocks. Recently, Directed Acyclic Graph (DAG)-based consensus algorithms such as DAG-rider~\cite{Keidar_Kokoris-Kogias_Naor_Spiegelman_2021} and ``Narwhal and Tusk''~\cite{Danezis_Kokoris-Kogias_Sonnino_Spiegelman_2022} have demonstrated superior efficiency against existing solutions. However, two shortcomings persist: (1) There is high latency as one DAG consensus requires seven rounds of communication on average, and (2) The protocol's inability to discern failed transactions, which incurs additional costs (\eg additional communication for signatures from the committee) for practical application. This work offers a novel means to order transactions, thus improving BFT protocols' efficiency by relying on the UTXO Model.

\subsection{Related Works}

\paragraph{The BFT Revival}
The study of BFT consensus protocols has a long history~\cite{Castro_Liskov_2002, Yin_Malkhi_Reiter_Gueta_Abraham_2019, Duan_Zhang_2022, Sui_Duan_Zhang_2022}. These protocols are proved to tolerate $f$ byzantine faulty nodes among $N$ nodes, where $f<\frac{N}{3}$. Specifically, asynchronous BFT protocols~\cite{Kapron_Kempe_King_Saia_Sanwalani_2010,Miller_Xia_Croman_Shi_Song_2016,Lu_Lu_Tang_Wang_2020,Liu_Duan_Zhang_2020,Keidar_Kokoris-Kogias_Naor_Spiegelman_2021, Danezis_Kokoris-Kogias_Sonnino_Spiegelman_2022} usually requires all nodes to create proposals concurrently, thus avoid a single-node failure. 

The study of the BFT problem under asynchronous conditions started almost three decades ago with Ben-Or \etal~\cite{Ben-Or_Kelmer_Rabin_1994}. Since then, many solutions~\cite{Miller_Xia_Croman_Shi_Song_2016,Lu_Lu_Tang_Wang_2020,Zhang_Duan} have been proposed for solving this problem practically under the BFT framework. In 2021, Keidar~\etal~\cite{Keidar_Kokoris-Kogias_Naor_Spiegelman_2021} proposed DAG-rider, a novel approach that harnesses the DAG to organize all nodes' proposals and votes. This idea uses a growing sub-DAG to amortize the cost of making consensus, thereby drastically enhancing the speed of the asynchronous BFT algorithm. 

Building upon this foundation, Danezis~\etal~\cite{Danezis_Kokoris-Kogias_Sonnino_Spiegelman_2022} refines this design by merging the DAG with the gossip protocol to form the Narwhal Memory Pool, further dispersing the voting cost associated with the following proposal creation phase and catapults the system's throughput to a new peak (120K transactions per second on the Internet). Our work explores further improvement following these works.

\paragraph{The Blockchain UTXO Model}
Many Blockchain-based applications adopt the UTXO Model~\cite{Nakamoto_2008}, which is an alternative to the Account Model (\eg, a bank system and Ethereum~\cite{wood2014ethereum}). Chakravarty~\etal~\cite{Chakravarty_Chapman_2020} defined the \emph{Extended} UTXO Model as the stepping stone to provide smart contract capabilities to the Cardano Blockchain~\cite{EC:DGKR18,cardano}. Despite its wide use in the blockchain setting, to the best of our knowledge, not many protocols leverage the benefits of the UTXO Model to propose novel BFT protocol designs. This work showcases this approach by combining the BFT design and the \emph{Extended} UTXO Model to achieve better performance.

In the same spirit, MÃ¼ller~\etal~\cite{MPPTSM_2022} proposed a UTXO-based ledger using the early cited inherent UTXO design parallelism to improve performance, thus speeding up the consensus process in the blockchain setting. Our work uses a similar strategy to shorten the latency but for the BFT setting. Although the UTXO model is widely used for Nakamoto consensus, to our best knowledge, this is the first work to propose its use in the BFT consensus algorithm design. 
\subsection{Our Contributions}

This work has two main contributions:

\begin{itemize}

    \item[1] We introduce a novel DAG-based commit rule designed explicitly for a UTXO-based transaction model. We propose a new consensus protocol named ``Board and Clerk" to replace Tusk, effectively reducing transaction latency. 
    
     \item[2] We introduce two new proposing flows and the Hyper Block Model designed to authenticate transaction results, which has zero communication overhead.
	
\end{itemize}

More concretely, the DAG-based consensus under asynchronous network conditions takes seven rounds on average to commit a sub-DAG. We show this latency is not mandatory for most transactions in our solution. Our work relies on the UTXO Model and proposes a new commitment rule for reducing transaction latency. Specifically, we equipped the DAG-based consensus and the Narwhal Memory Pool from~\cite{Danezis_Kokoris-Kogias_Sonnino_Spiegelman_2022} with a new commit rule for transactions under the UTXO Model. This new commit rule allows us to fast commit the transaction with predictable results (succeed or failed),  reducing the transaction confirmation latency without harming the correctness property. We propose Board to handle the fast commitment and change Tusk accordingly as Clerk. Our experiment shows that our Board and Clerk can achieve better latency than the original Tusk.

Furthermore, DAG-based consensus does not have communication overhead (\ie, there is no additional communication after the DAG is created), which means the order of transactions is unknown when nodes construct the DAG. This scenario may lead to the possible commitment of conflicting transactions (transactions that consume at least one same input, a.k.a. double spending). Since the consensus does not generate additional signatures after gossiping proposals, a client faces challenges in substantiating a transaction's success without all nodes' assistance. We propose two strategies to adjust the proposal flow, ensuring that all nodes can predict all transaction outcomes if the consensus round picks their proposal. Once the consensus output is confirmed, any honest node can generate proof to authenticate whether a transaction was successful according to the corresponding commitment.

\subsection{Organization}
Section~\ref{sec:preliminaries} provides more details about the problems we will resolve and the building blocks of our protocol. Sections~\ref{sec:txorder} and~\ref{sec:hyperblock} thoroughly describe our protocol. Finally, Section~\ref{sec:implementation} provides the analysis and experimental results, whereas our final remarks are in Section~\ref{sec:conclusion}. 

