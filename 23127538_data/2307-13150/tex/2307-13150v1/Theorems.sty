\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{Theorems}
\RequirePackage{amsthm}
\RequirePackage{etoolbox}

% The thm option is strictly for backwards compatibility, it should never be used in new documents

% the type option numbers theorems by type. The default behavior is to number all theorem environments using the same counter.

% The section option enables theorem numbering by section.

% The relax option can be used if the class file already includes theorem definitions. Use of this style file in conjunction with class files that define their own theorem environments is strongly discouraged.

\newtoggle{type}
\togglefalse{type}
\newtoggle{section}
\togglefalse{section}
\newtoggle{thm}
\togglefalse{thm}
\newtoggle{short}
\togglefalse{short}
\newtoggle{relax}
\togglefalse{relax}
\DeclareOption{bytype}{\toggletrue{type}}
\DeclareOption{bysection}{\toggletrue{section}}
\DeclareOption{thm}{\toggletrue{thm}}
\DeclareOption{short}{\toggletrue{short}}
\DeclareOption{relax}{\toggletrue{relax}}
\ProcessOptions\relax

\providecommand{\theoremcommand}{theorem}
\providecommand{\conjecturecommand}{conjecture}
\providecommand{\factcommand}{fact}
\providecommand{\corollarycommand}{corollary}
\providecommand{\lemmacommand}{lemma}
\providecommand{\propositioncommand}{proposition}
\providecommand{\claimcommand}{claim}
\providecommand{\questioncommand}{question}
\providecommand{\exercisecommand}{exercise}
\providecommand{\assumptioncommand}{assumption}
\providecommand{\definitioncommand}{definition}
\providecommand{\propertycommand}{property}
\providecommand{\hypothesiscommand}{hypothesis}
\providecommand{\examplecommand}{example}
\providecommand{\remarkcommand}{remark}
\providecommand{\answercommand}{answer}

\iftoggle{thm}{
	\renewcommand{\theoremcommand}{thm}
	\renewcommand{\corollarycommand}{cor}
	\renewcommand{\lemmacommand}{lem}
	\renewcommand{\propositioncommand}{prop}
	\renewcommand{\definitioncommand}{defn}
	\renewcommand{\remarkcommand}{rem}
}{}

\iftoggle{short}{
	\renewcommand{\theoremcommand}{thrm}
	\renewcommand{\corollarycommand}{crllr}
	\renewcommand{\lemmacommand}{lmm}
	\renewcommand{\propositioncommand}{prpstn}
	\renewcommand{\definitioncommand}{dfntn}
	\renewcommand{\remarkcommand}{rmrk}
	\renewcommand{\examplecommand}{xmpl}
	\renewcommand{\claimcommand}{clm}
	\renewcommand{\conjecturecommand}{cnjctr}
}{}

\iftoggle{relax}{
	\let\theorem\relax
	\let\conjecture\relax
	\let\fact\relax
	\let\corollary\relax
	\let\lemma\relax
	\let\proposition\relax
	\let\claim\relax
	\let\question\relax
	\let\exercise\relax
	\let\assumption\relax
	\let\definition\relax
	\let\property\relax
	\let\hypothesis\relax
	\let\example\relax
	\let\remark\relax
	\let\answer\relax
}{}

\iftoggle{type}{
	\iftoggle{section}{
		\newcommand{\basetheorem}[1]{\newtheorem{\theoremcommand}{#1}[section]}
		\newcommand{\mytheorem}[2]{\newtheorem{#1}{#2}[section]}
	}{
		\newcommand{\basetheorem}[1]{\newtheorem{\theoremcommand}{#1}}
		\newcommand{\mytheorem}[2]{\newtheorem{#1}{#2}}
	}
}{
	\iftoggle{section}{
		\newcommand{\basetheorem}[1]{\newtheorem{\theoremcommand}{#1}[section]}
		\newcommand{\mytheorem}[2]{\newtheorem{#1}[\theoremcommand]{#2}}
	}{
		\newcommand{\basetheorem}[1]{\newtheorem{\theoremcommand}{#1}}
		\newcommand{\mytheorem}[2]{\newtheorem{#1}[\theoremcommand]{#2}}
	}
}

\providecommand{\theoremname}{Theorem}
\basetheorem{\protect\theoremname}
\newtheorem*{\theoremcommand*}{\protect\theoremname}

\providecommand{\conjecturename}{Conjecture}
\mytheorem{\conjecturecommand}{\protect\conjecturename}
\newtheorem*{\conjecturecommand*}{\protect\conjecturename}

\providecommand{\factname}{Fact}
\mytheorem{\factcommand}{\protect\factname}
\newtheorem*{\factcommand*}{\protect\factname}

\providecommand{\corollaryname}{Corollary}
\mytheorem{\corollarycommand}{\protect\corollaryname}
\newtheorem*{\corollarycommand*}{\protect\corollaryname}

\providecommand{\lemmaname}{Lemma}
\mytheorem{\lemmacommand}{\protect\lemmaname}
\newtheorem*{\lemmacommand*}{\protect\lemmaname}

\providecommand{\propositionname}{Proposition}
\mytheorem{\propositioncommand}{\protect\propositionname}
\newtheorem*{\propositioncommand*}{\protect\propositionname}

\providecommand{\claimname}{Claim}
\mytheorem{\claimcommand}{\protect\claimname}
\newtheorem*{\claimcommand*}{\protect\claimname}

\providecommand{\hypothesisname}{Hypothesis}
\mytheorem{\hypothesiscommand}{\protect\hypothesisname}
\newtheorem*{\hypothesiscommand*}{\protect\hypothesisname}

\providecommand{\questionname}{Question}
\theoremstyle{definition}
\mytheorem{\questioncommand}{\protect\questionname}
\theoremstyle{definition}
\newtheorem*{\questioncommand*}{\protect\questionname}

\providecommand{\exercisename}{Exercise}
\theoremstyle{definition}
\mytheorem{\exercisecommand}{\protect\exercisename}
\theoremstyle{definition}
\newtheorem*{\exercisecommand*}{\protect\exercisename}

\providecommand{\assumptionname}{Assumption}
\theoremstyle{definition}
\mytheorem{\assumptioncommand}{\protect\assumptionname}
\theoremstyle{definition}
\newtheorem*{\assumptioncommand*}{\protect\assumptionname}

\providecommand{\definitionname}{Definition}
\theoremstyle{definition}
\mytheorem{\definitioncommand}{\protect\definitionname}
\theoremstyle{definition}
\newtheorem*{\definitioncommand*}{\protect\definitionname}

\providecommand{\examplename}{Example}
\theoremstyle{definition}
\mytheorem{\examplecommand}{\protect\examplename}
\theoremstyle{definition}
\newtheorem*{\examplecommand*}{\protect\examplename}

\providecommand{\propertyname}{Property}
\theoremstyle{definition}
\mytheorem{\propertycommand}{\protect\propertyname}
\theoremstyle{definition}
\newtheorem*{\propertycommand*}{\protect\propertyname}

\providecommand{\remarkname}{Remark}
\theoremstyle{remark}
\mytheorem{\remarkcommand}{\protect\remarkname}
\theoremstyle{remark}
\newtheorem*{\remarkcommand*}{\protect\remarkname}

\newenvironment{\answercommand}{\proof[Answer]}{\endproof}

\endinput