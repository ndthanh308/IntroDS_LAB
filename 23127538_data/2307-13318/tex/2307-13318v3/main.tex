
%% For submission and review of your manuscript please change the
%% command to \documentclass[manuscript, screen, review]{acmart}.
%%
%% When submitting camera ready or to TAPS, please change the command
%% to \documentclass[sigconf]{acmart} or whichever template is required for your publication.

\documentclass[acmsmall,screen,nonacm]{acmart}
\settopmatter{printccs=false,printacmref=false}

%% Rights management information.  This information is sent to you
%% when you complete the rights form.  These commands have SAMPLE
%% values in them; it is your responsibility as an author to replace
%% the commands and values with those provided to you when you
%% complete the rights form.
% \setcopyright{acmlicensed}
% \copyrightyear{2018}
% \acmYear{2018}
% \acmDOI{XXXXXXX.XXXXXXX}

%% These commands are for a PROCEEDINGS abstract or paper.
% \acmConference[Conference acronym 'XX]{Make sure to enter the correct
%   conference title from your rights confirmation emai}{June 03--05,
%   2018}{Woodstock, NY}

%%
%%  Uncomment \acmBooktitle if the title of the proceedings is different
%%  from ``Proceedings of ...''!
%%
%%\acmBooktitle{Woodstock '18: ACM Symposium on Neural Gaze Detection,
%%  June 03--05, 2018, Woodstock, NY}
%% \acmISBN{978-1-4503-XXXX-X/18/06}


%%
%% Submission ID.
%% Use this when submitting an article to a sponsored event. You'll
%% receive a unique submission ID from the organizers
%% of the event, and this ID should be used as the parameter to this command.
%%\acmSubmissionID{123-A56-BU3}


%%
%% The majority of ACM publications use numbered citations and
%% references.  The command \citestyle{authoryear} switches to the
%% "author year" style.
%%
%% If you are preparing content for an event
%% sponsored by ACM SIGGRAPH, you must use the "author year" style of
%% citations and references.
%% Uncommenting
%% the next command will enable that style.
\citestyle{acmauthoryear}

\usepackage{booktabs}   %% For formal tables:
                        %% http://ctan.org/pkg/booktabs
\usepackage{subcaption} %% For complex figures with subfigures/subcaptions
                        %% http://ctan.org/pkg/subcaption
\renewcommand\footnotetextcopyrightpermission[1]{}
\newcommand\bmmax{0}
\let\Bbbk\relax
\usepackage{amssymb}
\usepackage{array,makecell}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{microtype}
\usepackage{balance}
\usepackage{multirow}
\usepackage{diagbox}
\usepackage{amsmath}
\usepackage{graphics}
\usepackage{multicol}
\usepackage{enumitem}
\usepackage{mathtools}
\usepackage{epsfig}
\usepackage{xspace}
\usepackage{extarrows}
\usepackage{bm}
\usepackage{rotating}
%\usepackage{paralist}
\usepackage{eucal}
\usepackage[symbol, flushmargin]{footmisc}
%\usepackage[vlined,boxed,ruled,linesnumbered]{algorithm2e}
\usepackage{multirow}
\usepackage{graphicx}
\usepackage{float}
%\usepackage{subfig}
\usepackage{ragged2e}
\usepackage[normalem]{ulem}
\usepackage{algorithm}
\usepackage{algorithmic}
\usepackage{setspace}
\usepackage{listings}
\usepackage[most]{tcolorbox}
\lstdefinelanguage{program}
{
morekeywords={if, then, else, fi, while, true, false, switch, case, skip, break},
sensitive = false
}

\newtheorem{example}{Example}
\newtheorem{remark}{Remark}
\newtheorem{definition}{Definition}
\newtheorem{lemma}{Lemma}
\newtheorem{proposition}{Proposition}

\input{macros}

\begin{document}

\title{Affine Disjunctive Invariant Generation with Farkas' Lemma}

%% Of note is the shared affiliation of the first two authors, and the
%% "authornote" and "authornotemark" commands
%% used to denote shared contribution to the research.

\author{Jingyu Ke}
\affiliation{
  \institution{Shanghai Jiao Tong University}
  \city{Shanghai}
  \country{China}
}
\email{windocotber@sjtu.edu.cn}

\author{Hongfei Fu}
\authornote{Corresponding Author}
\affiliation{
  \institution{Shanghai Jiao Tong University}
  \city{Shanghai}
  \country{China}
}
\email{jt002845@sjtu.edu.cn}

\author{Hongming Liu}
\affiliation{
  \institution{Shanghai Jiao Tong University}
  \city{Shanghai}
  \country{China}
}
\email{hm-liu@sjtu.edu.cn}

\author{Liqian Chen}
\affiliation{
  \institution{National University of Defense Technology}
  \city{Changsha}
  \country{China}
}
\email{lqchen@nudt.edu.cn}

\author{Guoqiang Li}
\affiliation{
  \institution{Shanghai Jiao Tong University}
  \city{Shanghai}
  \country{China}
}
\email{li.g@sjtu.edu.cn}


\begin{abstract}
Invariant generation is the classical problem that aims at automated generation of assertions that over-approximates the set of reachable program states in a program. We consider affine invariants over affine while loops (i.e., loops with affine loop guards, conditional branches and assignment statements), and explore the automated generation of disjunctive affine invariants. Disjunctive invariants are important to 
capture disjunctive features in programs such as multiple phases, transitions between different modes, etc., and are typically more precise than conjunctive invariants over programs with these features. 
To generate tight affine invariants, existing approaches have investigated the application of Farkas' Lemma to conjunctive affine invariant generation, but none of them considers disjunctive affine invariants. 

In this work, we introduce a novel approach to generate affine disjunctive invariants using Farkas' Lemma. Our approach employs a carefully designed control flow transformation to create an affine transition system from the original loop to which previous approaches in Farkas' Lemma apply. 
The affine transition system distinguishes paths within a loop body with their corresponding conjunctive invariants, and takes the disjunction of these conjunctive invariants. 
Furthermore, we propose optimizations to improve the scalability, accuracy and  applicability of our approach.
These optimizations include: a) an invariant propagation technique that
enables the spread of invariants within the strongly connected components of the transition system to improve scalability; b) the tackling of infeasible implication in the application of Farkas' Lemma to improve accuracy; 
c) the standard loop summarization that extends our approach to nested loops to improve applicability.  
The experimental results over a benchmark set of more than 100 affine while loops (mostly from SVCOMP2023) shows that our approach outperforms other approaches in both the number of solved instances and the time efficiency. In particular, our approach handles most instances in 100 milliseconds, achieving a speedup of 10X to 1000X while maintaining a comparable success rate when compared with the state-of-the-art tool Veriabs. 
\end{abstract}


%%
%% The code below is generated by the tool at http://dl.acm.org/ccs.cfm.
%% Please copy and paste the code instead of the example below.
%%
\begin{CCSXML}
<ccs2012>
<concept>
<concept_id>10011007.10011006.10011008</concept_id>
<concept_desc>Software and its engineering~General programming languages</concept_desc>
<concept_significance>500</concept_significance>
</concept>
<concept>
<concept_id>10003456.10003457.10003521.10003525</concept_id>
<concept_desc>Social and professional topics~History of programming languages</concept_desc>
<concept_significance>300</concept_significance>
</concept>
</ccs2012>
\end{CCSXML}
\ccsdesc[500]{Software and its engineering~General programming languages}
\ccsdesc[300]{Social and professional topics~History of programming languages}

\keywords{}

\maketitle

\input{introduction}
\input{preliminaries}
\input{overview}
\input{unnestedloop}
%\input{nestedloop}
\input{evaluation}
\input{related}
\input{conclusion}


%% Acknowledgments
%% acks environment is optional contents suppressed with 'anonymous'
%% Commands \grantsponsor{<sponsorID>}{<name>}{<url>} and
%% \grantnum[<url>]{<sponsorID>}{<number>} should be used to
%% acknowledge financial support and will be used by metadata
%% extraction tools.
\begin{acks}                            
  This material is based upon work supported by the \grantsponsor{GS100000001}{National Science Foundation}{http://dx.doi.org/10.13039/100000001} under Grant No.~\grantnum{GS100000001}{nnnnnnn} and Grant No.~\grantnum{GS100000001}{mmmmmmm}.  Any opinions, findings, and conclusions or recommendations expressed in this material are those of the author and do not necessarily reflect the views of the National Science Foundation.
\end{acks}
\clearpage
%% Bibliography
\bibliographystyle{ACM-Reference-Format}
\bibliography{invariants}
\clearpage
%% Appendix
\input{appendix}
%\input{appendix_proof}
\clearpage
%\input{appendix_invariants}
\clearpage
\input{appendix_innersmry}


\end{document}
