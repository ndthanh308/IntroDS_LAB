\documentclass[acmsmall,screen]{acmart}\settopmatter{printfolios=true,printccs=false,printacmref=false}
\acmJournal{PACMPL}
\acmVolume{1}
\acmNumber{CONF} 
\acmArticle{1}
\acmYear{2018}
\acmMonth{1}
\acmDOI{} 
\startPage{1}

\setcopyright{none}

\bibliographystyle{ACM-Reference-Format}
\citestyle{acmauthoryear}   


\usepackage{booktabs}   
\usepackage{subcaption} 
\renewcommand\footnotetextcopyrightpermission[1]{}
\newcommand\bmmax{0}
\usepackage{array,makecell}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{microtype}
\usepackage{balance}
\usepackage{multirow}
\usepackage{diagbox}
\let\Bbbk\relax
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{graphics}
\usepackage{multicol}
\usepackage{enumitem}
\usepackage{mathtools}
\usepackage{epsfig}
\usepackage{xspace}
\usepackage{extarrows}
\usepackage{bm}
\usepackage{rotating}
\usepackage{eucal}
\usepackage[symbol, flushmargin]{footmisc}
\usepackage{multirow}
\usepackage{graphicx}
\usepackage{float}
\usepackage{ragged2e}
\usepackage[normalem]{ulem}
\usepackage{algorithm}
\usepackage{algorithmicx}
\usepackage{algpseudocode}
\usepackage{setspace}
\usepackage{listings}

\lstdefinelanguage{program}
{
morekeywords={if, then, else, fi, while, true, false, switch, case, skip, break},
sensitive = false
}

\newtheorem{example}{Example}
\newtheorem{remark}{Remark}
\newtheorem{definition}{Definition}
\newtheorem{lemma}{Lemma}
\newtheorem{proposition}{Proposition}

\input{macros}

\begin{document}

\title{Affine Disjunctive Invariant Generation with Farkas' Lemma}


\author{Hongming Liu}
\affiliation{
  \institution{Shanghai Jiao Tong University}
  \city{Shanghai}
  \country{China}
}
\email{hm-liu@sjtu.edu.cn}

\author{Jingyu Ke}
\affiliation{
  \institution{Shanghai Jiao Tong University}
  \city{Shanghai}
  \country{China}
}
\email{windocotber@gmail.com}

\author{Hongfei Fu}
\authornote{Corresponding Author}
\affiliation{
  \institution{Shanghai Jiao Tong University}
  \city{Shanghai}
  \country{China}
}
\email{jt002845@sjtu.edu.cn}

\author{Liqian Chen}
\affiliation{
  \institution{National University of Defense Technology}
  \city{Changsha}
  \country{China}
}
\email{lqchen@nudt.edu.cn}

\author{Guoqiang Li}
\affiliation{
  \institution{Shanghai Jiao Tong University}
  \city{Shanghai}
  \country{China}
}
\email{li.g@sjtu.edu.cn}



\begin{abstract}
Invariant generation is the classical problem that aims at automated generation of assertions that over-approximates the set of reachable program states in a program. We consider the problem of generating affine invariants over affine while loops (i.e., loops with affine loop guards, conditional branches and assignment statements), and explore the automated generation of disjunctive affine invariants. Disjunctive invariants are an important class of invariants that capture disjunctive features in programs such as multiple phases, transitions between different modes, etc., and are typically more precise than conjunctive invariants over programs with these features. 
To generate tight affine invariants, existing constraint-solving approaches have investigated the application of Farkas' Lemma to conjunctive affine invariant generation, but none of them considers disjunctive affine invariants. 

In this work, we propose a novel approach to generate affine disjunctive invariants via Farkas' Lemma. By observing that disjunctive invariants often arise from the conditional branches in the loop body, our approach first pushes all the conditional branches in a loop body to the top level so that every top-level branch appears at the entry point of the loop body, and treats each top-level branch as a standalone branch location. Then our approach constructs an affine transition system that describes the transitions between the branch locations, and solves the conjunctive affine invariants at each branch by existing approaches via Farkas' Lemma. The final disjunctive invariant is the disjunction of the conjunctive invariants generated over these branch locations. 
Furthermore, we explore the following improvements to our approach:
(a) an invariant propagation technique on the affine transition system that first generates an invariant only at the initial branch location and then propagates this invariant to other branch locations in a breadth-first fashion to 
improve the time efficiency of invariant generation; (b) an extension of our approach to generate affine disjunctive loop summary, and (c) the use of loop summary to generate affine disjunctive invariants over nested affine while loops. 
Experimental results over a wide range of 
benchmarks 
demonstrate that our approach can (i) generate affine disjunctive invariants that are capable of proving safety properties of while loops beyond previous approaches and state-of-the-art software verifiers with even a considerable advantage in time efficiency, and (ii) derive substantially more accurate affine loop summaries than existing approaches. Moreover, the improvement of invariant propagation can indeed speed up the invariant generation, and that of using loop summary to handle nested loops can indeed generate tight disjunctive invariants for nested loops. 
\end{abstract}


\begin{CCSXML}
<ccs2012>
<concept>
<concept_id>10011007.10011006.10011008</concept_id>
<concept_desc>Software and its engineering~General programming languages</concept_desc>
<concept_significance>500</concept_significance>
</concept>
<concept>
<concept_id>10003456.10003457.10003521.10003525</concept_id>
<concept_desc>Social and professional topics~History of programming languages</concept_desc>
<concept_significance>300</concept_significance>
</concept>
</ccs2012>
\end{CCSXML}

\ccsdesc[500]{Software and its engineering~General programming languages}
\ccsdesc[300]{Social and professional topics~History of programming languages}
\maketitle

\input{introduction}
\input{preliminaries}
\input{overview}
\input{unnestedloop}
\input{nestedloop}
\input{evaluation}
\input{related}
\input{conclusion}


\begin{acks}                            
  This material is based upon work supported by the
  \grantsponsor{GS100000001}{National Science
    Foundation}{http://dx.doi.org/10.13039/100000001} under Grant
  No.~\grantnum{GS100000001}{nnnnnnn} and Grant
  No.~\grantnum{GS100000001}{mmmmmmm}.  Any opinions, findings, and
  conclusions or recommendations expressed in this material are those
  of the author and do not necessarily reflect the views of the
  National Science Foundation.
\end{acks}


\clearpage
\bibliography{invariants}


\clearpage
\input{appendix.tex}
\input{appendix_proof}
\clearpage
\input{appendix_invariants}
\clearpage
\input{appendix_innersmry}


\end{document}
\endinput
