\usepackage{stmaryrd}
\usepackage{mathtools}
\usepackage{thmtools}
\usepackage{proof-dashed}
\usepackage{dashrule}
\usepackage[inline]{enumitem}
\usepackage[capitalize]{cleveref}


\newcommand{\jrule}[1]{\text{\scshape \MakeLowercase{#1}}}
\newcommand{\srule}[1]{\jrule{$#1$S}}
\newcommand{\arule}[1]{\jrule{$#1$F}}
\newcommand{\brule}[1]{\jrule{$#1$B}}
\newcommand{\prule}[1]{\jrule{$#1$P}}

\newcommand{\sig}{\Sigma}
\NewDocumentCommand{\sige}{s}{\IfBooleanT{#1}{(} \cdot \IfBooleanT{#1}{)}}


\newcommand{\alphas}{\vec{\alpha}}
\NewDocumentCommand{\betas}{s}{\IfBooleanTF{#1}{\smash{\betas}\vphantom{beta}}{\vec{\beta}}}
\newcommand{\gammas}{\vec{\gamma}}
\newcommand{\deltas}{\vec{\delta}}

\newcommand{\defd}{\triangleq}

\newcommand{\tensor}{\mathbin{\times}}
\newcommand{\one}{\mathord{\mathbf{1}}}
\newcommand{\dn}{\mathopen{\downarrow}}
\newcommand{\imp}{\mathbin{\rightarrow}}
\newcommand{\up}{\mathopen{\uparrow}}

\NewDocumentCommand{\ctx}{}{\Gamma}
\NewDocumentCommand{\ctxe}{s}{\IfBooleanTF{#1}{(\ctxe)}{\cdot}}

\ExplSyntaxOn

\NewDocumentCommand{\plus}{s}{\IfBooleanTF{#1}{\multiplus}{\mathbin{+}}}
\NewDocumentCommand{\multiplus}{o m}{\mathopen{\plus}\{\tl_if_empty:nTF{#2}{\,}{#2}\}\IfValueT{#1}{\sb{#1}}}
\NewDocumentCommand{\with}{s}{\IfBooleanTF{#1}{\multiwith}{\mathbin{\binampersand}}}
\NewDocumentCommand{\multiwith}{o m}{\mathopen{\with}\{\tl_if_empty:nTF{#2}{\,}{#2}\}\IfValueT{#1}{\sb{#1}}}

\ExplSyntaxOff


\NewDocumentCommand{\dsub}{o}{\leqslant} % \IfValueT{#1}{\sb{#1}}}
\newcommand{\ndsub}{\nleqslant}
\newcommand{\asub}{\preccurlyeq}

\ExplSyntaxOn

\cs_new:Npn \suspendsubs:nn #1 #2 { #1 \tl_if_empty:nF { #2 } { \langle#2\rangle } }

\NewDocumentCommand{\dsubtype}{o > { \SplitArgument { 1 } { < } } m }{
  \exp_last_unbraced:No \suspendsubs:nn { \use_i:nn #2 }
  \IfValueTF{#1}{\dsub[#1]}{\dsub}
  \exp_last_unbraced:No \suspendsubs:nn { \use_ii:nn #2 }
}

\NewDocumentCommand{\asubtype}{o > { \SplitArgument { 1 } { < } } m }{
  \use_i:nn #2 \asub \use_ii:nn #2 \IfValueT{#1}{\vof #1}
}

\ExplSyntaxOff

\newcommand{\entails}{\Rightarrow}
\newcommand{\nentails}{\Arrownot\entails}

\newcommand{\cov}{\mathord{+}}
\newcommand{\ctv}{\mathord{-}}
\newcommand{\biv}{\mathord{\top}}
\newcommand{\vof}{\mathrel{\text{\ttfamily\#}}}

\NewDocumentCommand{\sube}{s}{\IfBooleanT{#1}{(} \cdot \IfBooleanT{#1}{)}}
\NewDocumentCommand{\subs}{s}{\IfBooleanTF{#1}{\Phi}{\Theta}}
\NewDocumentCommand{\subse}{s}{\IfBooleanT{#1}{(} \cdot \IfBooleanT{#1}{)}}

\newcommand{\set}[1]{\lbrace#1\rbrace}

\newcommand{\applysubs}[2]{\tosub{#1}(#2)}
\newcommand{\tosub}[1]{#1}


\NewDocumentCommand{\bpa}{ s m s m }{ \IfBooleanTF{#1}{ (#2) }{#2} \fatsemi \IfBooleanTF{#3}{ (#4) }{#4} }
\NewDocumentCommand{\bpasum}{ s }{ \IfBooleanTF{#1}{ \bpasumn }{ + } }
\NewDocumentCommand{\bpasumn}{ o m }{ \sum \IfValueT{#1}{ \sb{#1} } #2 }
\NewDocumentCommand{\bpaseq}{ m m }{ #1 \cdot #2 }
\NewDocumentCommand{\bpaemp}{ }{ \epsilon }

\NewDocumentCommand{\simu}{ }{ \lesssim }
\NewDocumentCommand{\umis}{ }{ \gtrsim }
\NewDocumentCommand{\trans}{ s o }{ \IfValueTF{#2}{ \mathrel{\IfBooleanT{#1}{\smash} {\overset{\raisebox{-0.5ex}{$\scriptstyle #2$}}{\trans}}} }{ \longrightarrow } }


\newcommand{\name}[1]{\mathsf{#1}}

\newcommand{\onen}{\name{one}}
\newcommand{\nat}{\name{nat}}
\newcommand{\zero}{\name{z}}
\newcommand{\suc}{\name{s}}
\newcommand{\even}{\name{even}}
\newcommand{\odd}{\name{odd}}

\newcommand{\bin}{\name{bin}}
\newcommand{\std}{\name{std}}
\newcommand{\pos}{\name{pos}}
\newcommand{\eps}{\name{eps}}
\newcommand{\bit}[1]{\name{b#1}}

\newcommand{\listn}{\name{list}}
\newcommand{\evenlist}{\name{evenlist}}
\newcommand{\oddlist}{\name{oddlist}}
\newcommand{\nelistn}{\name{nelist}}
\newcommand{\elistn}{\name{elist}}
\newcommand{\nil}{\name{nil}}
\newcommand{\cons}{\name{cons}}
\newcommand{\olistn}{\name{olist}}

\newcommand{\tree}{\name{tree}}
\newcommand{\leaf}{\name{leaf}}
\newcommand{\node}{\name{node}}
\newcommand{\otree}{\name{otree}}

\newcommand{\prodn}{\name{prod}}

\newcommand{\lspine}{\name{spine}}
\newcommand{\leafn}{\name{leaf}}
\newcommand{\fst}{\name{fst}}
\newcommand{\snd}{\name{snd}}

\newcommand{\stree}{\name{stree}}
\newcommand{\lf}{\name{lf}}
\newcommand{\nd}{\name{nd}}

\newcommand{\trie}{\name{treefn}}
\newcommand{\ttrie}{\name{ttrie}}
\newcommand{\ptrie}{\name{trie}}
\newcommand{\pttrie}{\name{pttrie}}
\newcommand{\lookupleaf}{\name{lookup\_leaf}}
\newcommand{\lookupnode}{\name{lookup\_node}}
\newcommand{\option}{\name{option}}

\newcommand{\dyck}{\name{d}}
\newcommand{\edyck}{\name{e}}
\newcommand{\rightn}{\name{R}}
\newcommand{\leftn}{\name{L}}

\newcommand{\stack}{\name{stack}}
\newcommand{\pushn}{\name{push}}
\newcommand{\popn}{\name{pop}}
\newcommand{\some}{\name{some}}
\newcommand{\none}{\name{none}}

\newcommand{\rstack}{\name{rstack}}

\newcommand{\inc}{\name{inc}}
\newcommand{\dec}{\name{dec}}
\newcommand{\val}{\name{val}}

\newcommand{\fold}{\name{fold}}
\newcommand{\size}{\name{size}}