\appendix
\subsection{Construction of potential function and properties}\label{constructionpot}
To construct the potential function we consider the objective function for dual of optimization program \eqref{galeconvex}
\begin{dmath}
\Upsilon (p)= \max_{ \sum_{c,k,r}x^s_{ckr}p_{cr}=B_s}\left ( \sum_{s\in\mathcal{S}}B_s \log\left ( U_s \right )+\sum_{c\in\mathcal{C}}\sum_{r\in\mathcal{R}_c} p_{cr} \left (1-\sum_{s\in\mathcal{S}}\sum_{k\in\mathcal{K}^s_c}x^s_{crk}\right )\right ) 
\end{dmath}



and in dual goal is to minimize the $\Upsilon (p)$ wrt $p$
%
%\begin{dmath}
%\Upsilon (p)= \max_{\sum_{c,k,r}x^s_{ckr}p_{cr}=B_s}\left ( \sum_{s\in\mathcal{s}}B_s \log\left ( U_s \right )+\sum_{c\in\mathcal{C}}\sum_{r\in\mathcal{R}_c} p_{cr} \left (1-\sum_{s}\sum_{k\in\mathcal{K}^s_c}x^s_{crk}\right )\right ) 
%\end{dmath}


\begin{dmath}
\Upsilon (p)= \max_{\sum_{c,k,r}x^s_{ckr}p_{cr}=B_s}\left ( \sum_{s}\frac{B_s \log}{(1-\alpha_s)}\times \left(\sum_{c\in\mathcal{C}^s}\sum_{k\in\mathcal{K}^s_{c}} w^s_{ck}\left( \min_{r}\lbrace\frac{x^s_{ckr}}{d^s_{ckr}}\rbrace\right)^{(1-\alpha_s)}\right)\right)\\
+\sum_{c\in\mathcal{C}}\sum_{r\in\mathcal{R}_c} p_{cr} \left (1-\sum_{s}\sum_{k\in\mathcal{K}^s_c}x^s_{crk}\right )
\end{dmath}


\begin{dmath}
\Upsilon (p)= \max_{\sum_{c,k,r}b^s_{ckr}=B_s}\left ( \sum_{s}\frac{B_s}{(1-\alpha_s)}\times\log\left(\sum_{c\in\mathcal{C}^s}\sum_{k\in\mathcal{K}^s_{c}} w^s_{ck}\left( \min_{r}\lbrace\frac{b^s_{ckr}}{p_{cr}d^s_{ckr}}\rbrace\right)^{(1-\alpha_s)}\right)+\sum_{c\in\mathcal{C}}\sum_{r\in\mathcal{R}_c} p_{cr}-\sum_{s}B_{s}\right )\label{append1} 
\end{dmath}

Let given price vector $p$, $b(p)$ be the spending that maximizes the objective in \eqref{append1} subject to constraints $\left(\sum_{c}\sum_{k}b^s_{ckr}=B_{s}\right)\forall s \in\mathcal{S}$ 
\begin{dmath}
\Upsilon (p)=\left ( \sum_{s}\frac{B_s}{(1-\alpha_s)}\times\log\left(\sum_{c\in\mathcal{C}^s}\sum_{k\in\mathcal{K}^s_{c}} w^s_{ck}\left( \min_{r}\lbrace\frac{b^s_{ckr}(p)}{p_{cr}d^s_{ckr}}\rbrace\right)^{(1-\alpha_s)}\right)+\sum_{c\in\mathcal{C}}\sum_{r\in\mathcal{R}_c} p_{cr}-\sum_{s}B_{s}\right ) 
\end{dmath}
We observe that the at optimal point 
\begin{enumerate}
\item for each $s$, $\forall c$ and  $\forall kw^s_{ck}\frac{{u^s_{ck}}^{(1-\alpha_s)}}{b^s_{ck}}=w^s_{ck}\frac{{u^s_{ck'}}^{(1-\alpha_s)}}{b^s_{ck'}}$ 
\item $\frac{b^s_{ckr}(p)}{p_{cr}d^s_{ckr}}=\frac{b^s_{ckr}(p)}{p_{cr}d^s_{ckr}}$
\end{enumerate}
\begin{dmath}
\Upsilon (\mathbf{p})=\sum_{s\in\mathcal{S}}\sum_{c\in\mathcal{C}^s}\sum_{k\in\mathcal{K}^s_{c}}\sum_{r\in\mathcal{R}_{c}}b^s_{ckr}(\mathbf{p})\log\left(\frac{b^s_{ckr}(\mathbf{p})}{p_{cr}d^s_{ckr}}\right)-\frac{1}{(1-\alpha_s)}\sum_{s\in\mathcal{S}}\sum_{c\in\mathcal{C}^s}\sum_{k\in\mathcal{K}^s_{c}}b^s_{ck}(\mathbf{p})\log\left(\frac{b^s_{ck}(\mathbf{p})}{w^s_{ck}} \right)\label{append2}
\end{dmath}
Given $\mathbf{p}$, the function in right hand side of equation \eqref{append2} is convex in $b$ and its minimal point subject to constraints $\left(\sum_{c}\sum_{k}b^s_{ckr}=B_{s}\right)\forall s \in\mathcal{S}$ is $b(\mathbf{p})$

\begin{dmath}
\Upsilon (\mathbf{p})\leq\sum_{s\in\mathcal{S}}\sum_{c\in\mathcal{C}^s}\sum_{k\in\mathcal{K}^s_{c}}\sum_{r\in\mathcal{R}_{c}}b^s_{ckr}\log\left(\frac{b^s_{ckr}}{p_{cr}d^s_{ckr}}\right)-\frac{1}{(1-\alpha_s)}\sum_{s\in\mathcal{S}}\sum_{c\in\mathcal{C}^s}\sum_{k\in\mathcal{K}^s_{c}}b^s_{ck}\log\left(\frac{b^s_{ck}}{w^s_{ck}} \right)
\end{dmath}
The inequality becomes equality if $b_{s}=b_{s}(\mathbf{p})$
%%%%%%%%%%%%%%%%%%%%%%%
\begin{dmath}
\Upsilon (\mathbf{p}(b))\leq \Phi(b)\label{append3}
\end{dmath}
Since we know that the $b^*=b\left(p(b^*)\right)$
\begin{dmath}
\Upsilon (\mathbf{p}(b^*))=\Phi(b^*)\label{append4}
\end{dmath}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
From \eqref{append3} and \eqref{append4} we have 
\begin{equation}
\Upsilon(p(b))-\Upsilon(p(b^{*}))\leq \Phi(b)-\Phi(b^{*})
\end{equation}
%Thus we consider $\Phi$ as potential function which is convex $(1-\alpha_s)<0$
%\begin{dmath}
%\Upsilon _{<0}(p(b))=\sum_{s\in\mathcal{S}}\sum_{c\in\mathcal{C}^s}\sum_{k\in\mathcal{K}^s_{c}}\sum_{r\in\mathcal{R}_{c}}b^s_{ckr}\log\left(\frac{b^s_{ckr}}{p_{cr}d^s_{ckr}}\right)-\frac{1}{(1-\alpha_s)}\sum_{s\in\mathcal{S}}\sum_{c\in\mathcal{C}^s}\sum_{k\in\mathcal{K}^s_{c}}b^s_{ck}\log\left(\frac{b^s_{ck}}{w^s_{ck}} \right)
%\end{dmath}
%for $(1-\alpha_s)>0$ we write $u^s_{ck}=\frac{p_{kr}d^s_{ckr}}{b^s_{ckr}}$ and thus
%\begin{dmath}
%\Phi_{>0}(b)=\sum_{s\in\mathcal{S}}\sum_{c\in\mathcal{C}^s}\sum_{k\in\mathcal{K}^s_{c}}\sum_{r\in\mathcal{R}_{c}}b^s_{ckr}\log\left(\frac{p_{kr}d_{ikr}}{b_{ikr}}\right)-\frac{1}{(1-\alpha_s)}\sum_{s\in\mathcal{S}}\sum_{c\in\mathcal{C}^s}\sum_{k\in\mathcal{K}^s_{c}}b^s_{ck}\log\left(\frac{b^s_{ck}}{w^s_{ck}}\right)
%\end{dmath}
%\begin{dmath}
%\Phi_{>0}(b)=-\sum_{s\in\mathcal{S}}\sum_{c\in\mathcal{C}^s}\sum_{k\in\mathcal{K}^s_{c}}\sum_{r\in\mathcal{R}_{c}}b^s_{ckr}\log\left(\frac{b^s_{ckr}}{p_{cr}d^s_{ckr}}\right)-\frac{1}{(1-\alpha_s)}\sum_{s\in\mathcal{S}}\sum_{c\in\mathcal{C}^s}\sum_{k\in\mathcal{K}^s_{c}}b^s_{ck}\log\left(\frac{b^s_{ck}}{w^s_{ck}}\right)
%\end{dmath}
%and $\Phi_{>0}$ is concave function for $(1-\alpha_s)>0$
%\begin{dmath}
%\nabla_{b^s_{ckr}} \Phi_{p}=\left[1+\log\left(\frac{w^s_{ck}b^s_{ckr}}{p_{cr}d^s_{ckr}}\right)\right]-\frac{1}{(1-\alpha_s)}\left[1+\log\left(\frac{b^s_{ck}}{w^s_{ck}}\right)\right]
%\end{dmath}
%\begin{dmath}
%\sum_{c}\sum_{k}\sum_{r}\nabla_{b_{ikr}} \Phi_{p}\left(b^{s}_{ckr}(t)\right)\left(b^s_{ckr}-b^{s}_{ckr}(t)\right)+\sum_{c}\sum_{k}\sum_{r}b^s_{ckr}\log\left(\frac{b^s_{ckr}}{b^{s}_{ckr}(t)}\right)
%\end{dmath}
\subsection{Proof of Lemma \ref{lema}}\label{proofoflema}
\begin{proof}
  We know that the $\Phi(b)$ is a convex function then by definition of a convex function, we have 
\begin{align}
\Phi(b')+\left \langle\nabla \Phi(b'),b-b'  \right \rangle\leq \Phi(b')
\end{align}
Now consider 
\begin{equation}
\Phi(b)-\Phi(b')-\left \langle \nabla \Phi(b'),b-b' \right \rangle
\end{equation}
 putting the value of $\nabla \Phi(b')$ in above equation and after some calculations, we get 
\begin{dmath}
\Phi(b)-\Phi(b')-\left \langle \nabla \Phi(b'),b-b' \right \rangle=\sum_{s:1\leq \alpha_s\leq \infty}KL_{a}(b_s||b'_s)-\sum_{s:1<\alpha_s<\infty}\frac{1}{(1-\alpha_s)}KL_{b}(b^s|{|b^s}')-KL(p||p')
\end{dmath}
and since $KL(p||p')$ is non negative
\begin{dmath}
\Phi(b)-\Phi(b')-\left \langle \nabla \Phi(b'),b-b' \right \rangle\leq\sum_{s:1\leq \alpha_s\leq \infty}KL_{a}(b_s||b'_s)-\sum_{s:1<\alpha_s<\infty}\frac{1}{(1-\alpha_s)}KL_{b}(b_s|{|b_s}')
\end{dmath}
\begin{dmath}
\Phi(b)\leq \Phi(b')+\left \langle \nabla \Phi(b'),b-b' \right \rangle+\leq\sum_{s:1\leq \alpha_s\leq \infty}KL_{a}(b_s||b'_s)-\sum_{s:1<\alpha_s<\infty}\frac{1}{(1-\alpha_s)}KL_{b}(b_s|{|b_s}')
\end{dmath}
which proves that function $\Phi(b)$ is $1$ Bergman convex wrt $d_{g}$ $\eqref{dg}$
\end{proof}
\subsection{Derivation of update rule for $\alpha_s\geq1$}\label{updaterulenegative}
\begin{dmath}
b_{s}(t+1)=\argminA_{\sum_{c}\sum_{k}\sum_{r}{b^s_{ckr}}\leq B_{s}}\left\lbrace \nabla_{b^s} \Phi_{p}\left(b^{s}(t)\right)\left(b^s-b^{s}(t)\right)+KL_a\left(b^s||b^{s}(t)\right)-\frac{1}{(1-\alpha_s)}KL_b\left(b^s||b^{s}(t)\right))\right\rbrace
\end{dmath}
we consider the Lagrangian 
\begin{dmath}
L_s\left(b^s,\gamma\right)=\nabla_{b^s} \Phi_{p}\left(b^{s}(t)\right)\left(b^s-b^{s}(t)\right)+KL_a\left(b^s||b^{s}(t)\right)\\
-\frac{1}{(1-\alpha_s)}KL_b\left(b^s||b^{s}(t)\right))+\gamma\left(\sum_{c}\sum_{k}\sum_{r}{b^s_{ckr}}- B_{s}\right)
\end{dmath}

%\begin{dmath}
%\argminA_{\sum_{c}\sum_{k}\sum_{r}{b^s_{ckr}}\leq B_{s}}\left\lbrace \sum_{c}\sum_{k}\sum_{r}\nabla_{b^s_{ckr}} \Phi_{p}\left(b^{s}_{ikr}(t)\right)\left(b^s_{ckr}-b^{s}_{ckr}(t)\right)+\sum_{k}\sum_{r}b^s_{ckr}\log\left(\frac{b^s_{ckr}}{b^{s}_{ikr}(t)}\right)\right\rbrace
%\end{dmath}
After applying the first order KKT condition we get
\begin{dmath}
\left[1+\log\left(\frac{b^{s}_{ckr}(t)}{p_{cr}d^s_{ckr}}\right)\right]-\frac{1}{(1-\alpha_s)}\left[1+\log\left(\frac{b^s_{ck}(t)}{w^s_{ck}}\right)\right]+1\\
+\log
\left(\frac{b^s_{ckr}}{b^{s}_{ckr}(t)}\right)-\frac{1}{(1-\alpha_s)}\left[1+\log\left(\frac{b^s_{ck}}{b^{s}_{ck}(t)}\right)\right]+\gamma=0
\end{dmath}
After some calculation we have 
%\begin{dmath}
%-\log\left( p_{cr}d^s_{ckr}\right)-\frac{1}{(1-\alpha_s)}\log\left(\frac{b^s_{ck}}{w^s_{ck}}\right)+\log\left(b^s_{ckr}\right)+\gamma=0
%\end{dmath}
\begin{dmath}
\log\left(b^s_{ckr}\right)=\log\left( p_{cr}d^s_{ckr}\right)+\frac{1}{(1-\alpha_s)}\log\left(\frac{b^s_{ck}}{w^s_{ck}}\right)-\gamma
\end{dmath}
taking exponentila on both side 
\begin{dmath}
b^s_{ckr}=e^{C}p_{cr}d^s_{ckr}\left(\frac{b^s_{ck}}{w^s_{ck}}\right)^{1/(1-\alpha_s)}\label{bsckr}
\end{dmath}
summing over $r$ on both side  
\begin{dmath}
b^s_{ck}\left(\frac{b^s_{ck}}{w^s_{ck}}\right)^{-1/(1-\alpha_s)}=e^{C}\sum_{r}p_{cr}d^s_{ckr}
\end{dmath}
%\begin{dmath}
%\left(b^s_{ck}\right)^{\frac{-\alpha_s}{(1-\alpha_s)}}=e^{c}\left( w^s_{ck} \right)^{-1/(1-\alpha_s)}\left(\sum_{r}p_{cr}d^s_{ckr}\right)
%\end{dmath}
\begin{dmath}
\left(b^s_{ck}\right)^{\frac{1}{(1-\alpha_s)}}=e^{c\frac{1}{-\alpha_s}}\left( w^s_{ck} \right)^{\frac{-1}{(-\alpha_s)(1-\alpha_s)}}\left(\sum_{r}p_{cr}d^s_{ckr}\right)^{\frac{1}{-\alpha_s}}\label{bscreplace}
\end{dmath}
replacing $\left(b^s_{ck}\right)^{\frac{1}{(1-\alpha_s)}}$ from \eqref{bscreplace} in \eqref{bsckr} we have 
\begin{dmath}
b^s_{ckr}=e^{c\frac{-\alpha_s}{(1-\alpha_s)}}p_{cr}d^s_{ckr}\left( w^s_{ck} \right)^{\frac{-1}{(-\alpha_s)}}\left(\sum_{r}p_{cr}d^s_{ckr}\right)^{\frac{1}{-\alpha_s}}
\end{dmath}
summing over all $r$ across all the classes and cell we have 
\begin{dmath}
B_{s}=e^{c\frac{-\alpha_s}{(1-\alpha_s)}}\sum_{c}\sum_{k}\left( w^s_{ck} \right)^{\frac{-1}{(-\alpha_s)}}\left(\sum_{r}p_{cr}d^s_{ckr}\right)^{\frac{(1-\alpha_s)}{-\alpha_s}}
\end{dmath}

\begin{dmath}
b^s_{ckr}=\frac{B_{s}p_{cr}d^s_{ckr}\left( w^s_{ck} \right)^{\frac{-1}{(-\alpha_s)}}\left(\sum_{r}p_{cr}d^s_{ckr}\right)^{\frac{1}{-\alpha_s}}}{\sum_{c}\sum_{k}\left( w^s_{ck} \right)^{\frac{-1}{(-\alpha_s)}}\left(\sum_{r}p_{cr}d^s_{ckr}\right)^{\frac{(1-\alpha_s)}{-\alpha_s}}}
\end{dmath}
\begin{dmath}
b^s_{ckr}=\frac{B_{s}\frac{p_{cr}d^s_{ckr}}{\sum_{r}p_{cr}d^s_{ckr}}\left( w^s_{ck}\right)^{\frac{1}{^{\alpha_s}}}\left(\sum_{r}p_{cr}d^s_{ckr}\right)^{\frac{(1-\alpha_s)}{^{-\alpha_s}}}}{\sum_{c'\in\mathcal{C}}\sum_{k'\in\mathcal{K}^s_{c'}}\left( w^s_{c'k'}\right)^{\frac{1}{^{\alpha_s}}}\left(\sum_{r'}p_{c'r'}d^s_{c'k'r'}\right)^{\frac{(1-\alpha_s)}{^{-\alpha_s}}}}
\end{dmath}

\subsection{Best response}\label{bestresponse}
We consider the Lagrangian for the optimization \eqref{marketprob}
\begin{dmath}
L_s\left(u,b,\lambda,\gamma\right)=\frac{1}{(1-\alpha_s)}\sum_{c}\sum_{k} w^s_{ck} \left({u^s_{ck}}\right)^{(1-\alpha_s)}-\sum_{c}\sum_{k}\sum_{r}\lambda_{ckr}\left(u^{s}_{ck}-\frac{b^{s}_{ckr}}{p_{cr}d^s_{ckr}}\right)-\gamma\left(\sum_{c}\sum_{k}\sum_{r}b^{s}_{ckr}-B_s\right)
\end{dmath}
After applying the first order KKT conditions 
\begin{align}
w^s_{ck}\left(u^s_{ck}\right)^{-\alpha_s}-\sum_{r}\lambda_{ckr}=&0,\forall c\in\mathcal{C},\forall k\in\mathcal{K},\forall\label{bestkkt1}\\
\frac{\lambda_{ckr}}{p_{cr}d^s_{ckr}}=&\gamma\;\forall c\in\mathcal{C},\forall k\in\mathcal{K},\forall r\in\mathcal{R}\label{bestkkt2}
\end{align}
from \eqref{bestkkt1} and \eqref{bestkkt2}
\begin{dmath}
w^s_{ck}\left({u^s_{ck}}\right)^{-\alpha_s}=\gamma\sum_{r}p_{cr}d^s_{ckr}\\
\end{dmath}
\begin{dmath}
{u^s_{ck}}=\left(\gamma\right)^{\frac{1}{^{-\alpha_s}}}\left( w^s_{ck}\right)^{\frac{1}{^{\alpha_s}}}\left(\sum_{r}p_{cr}d^s_{ckr}\right)^{\frac{1}{^{-\alpha_s}}}
\end{dmath}
we know that at best response $u^s_{ck}=\frac{b^s_{ckr}}{p_{cr}d^s_{ckr}}$
\begin{dmath}
\frac{b^s_{ckr}}{p_{kr}d^s_{ckr}}=\gamma^{\frac{1}{^{-\alpha_s}}}\left( w^s_{ck}\right)^{\frac{1}{^{\alpha_s}}}\left(\sum_{r}p_{cr}d^s_{ckr}\right)^{\frac{1}{^{-\alpha_s}}}
\end{dmath}
\begin{dmath}
b^s_{ckr}=\gamma^{\frac{1}{^{-\alpha_s}}}\left( w^s_{ck}\right)^{\frac{1}{^{\alpha_s}}}p_{cr}d^s_{ckr}\left(\sum_{r}p_{kr}d^s_{ckr}\right)^{\frac{1}{^{-\alpha_s}}}\label{bsckr4}
\end{dmath}
%\begin{dmath}
%\sum_{r}b^s_{ckr}=\gamma^{\frac{1}{^{-\alpha_s}}}\left( w^s_{ck}\right)^{\frac{1}{^{\alpha_s}}}\sum_{r}p_{cr}d^s_{ckr}\left(\sum_{r}p_{cr}d^s_{ckr}\right)^{\frac{1}{^{-\alpha_s}}}
%\end{dmath}
summing over $c\in\mathcal{C}$, $k\in\mathcal{K}$ and $r\in\mathcal{KR}$
\begin{dmath}
B_{s}=\gamma^{\frac{1}{^{-\alpha_s}}}\sum_{c}\sum_{k}\left( w^s_{ck}\right)^{\frac{1}{^{\alpha_s}}}\left(\sum_{r}p_{cr}d^s_{ckr}\right)^{\frac{(1-\alpha_s)}{^{-\alpha_s}}}\label{bsck4}
\end{dmath}
Replacing the value of $\gamma^{\frac{1}{^{-\alpha_s}}}$ from \eqref{bsck4} in \eqref{bsckr4}
\begin{dmath}
b^s_{ckr}=\frac{B_{s}p_{cr}d^s_{ckr}\left( w^s_{ck}\right)^{\frac{1}{^{\alpha_s}}}\left(\sum_{r}p_{cr}d^s_{ckr}\right)^{\frac{1}{^{-\alpha_s}}}}{\sum_{c}\sum_{k}\left( w^s_{ck}\right)^{\frac{1}{^{\alpha_s}}}\left(\sum_{r}p_{cr}d^s_{ckr}\right)^{\frac{(1-\alpha_s)}{^{-\alpha_s}}}}
\end{dmath}

\begin{dmath}
b^s_{ckr}=\frac{B_{s}\frac{p_{cr}d^s_{ckr}}{\sum_{r}p_{cr}d^s_{ckr}}\left( w^s_{ck}\right)^{\frac{1}{^{\alpha_s}}}\left(\sum_{r}p_{cr}d^s_{ckr}\right)^{\frac{(1-\alpha_s)}{^{-\alpha_s}}}}{\sum_{c}\sum_{k}\left( w^s_{ck}\right)^{\frac{1}{^{\alpha_s}}}\left(\sum_{r}p_{cr}d^s_{ckr}\right)^{\frac{(1-\alpha_s)}{^{-\alpha_s}}}}
\end{dmath}
\subsection{Market equilibrium}\label{proofmarketequi}




%\begin{dmath}
%\sum_{i}\frac{B_i}{(1-\alpha_s)}\log\left(\sum_{k} {u_{ik}}^{(1-\alpha_s)}\right)-\sum_{i}\sum_{k}\sum_{r}\lambda_{ikr}\left(u_{ik}-\frac{x_{ikr}}{d_{ikr}}\right)-\sum_{k}\sum_{r}p_{kr}\left(\sum_{i}x_{ikr}-1\right)
%\end{dmath}
%\begin{dmath}
%\frac{B_i{u_{ik}}^{(1-\alpha_s)-1}}{\sum_{k} {u_{ik}}^{(1-\alpha_s)}}-\sum_{r}\lambda_{ikr}=0
%\end{dmath}
%\begin{dmath}
%\frac{\lambda_{ikr}}{d_{ikr}}=p_{kr}
%\end{dmath}
%\begin{dmath}
%\lambda_{ikr}=p_{kr}d_{ikr}
%\end{dmath}
%\begin{dmath}
%\frac{B_i{u_{ik}}^{(1-\alpha_s)-1}}{\sum_{k} {u_{ik}}^{(1-\alpha_s)}}=\sum_{r}p_{kr}d_{ikr}
%\end{dmath}
%\begin{dmath}
%\frac{B_i{u_{ik}}^{(1-\alpha_s)}}{\sum_{k} {u_{ik}}^{(1-\alpha_s)}}=\sum_{r}p_{kr}x_{ikr}
%\end{dmath}
%\begin{dmath}
%B_{i}=\sum_{k}\sum_{r}p_{kr}x_{ikr}
%\end{dmath}
%  \begin{subequations}
%\begin{dmath}
%P_{SW}: \hspace{10pt}& \underset{{\bf x,u}}{\text{Maximize :}} 
%& & \sum_{s\in {\cal S}}B_s \log(U_s) \label{primal}\\
%& \text{subject to} & &  U_s=\left(\sum_{c\in\mathcal{C}}\sum_{k\in\mathcal{K}^s_c}w^s_{ck}\left(u^s_{ck}\right)^{(1-\alpha_s)}\right)^{\frac{1}{(1-\alpha_s)}} \quad \forall \; s\in {\cal S} \label{const1}\\
%&  & &u^s_{ck}\leq \frac{x^s_{ckr}}{d^s_{ckr}} \; (\lambda^s_{ckr}) \quad \forall \ s\in {\cal S},c\in {\cal C}_s,k\in {\cal K}_c,r\in {\cal R} \label{const2}\\
%& & &  \sum_{ s \in {\cal S}}\sum_{k\in\mathcal{K}^s_c}  x^s_{ckr}   \leq C_{cr},\; (p_{cr}) \quad \forall \ c\in {\cal C},r\in {\cal R} \label{const3}
%\end{dmath}\label{covexopti}
%  \end{subequations}
\begin{proof}
Consider the Lagrangian of EG problem
\begin{dmath}
L(u,x,\lambda,p)=\frac{B_{s}}{(1-\alpha_s)}\log\left(\sum_{c\in\mathcal{C}}\sum_{k\in\mathcal{K}^s_c}w^s_{ck}\left(u^s_{ck}\right)^{(1-\alpha_s)}\right)-\sum_{s}\sum_{c}\sum_{\mathcal{K}_{c}}\sum_{r}\lambda^s_{ckr}\left(u^s_{ck}-\frac{x^s_{ckr}}{d^s_{kr}}\right)\\
-\sum_{c}\sum_{r}p_{cr}\left(\sum_{s}\sum_{k}x^s_{ckr}-1\right)
\end{dmath}
After applying first order  KKT condition we have
\begin{align}
\frac{B_{s}w^s_{ck}\left(u^s_{ck}\right)^{-\alpha_s}}{\left(\sum_{c\in\mathcal{C}}\sum_{k\in\mathcal{K}^s_c}w^s_{ck}\left(u^s_{ck}\right)^{(1-\alpha_s)}\right)}-\sum_{r\in\mathcal{R}_c}\lambda^s_{ckr}=0\\
\forall s\in\mathcal{S},\forall c\in\mathcal{C},\forall k\in\mathcal{K}\nonumber
\end{align}
and
\begin{align}
&\frac{\lambda^s_{ckr}}{d^s_{kr}}-p_{cr}=0 \;\forall s\in\mathcal{S},\forall c\in\mathcal{C},\forall k\in\mathcal{K},r\in\mathcal{R}_
{c}\\
&u^s_{ck}=\frac{x^s_{ckr}}{d^s_{ckr}}  \;\forall s\in\mathcal{S},\forall c\in\mathcal{C},\forall k\in\mathcal{K},r\in\mathcal{R}_
{c}\\
&p_{cr}\left(\sum_{s}\sum_{k}x^s_{ckr}-1\right)=0\;\forall c\in\mathcal{C}\;\forall r\in\mathcal{R}_{c}\\
&\lambda^s_{ckr}\geq 0,\forall s\in\mathcal{S},\forall c\in\mathcal{C},\forall r\in\mathcal{R}_{c}\\
&p_{cr} \geq 0 \;\forall c\in\mathcal{C},\forall r\in\mathcal{R}_{c}
\end{align}
Form we have
\begin{dmath}
B_{s}\frac{w^s_{ck}\left(u^s_{ck}\right)^{-\alpha_s}}{\left(\sum_{c\in\mathcal{C}}\sum_{k\in\mathcal{K}^s_c}w^s_{ck}\left(u^s_{ck}\right)^{(1-\alpha_s)}\right)}=\sum_{r}p_{cr}d^s_{ckr}
\end{dmath}
From replacing $x^s_{ck}$ with $u^s_{ck}d^s_{ckr}$ we have
\begin{dmath}
B_{s}\frac{w^s_{ck}\left(u^s_{ck}\right)^{(1-\alpha_s)}}{\left(\sum_{c\in\mathcal{C}}\sum_{k\in\mathcal{K}^s_c}w^s_{ck}\left(u^s_{ck}\right)^{(1-\alpha_s)}\right)}=\sum_{r}p_{cr}x^s_{ckr}
\end{dmath}
summing over 
\begin{dmath}
B_{s}=\sum_{c}\sum_{k\in\mathcal{K}^s_c}\sum_{r}p_{cr}x^s_{ckr}
\end{dmath}
summing over the $s$ we get 
\begin{dmath}
\sum_{s}\sum_{c}\sum_{r}p_{cr}=1;
\end{dmath}
\end{proof}

